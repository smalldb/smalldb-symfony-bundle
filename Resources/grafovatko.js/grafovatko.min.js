/*!
 * Grafovatko v1.4
 * Copyright (c) 2017  Josef Kufner <josef@kufner.cz>
 * https://grafovatko.smalldb.org/
 * @license Apache-2.0
 *
 * Bundled libraries:
 *   - Dagre: MIT License, https://github.com/cpettitt/dagre
 *   - svg-intersections: BSD License, https://github.com/signavio/svg-intersections
 *
 */
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.G={}))})(this,function(t){"use strict";var B=function(){function r(t,e,r){this.x=t;this.y=e;this.ref=r;if(!this.ref){throw new Error("Missing 'ref' argument!")}}r.prototype.toRef=function(t){if(this.ref===t||t===undefined){return this}else if(this.ref===undefined){throw new Error("Can't convert to another reference. - Point's reference is not defined.")}else{return this.transform(this.ref.getAbsTransformation().diff(t.getAbsTransformation()),t)}};r.prototype.transform=function(t,e){return new r(this.x+t.x,this.y+t.y,e||this.ref)};r.prototype.getBoundingBox=function(){return new l(this.x,this.y,this.x,this.y)};r.prototype.toString=function(){return this.x.toFixed(1)+","+this.y.toFixed(1)+(this.ref?" + "+this.ref.getAbsTransformation().toString():"")};r.prototype.toCss=function(){return this.x.toFixed(1)+","+this.y.toFixed(1)};r.prototype.add=function(t){return new r(this.x+t.x,this.y+t.y,this.ref)};r.prototype.sub=function(t){return new r(this.x-t.x,this.y-t.y,this.ref)};return r}();var o=function(){function e(t,e){this.width=t;this.height=e===undefined?t:e}e.prototype.placeAt=function(t){if(!this.isValid()){throw new Error("Can't center an invalid GSize.")}var e=this.width/2;var r=this.height/2;return new l(t.x-e,t.y-r,t.x+e,t.y+r,t.ref)};e.prototype.isValid=function(){return this.width<Infinity&&this.height<Infinity};e.prototype.toString=function(){return this.width.toFixed(1)+"x"+this.height.toFixed(1)};e.prototype.getLonger=function(){return Math.max(this.width,this.height)};e.prototype.getShorter=function(){return Math.min(this.width,this.height)};e.prototype.fit=function(t){return new e(Math.max(this.width,t.width),Math.max(this.height,t.height))};return e}();var a=function(){function r(t,e){if(t===void 0){t=0}if(e===void 0){e=0}this.x=t;this.y=e}r.prototype.invert=function(){return new r(-this.x,-this.y)};r.prototype.append=function(t){return new r(this.x+t.x,this.y+t.y)};r.prototype.appendInverted=function(t){return new r(this.x-t.x,this.y-t.y)};r.prototype.diff=function(t){return new r(this.x-t.x,this.y-t.y)};r.prototype.translate=function(t,e){return new r(this.x+t,this.y+e)};r.prototype.toCss=function(){return"translate("+this.x.toFixed(1)+","+this.y.toFixed(1)+")"};r.prototype.toString=function(){return this.toCss()};return r}();var l=function(){function n(t,e,r,n,i){if(t<Infinity&&e<Infinity&&r<Infinity&&n<Infinity){this.tlx=Math.min(t,r);this.tly=Math.min(e,n);this.brx=Math.max(t,r);this.bry=Math.max(e,n)}else if(t!==undefined||e!==undefined||r!==undefined||n!==undefined){throw new Error("All or none of the parameters must be specified.")}this.ref=i}n.prototype.toRef=function(t){if(this.ref===t||t===undefined){return this}else if(this.ref===undefined){throw new Error("Can't convert to another reference. - BoundingBox reference is not defined.")}else{return this.transform(this.ref.getAbsTransformation().diff(t.getAbsTransformation()),t)}};n.prototype.isValid=function(){return this.tlx<Infinity&&this.tly<Infinity&&this.brx<Infinity&&this.bry<Infinity};n.prototype.transform=function(t,e){return new n(this.tlx+t.x,this.tly+t.y,this.brx+t.x,this.bry+t.y,e===undefined?e:this.ref)};n.prototype.expand=function(t){if(t.isValid()){if(t.ref!==this.ref){t=t.toRef(this.ref)}if(this.isValid()){this.tlx=Math.min(this.tlx,t.tlx);this.tly=Math.min(this.tly,t.tly);this.brx=Math.max(this.brx,t.brx);this.bry=Math.max(this.bry,t.bry)}else{this.tlx=t.tlx;this.tly=t.tly;this.brx=t.brx;this.bry=t.bry}}return this};n.prototype.addPoint=function(t){if(t.ref!==this.ref){t=t.toRef(this.ref)}if(this.isValid()){this.tlx=Math.min(this.tlx,t.x);this.tly=Math.min(this.tly,t.y);this.brx=Math.max(this.brx,t.x);this.bry=Math.max(this.bry,t.y)}else{this.tlx=t.x;this.tly=t.y;this.brx=t.x;this.bry=t.y}return this};n.prototype.addMargin=function(t,e,r,n){if(!this.isValid()){throw new Error("Can't add margin to an invalid GBoundingBox.")}if(e===undefined){e=t}if(r===undefined){r=t}if(n===undefined){n=e}if(!(t<Infinity&&e<Infinity&&r<Infinity&&n<Infinity)){throw new Error("Can't add invalid margin.")}this.tlx-=t;this.tly-=e;this.brx+=r;this.bry+=n;return this};n.prototype.getCenteringTransformation=function(){return new a(-(this.tlx+this.brx)/2,-(this.tly+this.bry)/2)};n.prototype.getTopLeftTransformation=function(){return new a(-this.tlx,-this.tly)};n.prototype.centerAt=function(t){if(!this.isValid()){throw new Error("Can't center an invalid GBoundingBox.")}if(t.ref!==this.ref){t=t.toRef(this.ref)}var e=(this.brx-this.tlx)/2;var r=(this.bry-this.tly)/2;return new n(t.x-e,t.y-r,t.x+e,t.y+r,this.ref)};n.prototype.getCenter=function(){return new B((this.tlx+this.brx)/2,(this.tly+this.bry)/2,this.ref)};n.prototype.getWidth=function(){return this.brx-this.tlx};n.prototype.getHeight=function(){return this.bry-this.tly};n.prototype.getBoundingBox=function(){return this};n.prototype.getSize=function(){return new o(this.brx-this.tlx,this.bry-this.tly)};n.prototype.getAspectRatio=function(){return this.bry!=this.tly?Math.abs((this.brx-this.tlx)/(this.bry-this.tly)):Infinity};n.prototype.toString=function(){return this.tlx.toFixed(1)+","+this.tly.toFixed(1)+" â€¦ "+this.brx.toFixed(1)+","+this.bry.toFixed(1)+(this.ref?" + "+this.ref.getAbsTransformation().toString():"")};return n}();var e={"BPMN.Activity-Looping":{metadata:{name:"BPMN - Activity-Looping",icon:"Activity-Looping.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:0},{x:8,y:0},{x:4.5,y:0},{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:9,y:1},{x:9,y:5},{x:9,y:3}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["path",{d:"M 16.8 23.2 C 14,21.8 15,17.8 17.8,17.8 C 20.6,17.8 22,21.4 19,23.4",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:16.7,y1:23.2,x2:16.5,y2:21.8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:16.9,y1:23.2,x2:15.3,y2:23.2,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Ad-Hoc-Collapsed-Sub-Process":{metadata:{name:"BPMN - Ad-Hoc-Collapsed-Sub-Process",icon:"Ad-Hoc-Collapsed-Sub-Process.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["rect",{x:14.6,y:20,width:4,height:4,fill:"#fff",stroke:"#000"},[]],["rect",{x:14.6,y:20,width:4,height:4,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:16.6,y1:21,x2:16.6,y2:23,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:15.6,y1:22,x2:17.6,y2:22,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["path",{d:"M 24 20 C 25.2,20 25.3832,19.2668 25.4,19.6 C 25.4168,19.9332 25.4,20.3 25.4,20.7 C 25.4,21.1 25.5,21.4 24,21.4 C 22.5,21.4 22.6,20.6 21.5,20.8 C 20.4,21 20,21.7 20,21.2 C 20,20.7 20,20.2 20,20 C 20,19.8 20.1,19.5 21.6,19.5 C 23.1,19.5 22.8,20 24,20z",fill:"#000000",stroke:"#000"},[]],["path",{d:"M 24 20 C 25.2,20 25.3832,19.2668 25.4,19.6 C 25.4168,19.9332 25.4,20.3 25.4,20.7 C 25.4,21.1 25.5,21.4 24,21.4 C 22.5,21.4 22.6,20.6 21.5,20.8 C 20.4,21 20,21.7 20,21.2 C 20,20.7 20,20.2 20,20 C 20,19.8 20.1,19.5 21.6,19.5 C 23.1,19.5 22.8,20 24,20",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Collapsed-Sub-Process":{metadata:{name:"BPMN - Collapsed-Sub-Process",icon:"Collapsed-Sub-Process.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["rect",{x:16,y:20,width:4,height:4,fill:"#fff",stroke:"#000"},[]],["rect",{x:16,y:20,width:4,height:4,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:18,y1:21,x2:18,y2:23,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:17,y1:22,x2:19,y2:22,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Compensation-Collapsed-Sub-Process":{metadata:{name:"BPMN - Compensation-Collapsed-Sub-Process",icon:"Compensation-Collapsed-Sub-Process.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["rect",{x:17.8,y:19.9,width:4,height:4,fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["line",{x1:19.8,y1:20.9,x2:19.8,y2:22.9,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:18.8,y1:21.9,x2:20.8,y2:21.9,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"13.8,19 11.85,21 13.8,23 ",fill:"#000000","stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"16.2092,18.9716 14.2592,20.9716 16.2092,22.9716 ",fill:"#000000","stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Compensation":{metadata:{name:"BPMN - Compensation",icon:"Compensation.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff",stroke:"#000"},[]],["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["line",{x1:4,y1:24,x2:32,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["line",{x1:36,y1:4,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["line",{x1:0,y1:4,x2:0,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["line",{x1:4,y1:0,x2:32,y2:0,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["polygon",{points:"17.2,19.2 15.25,21.2 17.2,23.2 ",fill:"#000",stroke:"#000"},[]],["polygon",{points:"17.2,19.2 15.25,21.2 17.2,23.2 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]],["polygon",{points:"19.6092,19.1716 17.6592,21.1716 19.6092,23.1716 ",fill:"#000",stroke:"#000"},[]],["polygon",{points:"19.6092,19.1716 17.6592,21.1716 19.6092,23.1716 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000"},[]]]},"BPMN.Data-Object":{metadata:{name:"BPMN - Data-Object",icon:"Data-Object.png",aspectratio:"fixed",textbox:[-3.5,4.5,6.5,10.5]},connection_points:[{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:1,y:0},{x:1.5,y:4},{x:3,y:2},{x:3,y:2.5},{x:3,y:3}],svg:[["polygon",{points:"0,0 8,0 8,4 12,4 12,16 0,16 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"0,0 8,0 8,4 12,4 12,16 0,16 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"8,0 12,4 8,4 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"8,0 12,4 8,4 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Cancel":{metadata:{name:"BPMN - End-Event-Cancel",icon:"End-Event-Cancel.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"4,8 16,20 4,32 8,36 20,24 32,36 36,32 24,20 36,8 32,4 20,16 8,4 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"4,8 16,20 4,32 8,36 20,24 32,36 36,32 24,20 36,8 32,4 20,16 8,4 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Compensation":{metadata:{name:"BPMN - End-Event-Compensation",icon:"End-Event-Compensation.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:19.95856,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:19.95856,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:19.95856,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:19.95856,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"15.95856,4 15.95856,36 -0.0414212,20 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"15.95856,4 15.95856,36 -0.0414212,20 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"32,4 32,36 16,20 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"32,4 32,36 16,20 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Error":{metadata:{name:"BPMN - End-Event-Error",icon:"End-Event-Error.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["rect",{x:0,y:0,width:40,height:40,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"4,36 12,16 32,32 36,4 28,24 8,8 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"4,36 12,16 32,32 36,4 28,24 8,8 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Link":{metadata:{name:"BPMN - End-Event-Link",icon:"End-Event-Link.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Message":{metadata:{name:"BPMN - End-Event-Message",icon:"End-Event-Message.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"#fff",stroke:"#000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event-Multiple":{metadata:{name:"BPMN - End-Event-Multiple",icon:"End-Event-Multiple.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":.01,stroke:"#000000"},[]]]},"BPMN.End-Event-Terminate":{metadata:{name:"BPMN - End-Event-Terminate",icon:"End-Event-Terminate.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.End-Event":{metadata:{name:"BPMN - End-Event",icon:"End-Event.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Gateway-Complex":{metadata:{name:"BPMN - Gateway-Complex",icon:"Gateway-Complex.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"22,10 26,10 25.98996,19.327 32.66196,12.655 35.33396,15.327 28.6452,22.00416 38,22 38,26 28.6612,25.98816 35.3172,32.66016 32.6452,35.31616 25.999,28.66748 26,38 22,38 21.9916,28.65396 15.3332,35.31616 12.6612,32.64416 19.3172,25.98816 10,26 10,22 19.3332,22.00096 12.6612,15.33216 15.3332,12.66632 21.99796,19.327 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"22,10 26,10 25.98996,19.327 32.66196,12.655 35.33396,15.327 28.6452,22.00416 38,22 38,26 28.6612,25.98816 35.3172,32.66016 32.6452,35.31616 25.999,28.66748 26,38 22,38 21.9916,28.65396 15.3332,35.31616 12.6612,32.64416 19.3172,25.98816 10,26 10,22 19.3332,22.00096 12.6612,15.33216 15.3332,12.66632 21.99796,19.327 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Gateway-Exclusive-XOR-Data-Based":{metadata:{name:"BPMN - Gateway-Exclusive-XOR-Data-Based",icon:"Gateway-Exclusive-XOR-Data-Based.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"14.86172,35.92616 21.70636,24.03104 14.86172,12.07836 19.42172,12.07836 23.9914,20.0374 28.56372,12.0732 33.13852,12.07836 26.27988,24.00136 33.13724,35.92616 28.56788,35.92616 23.98912,27.98536 19.41832,35.92692 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"14.86172,35.92616 21.70636,24.03104 14.86172,12.07836 19.42172,12.07836 23.9914,20.0374 28.56372,12.0732 33.13852,12.07836 26.27988,24.00136 33.13724,35.92616 28.56788,35.92616 23.98912,27.98536 19.41832,35.92692 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Gateway-Exclusive-XOR-Event-Based":{metadata:{name:"BPMN - Gateway-Exclusive-XOR-Event-Based",icon:"Gateway-Exclusive-XOR-Event-Based.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:24,cy:24,rx:14,ry:14,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:24,cy:24,rx:14,ry:14,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:24,cy:24,rx:12,ry:12,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:24,cy:24,rx:12,ry:12,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"14,19 20.66668,19 24,14 27.33332,19 34,19 30.66668,24 34,29 27.33332,29 24,34 20.66668,29 14,29 17.33332,24 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"14,19 20.66668,19 24,14 27.33332,19 34,19 30.66668,24 34,29 27.33332,29 24,34 20.66668,29 14,29 17.33332,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"14,19 20.66668,19 24,14 27.33332,19 34,19 30.66668,24 34,29 27.33332,29 24,34 20.66668,29 14,29 17.33332,24 ",fill:"none","fill-opacity":0,"stroke-width":.01,stroke:"#000000"},[]]]},"BPMN.Gateway-Inclusive-OR":{metadata:{name:"BPMN - Gateway-Inclusive-OR",icon:"Gateway-Inclusive-OR.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:24,cy:24,rx:14,ry:14,fill:"#000000",stroke:"#000"},[]],["ellipse",{cx:24,cy:24,rx:14,ry:14,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:24,cy:24,rx:12,ry:12,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:24,cy:24,rx:12,ry:12,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Gateway-Parallel-AND":{metadata:{name:"BPMN - Gateway-Parallel-AND",icon:"Gateway-Parallel-AND.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"22,10 26,10 26,22 38,22 38,26 26,26 26,38 22,38 22,26 10,26 10,22 22,22 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"22,10 26,10 26,22 38,22 38,26 26,26 26,38 22,38 22,26 10,26 10,22 22,22 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Gateway":{metadata:{name:"BPMN - Gateway",icon:"Gateway.png",aspectratio:"fixed"},connection_points:[{x:6,y:0},{x:12,y:6},{x:6,y:12},{x:0,y:6},{x:9,y:3},{x:9,y:9},{x:3,y:9},{x:3,y:3}],svg:[["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"24,0 48,24 24,48 0,24 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Group":{metadata:{name:"BPMN - Group",icon:"Group.png",aspectratio:"free"},connection_points:[],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0",fill:"none","fill-opacity":0,"stroke-width":1,"stroke-dasharray":"1 0.4 0.2 0.4",stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Cancel":{metadata:{name:"BPMN - Intermediate-Event-Cancel",icon:"Intermediate-Event-Cancel.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"4,8 16,20 4,32 8,36 20,24 32,36 36,32 24,20 36,8 32,4 20,16 8,4 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"4,8 16,20 4,32 8,36 20,24 32,36 36,32 24,20 36,8 32,4 20,16 8,4 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Compensation":{metadata:{name:"BPMN - Intermediate-Event-Compensation",icon:"Intermediate-Event-Compensation.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:19.95856,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:19.95856,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:19.95856,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:19.95856,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"15.95856,4 15.95856,36 -0.0414212,20 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"15.95856,4 15.95856,36 -0.0414212,20 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"32,4 32,36 16,20 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"32,4 32,36 16,20 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Error":{metadata:{name:"BPMN - Intermediate-Event-Error",icon:"Intermediate-Event-Error.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["rect",{x:0,y:0,width:40,height:40,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"4,36 12,16 32,32 36,4 28,24 8,8 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"4,36 12,16 32,32 36,4 28,24 8,8 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Link":{metadata:{name:"BPMN - Intermediate-Event-Link",icon:"Intermediate-Event-Link.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Message":{metadata:{name:"BPMN - Intermediate-Event-Message",icon:"Intermediate-Event-Message.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"#fff",stroke:"#000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Multiple":{metadata:{name:"BPMN - Intermediate-Event-Multiple",icon:"Intermediate-Event-Multiple.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":.01,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Rule":{metadata:{name:"BPMN - Intermediate-Event-Rule",icon:"Intermediate-Event-Rule.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:8,y:4,width:24,height:32,fill:"#fff",stroke:"#000"},[]],["rect",{x:8,y:4,width:24,height:32,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:8,x2:28,y2:8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:16,x2:28,y2:16,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:24,x2:28,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:32,x2:28,y2:32,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event-Timer":{metadata:{name:"BPMN - Intermediate-Event-Timer",icon:"Intermediate-Event-Timer.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:4,x2:20,y2:8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:32,x2:20,y2:36,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:20,x2:8,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:32,y1:20,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14,y1:30,x2:11.7,y2:33.7,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:10,y1:26,x2:6.3,y2:28.3,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:10,y1:14,x2:6.35,y2:11.65,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14,y1:10,x2:11.75,y2:6.35,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:26,y1:10,x2:28.26884,y2:6.25,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:30,y1:14,x2:33.76884,y2:11.75,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:30,y1:26,x2:33.76884,y2:28.28944,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:26,y1:30,x2:28.26884,y2:33.78944,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:20,x2:28,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:20,x2:22.46884,y2:7.4748,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Intermediate-Event":{metadata:{name:"BPMN - Intermediate-Event",icon:"Intermediate-Event.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:24,ry:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Looping-Collapsed-Sub-Process":{metadata:{name:"BPMN - Looping-Collapsed-Sub-Process",icon:"Looping-Collapsed-Sub-Process.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["rect",{x:20,y:20,width:4,height:4,fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["line",{x1:22,y1:21,x2:22,y2:23,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:21,y1:22,x2:23,y2:22,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["path",{d:"M 14.8 23 C 12,21.6 13,17.6 15.8,17.6 C 18.6,17.6 20,21.2 17,23.2",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14.7,y1:23,x2:14.5,y2:21.6,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14.9,y1:23,x2:13.3,y2:23,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Multiple-Instance-Collapsed-Sub-Process":{metadata:{name:"BPMN - Multiple-Instance-Collapsed-Sub-Process",icon:"Multiple-Instance-Collapsed-Sub-Process.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff",stroke:"#000"},[]],["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:24,x2:32,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:4,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:0,y1:4,x2:0,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:0,x2:32,y2:0,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:19,y:20,width:4,height:4,fill:"#fff",stroke:"#000"},[]],["rect",{x:19,y:20,width:4,height:4,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:21,y1:21,x2:21,y2:23,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:22,x2:22,y2:22,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:14,y:19.2,width:.9,height:3.8,fill:"#000000",stroke:"#000"},[]],["rect",{x:14,y:19.2,width:.9,height:3.8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:16,y:19.18,width:.93,height:3.8,fill:"#000000",stroke:"#000"},[]],["rect",{x:16,y:19.18,width:.93,height:3.8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Multiple-Instance-Task":{metadata:{name:"BPMN - Multiple-Instance-Task",icon:"Multiple-Instance-Task.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff","stroke-width":1,stroke:"#000000"},[]],["rect",{x:16.6,y:19.02,width:.9,height:3.8,fill:"#000000","stroke-width":1,stroke:"#000000"},[]],["rect",{x:18.6,y:19,width:.93,height:3.8,fill:"#000000","stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Start-Event-Link":{metadata:{name:"BPMN - Start-Event-Link",icon:"Start-Event-Link.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"0,12 28,12 28,4 40,20 28,36 28,28 0,28 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Start-Event-Message":{metadata:{name:"BPMN - Start-Event-Message",icon:"Start-Event-Message.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"#fff",stroke:"#000"},[]],["rect",{x:4,y:8,width:32,height:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:8,x2:20,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Start-Event-Multiple":{metadata:{name:"BPMN - Start-Event-Multiple",icon:"Start-Event-Multiple.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"#000000",stroke:"#000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["polygon",{points:"2,9.90384 14,9.90384 20,-0.0961544 26,9.90384 38,9.90384 32,19.90384 38,29.90384 26,29.90384 20,39.90384 14,29.90384 2,29.90384 8,19.90384 ",fill:"none","fill-opacity":0,"stroke-width":.01,stroke:"#000000"},[]]]},"BPMN.Start-Event-Rule":{metadata:{name:"BPMN - Start-Event-Rule",icon:"Start-Event-Rule.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["rect",{x:8,y:4,width:24,height:32,fill:"#fff",stroke:"#000"},[]],["rect",{x:8,y:4,width:24,height:32,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:8,x2:28,y2:8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:16,x2:28,y2:16,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:24,x2:28,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:12,y1:32,x2:28,y2:32,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Start-Event-Timer":{metadata:{name:"BPMN - Start-Event-Timer",icon:"Start-Event-Timer.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#ffffff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"#ffffff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:16,ry:16,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:4,x2:20,y2:8,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:32,x2:20,y2:36,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:20,x2:8,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:32,y1:20,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14,y1:30,x2:11.7,y2:33.7,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:10,y1:26,x2:6.3,y2:28.3,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:10,y1:14,x2:6.35,y2:11.65,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:14,y1:10,x2:11.75,y2:6.35,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:26,y1:10,x2:28.26884,y2:6.25,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:30,y1:14,x2:33.76884,y2:11.75,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:30,y1:26,x2:33.76884,y2:28.28944,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:26,y1:30,x2:28.26884,y2:33.78944,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:20,x2:28,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:20,y1:20,x2:22.46884,y2:7.4748,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Start-Event":{metadata:{name:"BPMN - Start-Event",icon:"Start-Event.png",aspectratio:"fixed"},connection_points:[{x:0,y:0},{x:10,y:0},{x:10,y:10},{x:0,y:10},{x:5,y:12},{x:5,y:-2},{x:-2,y:5},{x:12,y:5}],svg:[["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"#fff",stroke:"#000"},[]],["ellipse",{cx:20,cy:20,rx:28,ry:28,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Task":{metadata:{name:"BPMN - Task",icon:"Task.png",aspectratio:"free",textbox:[.25,.25,8.75,5.75]},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff",stroke:"#000"},[]],["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:24,x2:32,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:4,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:0,y1:4,x2:0,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:0,x2:32,y2:0,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Text-Annotation":{metadata:{name:"BPMN - Text-Annotation",icon:"Text-Annotation.png",aspectratio:"fixed",textbox:[0,0,6,3]},connection_points:[{x:6,y:1.5},{x:0,y:1.5}],svg:[["line",{x1:24,y1:0,x2:24,y2:12,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#ffffff"},[]],["line",{x1:0,y1:0,x2:0,y2:12,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:0,y1:12,x2:6,y2:12,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:0,y1:0,x2:6,y2:0,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"BPMN.Transaction":{metadata:{name:"BPMN - Transaction",icon:"Transaction.png",aspectratio:"free"},connection_points:[{x:1,y:6},{x:8,y:6},{x:4.5,y:6},{x:9,y:1},{x:9,y:5},{x:9,y:3},{x:0,y:1},{x:0,y:5},{x:0,y:3},{x:1,y:0},{x:8,y:0},{x:4.5,y:0}],svg:[["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0z",fill:"#fff",stroke:"#000"},[]],["path",{d:"M 4 0 C 8,0 28,0 32,0 C 36,0 36,0 36,4 C 36,8 36,16 36,20 C 36,24 36,24 32,24 C 28,24 8,24 4,24 C 0,24 0,24 0,20 C 0,16 0,8 0,4 C 0,0 0,0 4,0",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["path",{d:"M 4.7 0.7 C 8.7,0.7 27.1004,0.7 31.1004,0.7 C 35.1004,0.7 35.1004,0.7 35.1004,4.7 C 35.1004,8.7 35.1004,15.1 35.1004,19.1 C 35.1004,23.1 35.1004,23.1 31.1004,23.1 C 27.1004,23.1 8.8748,23.1 4.8748,23.1 C 0.874788,23.1 0.874788,23.1 0.874788,19.1 C 0.874788,15.1 0.9,8.9 0.9,4.9 C 0.9,0.9 0.7,0.7 4.7,0.7z",fill:"#fff",stroke:"#000"},[]],["path",{d:"M 4.7 0.7 C 8.7,0.7 27.1004,0.7 31.1004,0.7 C 35.1004,0.7 35.1004,0.7 35.1004,4.7 C 35.1004,8.7 35.1004,15.1 35.1004,19.1 C 35.1004,23.1 35.1004,23.1 31.1004,23.1 C 27.1004,23.1 8.8748,23.1 4.8748,23.1 C 0.874788,23.1 0.874788,23.1 0.874788,19.1 C 0.874788,15.1 0.9,8.9 0.9,4.9 C 0.9,0.9 0.7,0.7 4.7,0.7",fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:24,x2:32,y2:24,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:36,y1:4,x2:36,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:0,y1:4,x2:0,y2:20,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]],["line",{x1:4,y1:0,x2:32,y2:0,fill:"none","fill-opacity":0,"stroke-width":1,stroke:"#000000"},[]]]},"Flowchart.collate":{metadata:{name:"Flowchart - Collate",icon:"collate.png"},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:2.5,y:2.5},{x:5,y:5},{x:2.5,y:7.5},{x:0,y:10},{x:7.5,y:2.5},{x:7.5,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:5,y:5}],svg:[["polygon",{points:"0,0 40,0 20,20",fill:"#fff",stroke:"#000"},[]],["polygon",{points:"0,40 40,40 20,20",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.datasource":{metadata:{name:"Flowchart - Data Source",icon:"datasource.png",textbox:[.5,.5,10,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:2.5},{x:0,y:5},{x:0,y:7.5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:5,y:5}],svg:[["line",{x1:0,y1:0,x2:0,y2:40,stroke:"#000"},[]],["line",{x1:0,y1:0,x2:40,y2:0,stroke:"#000"},[]],["line",{x1:0,y1:40,x2:40,y2:40,stroke:"#000"},[]]]},"Flowchart.delay":{metadata:{name:"Flowchart - Delay",icon:"delay.png",textbox:[0,0,4,4]},connection_points:[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:5.4142,y:.5858},{x:6,y:2},{x:5.4142,y:3.4142},{x:4,y:4},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:3,y:2}],svg:[["path",{d:"m 0,0 h 16 c 4.41828,0 8,3.58172 8,8 s -3.58172,8 -8,8                  h -16 v -16 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.display":{metadata:{name:"Flowchart - Display",icon:"display.png",textbox:[0,0,10,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:-1,y:2.5},{x:-2,y:5},{x:-1,y:7.5},{x:0,y:10},{x:11.5625,y:2.5},{x:12,y:5},{x:11.5625,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:7,y:5}],svg:[["path",{d:"M 0,0 h 40 c 6,8 8,12 8,20 s -2,12 -8,20                  h -40 l -8,-20 l 8,-20 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.document":{metadata:{name:"Flowchart - Document",icon:"document.png",textbox:[0,0,10,5]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:1.5},{x:0,y:3},{x:0,y:4.5},{x:0,y:6},{x:10,y:1.5},{x:10,y:3},{x:10,y:4.5},{x:10,y:6},{x:2.5,y:6.75},{x:5,y:6},{x:7.5,y:5.25},{x:5,y:3.5}],svg:[["path",{d:"M 0,0 h 40 v 24 c -8,-4 -12,-4 -20,0 s -12,4 -20,0 v -24 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.extract":{metadata:{name:"Flowchart - Extract",icon:"extract.png",textbox:[2.5,5,7.5,10]},connection_points:[{x:0,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:10,y:10},{x:1.25,y:7.5},{x:2.5,y:5},{x:3.75,y:2.5},{x:5,y:0},{x:8.75,y:7.5},{x:7.5,y:5},{x:6.25,y:2.5},{x:5,y:5}],svg:[["polygon",{points:"0,40 40,40 20,0",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.intstorage":{metadata:{name:"Flowchart - Internal Storage",icon:"intstorage.png",textbox:[1,1,10,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:2.5},{x:0,y:5},{x:0,y:7.5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:7,y:5}],svg:[["rect",{x:0,y:0,width:40,height:40,fill:"#fff",stroke:"#000"},[]],["line",{x1:4,y1:0,x2:4,y2:40,stroke:"#000"},[]],["line",{x1:0,y1:4,x2:40,y2:4,stroke:"#000"},[]]]},"Flowchart.magdisk":{metadata:{name:"Flowchart - Magnetic Disk",icon:"magdisk.png",textbox:[0,4,10,10]},connection_points:[{x:0,y:2},{x:2.5,y:.4375},{x:5,y:0},{x:7.5,y:.4375},{x:10,y:0},{x:0,y:2.5},{x:0,y:7.5},{x:0,y:5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:11.5625},{x:5,y:12},{x:7.5,y:11.5625},{x:5,y:6}],svg:[["path",{d:"M 0,8 c 8,-6 12,-8 20,-8 s 12,2 20,8 v 32                  c -8,6 -12,8 -20,8 s -12,-2 -20,-8 v -32 z                  M 0,8 c 8,6 12,8 20,8 s 12,-2 20,-8",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.magdrum":{metadata:{name:"Flowchart - Magnetic Drum",icon:"magdrum.png",textbox:[0,0,8,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:-1.5625,y:2.5},{x:-2,y:5},{x:-1.5625,y:7.5},{x:0,y:10},{x:11.5625,y:2.5},{x:12,y:5},{x:11.5625,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:7,y:5}],svg:[["path",{d:"M 0,0 h 40 c 6,8 8,12 8,20 s -2,12 -8,20                  h -40 c -6,-8 -8,-12, -8,-20 s 2,-12 8,-20 z                  M 40,0 c -6,8 -8,12 -8,20 s 2,12 8,20",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.magtape":{metadata:{name:"Flowchart - Magnetic Tape",icon:"magtape.png",textbox:[1.4645,1.4645,8.5355,8.5355]},connection_points:[{x:0,y:5},{x:1.4645,y:1.4645},{x:5,y:0},{x:8.5355,y:1.4645},{x:10,y:5},{x:8.5355,y:8.5355},{x:5,y:10},{x:1.4645,y:8.5355},{x:7.5,y:10},{x:10,y:10},{x:5,y:6}],svg:[["circle",{cx:20,cy:20,r:20,fill:"#fff",stroke:"#000"},[]],["line",{x1:20,y1:40,x2:40,y2:40,stroke:"#000"},[]]]},"Flowchart.manualinput":{metadata:{name:"Flowchart - Manual Input",icon:"manualinput.png",textbox:[0,4,10,10]},connection_points:[{x:0,y:4},{x:2.5,y:3},{x:5,y:2},{x:7.5,y:1},{x:10,y:0},{x:0,y:5.5},{x:0,y:7},{x:0,y:8.5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:5,y:5}],svg:[["path",{d:"M 0,16 l 40,-16 v 40 h -40 v -24 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.manualop":{metadata:{name:"Flowchart - Manual Operation",icon:"manualop.png",textbox:[2,0,8,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:.5,y:2.5},{x:1,y:5},{x:1.5,y:7.5},{x:2,y:10},{x:9.5,y:2.5},{x:9,y:5},{x:8.5,y:7.5},{x:8,y:10},{x:3.5,y:10},{x:5,y:10},{x:6.5,y:10},{x:5,y:5}],svg:[["path",{d:"M 0,0 h 40 l -8,40 h -24 l -8,-40 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.merge":{metadata:{name:"Flowchart - Merge",icon:"merge.png",textbox:[2.5,0,7.5,5]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:1.25,y:2.5},{x:2.5,y:5},{x:3.75,y:7.5},{x:5,y:10},{x:8.75,y:2.5},{x:7.5,y:5},{x:6.25,y:7.5},{x:5,y:5}],svg:[["polygon",{points:"0,0 40,0 20,40",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.offlinestore":{metadata:{name:"Flowchart - Offline Storage",icon:"offlinestore.png",textbox:[2.5,0,7.5,5]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:1.25,y:2.5},{x:2.5,y:5},{x:3.75,y:7.5},{x:5,y:10},{x:8.75,y:2.5},{x:7.5,y:5},{x:6.25,y:7.5},{x:5,y:5}],svg:[["polygon",{points:"0,0 40,0 20,40",fill:"#fff",stroke:"#000"},[]],["line",{x1:16,y1:32,x2:24,y2:32,stroke:"#000"},[]]]},"Flowchart.offpageconn":{metadata:{name:"Flowchart - Off Page Connector",icon:"offpageconn.png",textbox:[0,0,10,8]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:2},{x:0,y:4},{x:0,y:6},{x:0,y:8},{x:10,y:2},{x:10,y:4},{x:10,y:6},{x:10,y:8},{x:2.5,y:9},{x:5,y:10},{x:7.5,y:9},{x:5,y:5}],svg:[["path",{d:"M 0,0 h 40 v 32 l -20,8 l -20,-8 v -32 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.or":{metadata:{name:"Flowchart - Or",icon:"or.png"},connection_points:[{x:0,y:5},{x:1.4645,y:1.4645},{x:5,y:0},{x:8.5355,y:1.4645},{x:10,y:5},{x:8.5355,y:8.5355},{x:5,y:10},{x:1.4645,y:8.5355},{x:5,y:6}],svg:[["circle",{cx:20,cy:20,r:20,fill:"#fff",stroke:"#000"},[]],["line",{x1:20,y1:0,x2:20,y2:40,stroke:"#000"},[]],["line",{x1:0,y1:20,x2:40,y2:20,stroke:"#000"},[]]]},"Flowchart.predefdproc":{metadata:{name:"Flowchart - Predefined Process",icon:"predefdproc.png",textbox:[1,0,9,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:2.5},{x:0,y:5},{x:0,y:7.5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:5,y:5}],svg:[["rect",{x:0,y:0,width:40,height:40,fill:"#fff",stroke:"#000"},[]],["line",{x1:4,y1:0,x2:4,y2:40,stroke:"#000"},[]],["line",{x1:36,y1:0,x2:36,y2:40,stroke:"#000"},[]]]},"Flowchart.preparation":{metadata:{name:"Flowchart - Preparation",icon:"preparation.png",textbox:[0,0,10,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:-1,y:2.5},{x:-2,y:5},{x:-1,y:7.5},{x:0,y:10},{x:11,y:2.5},{x:12,y:5},{x:11,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:7,y:5}],svg:[["path",{d:"M 0,0 h 40 l 8,20 l -8,20 h -40 l -8,-20 l 8,-20 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.punchedcard":{metadata:{name:"Flowchart - Punched Card",icon:"punchedcard.png",textbox:[.5,.5,10,10]},connection_points:[{x:1,y:0},{x:0,y:1},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:2.5},{x:0,y:5},{x:0,y:7.5},{x:0,y:10},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:5,y:5}],svg:[["polygon",{points:"4,0 40,0 40,40 0,40 0,4",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.punchedtape":{metadata:{name:"Flowchart - Punched Tape",icon:"punchedtape.png",textbox:[0,1,10,5]},connection_points:[{x:0,y:0},{x:2.5,y:.75},{x:5,y:0},{x:7.5,y:-.75},{x:10,y:0},{x:0,y:1.5},{x:0,y:3},{x:0,y:4.5},{x:0,y:6},{x:10,y:1.5},{x:10,y:3},{x:10,y:4.5},{x:10,y:6},{x:2.5,y:6.75},{x:5,y:6},{x:7.5,y:5.25},{x:5,y:4}],svg:[["path",{d:"M 0,0 c 8,4 12,4 20,0 s 12,-4 20,0 v 24                  c -8,-4 -12,-4 -20,0 s -12,4 -20,0 v -24 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.sort":{metadata:{name:"Flowchart - Sort",icon:"sort.png"},connection_points:[{x:5,y:0},{x:3.75,y:1.25},{x:2.5,y:2.5},{x:1.25,y:3.75},{x:0,y:5},{x:1.25,y:6.25},{x:2.5,y:7.5},{x:3.75,y:8.75},{x:5,y:10},{x:6.25,y:1.25},{x:7.5,y:2.5},{x:8.75,y:3.75},{x:10,y:5},{x:8.75,y:6.25},{x:7.5,y:7.5},{x:6.25,y:8.75},{x:5,y:5}],svg:[["polygon",{points:"20,0 40,20 20,40 0,20",fill:"#fff",stroke:"#000"},[]],["line",{x1:0,y1:20,x2:40,y2:20,stroke:"#000"},[]]]},"Flowchart.sumjunction":{metadata:{name:"Flowchart - Summing Junction",icon:"sumjunction.png"},connection_points:[{x:0,y:5},{x:1.4645,y:1.4645},{x:5,y:0},{x:8.5355,y:1.4645},{x:10,y:5},{x:8.5355,y:8.5355},{x:5,y:10},{x:1.4645,y:8.5355},{x:5,y:5}],svg:[["circle",{cx:20,cy:20,r:20,fill:"#fff",stroke:"#000"},[]],["line",{x1:5.858,y1:5.858,x2:34.142,y2:34.142,stroke:"#000"},[]],["line",{x1:5.858,y1:34.142,x2:34.142,y2:5.858,stroke:"#000"},[]]]},"Flowchart.terminal":{metadata:{name:"Flowchart - Terminal",icon:"terminal.png",textbox:[2,0,10,4]},connection_points:[{x:2,y:0},{x:4,y:0},{x:6,y:0},{x:8,y:0},{x:10,y:0},{x:.5858,y:.5858},{x:0,y:2},{x:.5858,y:3.4142},{x:2,y:4},{x:11.4142,y:.5858},{x:12,y:2},{x:11.4142,y:3.4142},{x:10,y:4},{x:4,y:4},{x:6,y:4},{x:8,y:4},{x:6,y:2}],svg:[["path",{d:"M 8,0 h 32 c 4.41828,0 8,3.58172 8,8 s -3.58172,8 -8,8                  h -32 c -4.41828,0 -8,-3.58172 -8,-8 s 3.58172,-8 8,-8 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.transaction":{metadata:{name:"Flowchart - Transaction File",icon:"transaction.png",textbox:[0,0,8,10]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:-1.5625,y:2.5},{x:-2,y:5},{x:-1.5625,y:7.5},{x:0,y:10},{x:8.4375,y:2.5},{x:8,y:5},{x:8.4375,y:7.5},{x:10,y:10},{x:2.5,y:10},{x:5,y:10},{x:7.5,y:10},{x:7,y:5}],svg:[["path",{d:"M 0,0 h 40 c -6,8 -8,12 -8,20 s 2,12 8,20                  h -40 c -6,-8 -8,-12, -8,-20 s 2,-12 8,-20 z",fill:"#fff",stroke:"#000"},[]]]},"Flowchart.transmittape":{metadata:{name:"Flowchart - Transmittal Tape",icon:"transmittape.png",textbox:[0,0,10,6]},connection_points:[{x:0,y:0},{x:2.5,y:0},{x:5,y:0},{x:7.5,y:0},{x:10,y:0},{x:0,y:1.5},{x:0,y:3},{x:0,y:4.5},{x:0,y:6},{x:10,y:2.5},{x:10,y:5},{x:10,y:7.5},{x:10,y:10},{x:2.5,y:7.5625},{x:5,y:8},{x:7.5,y:8.4375},{x:5,y:5}],svg:[["path",{d:"M 0,0 h 40 v 40 c -8,-6 -12,-8 -20,-8 s -12,-2 -20,-8 v -24 z",fill:"#fff",stroke:"#000"},[]]]}};var n=function(t,e){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(e.hasOwnProperty(r))t[r]=e[r]};return n(t,e)};function f(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var r=function(){function t(t,e,r){this.graph=t;this.id=e;this.attrs=r}t.prototype.attr=function(t,e){var r=this.attrs[t];if(r!==undefined&&r!==null){return r}else{var n=this.getAttributeDefaultValue(t);if(n!==undefined){return n}else{return e}}};t.prototype.setAttr=function(t,e){this.attrs[t]=e;return this};t.prototype.getAttributeDefaultValue=function(t){return undefined};return t}();var s=function(s){f(t,s);function t(t,e,r,n,i,o){if(o===void 0){o=[]}var a=s.call(this,t,e,r)||this;a.start=n;a.end=i;a.points=o;return a}t.prototype.getAttributeDefaultValue=function(t){return this.graph.getEdgeAttributeDefaultValue(t)};t.prototype.getBoundingBox=function(){var t=new l(undefined,undefined,undefined,undefined,this.graph);var e=this.start.getPosition();var r=this.end.getPosition();if(e&&r){t.addPoint(e);t.addPoint(r);for(var n=0,i=this.points;n<i.length;n++){var o=i[n];t.addPoint(o)}}return t};t.prototype.getArrowHead=function(){return this.attr("arrowHead","normal")};t.prototype.getArrowTail=function(){return this.attr("arrowTail","none")};return t}(r);var u=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function c(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function h(t,e){return e={exports:{}},t(e,e.exports),e.exports}var p=h(function(t){function e(t,e){Object.defineProperties(this,{x:{value:t,writable:false,enumerable:true,configurable:false},y:{value:e,writable:false,enumerable:true,configurable:false}})}e.prototype.clone=function(){return new this.constructor(this.x,this.y)};e.prototype.add=function(t){return new this.constructor(this.x+t.x,this.y+t.y)};e.prototype.subtract=function(t){return new this.constructor(this.x-t.x,this.y-t.y)};e.prototype.multiply=function(t){return new this.constructor(this.x*t,this.y*t)};e.prototype.divide=function(t){return new this.constructor(this.x/t,this.y/t)};e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y};e.prototype.lerp=function(t,e){var r=1-e;return new this.constructor(this.x*r+t.x*e,this.y*r+t.y*e)};e.prototype.distanceFrom=function(t){var e=this.x-t.x;var r=this.y-t.y;return Math.sqrt(e*e+r*r)};e.prototype.min=function(t){return new this.constructor(Math.min(this.x,t.x),Math.min(this.y,t.y))};e.prototype.max=function(t){return new this.constructor(Math.max(this.x,t.x),Math.max(this.y,t.y))};e.prototype.transform=function(t){return new this.constructor(t.a*this.x+t.c*this.y+t.e,t.b*this.x+t.d*this.y+t.f)};e.prototype.toString=function(){return"point("+this.x+","+this.y+")"};{t.exports=e}});var x=h(function(t){function r(t,e){Object.defineProperties(this,{x:{value:t,writable:false,enumerable:true,configurable:false},y:{value:e,writable:false,enumerable:true,configurable:false}})}r.fromPoints=function(t,e){return new r(e.x-t.x,e.y-t.y)};r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};r.prototype.magnitude=function(){return this.x*this.x+this.y*this.y};r.prototype.dot=function(t){return this.x*t.x+this.y*t.y};r.prototype.cross=function(t){return this.x*t.y-this.y*t.x};r.prototype.determinant=function(t){return this.x*t.y-this.y*t.x};r.prototype.unit=function(){return this.divide(this.length())};r.prototype.add=function(t){return new this.constructor(this.x+t.x,this.y+t.y)};r.prototype.subtract=function(t){return new this.constructor(this.x-t.x,this.y-t.y)};r.prototype.multiply=function(t){return new this.constructor(this.x*t,this.y*t)};r.prototype.divide=function(t){return new this.constructor(this.x/t,this.y/t)};r.prototype.angleBetween=function(t){var e=this.dot(t)/(this.length()*t.length());e=Math.max(-1,Math.min(e,1));var r=Math.acos(e);return this.cross(t)<0?-r:r};r.prototype.perp=function(){return new this.constructor(-this.y,this.x)};r.prototype.perpendicular=function(t){return this.subtract(this.project(t))};r.prototype.project=function(t){var e=this.dot(t)/t.dot(t);return t.multiply(e)};r.prototype.transform=function(t){return new this.constructor(t.a*this.x+t.c*this.y,t.b*this.x+t.d*this.y)};r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y};r.prototype.toString=function(){return"vector("+this.x+","+this.y+")"};{t.exports=r}});var d=h(function(t){function e(t,e,r,n,i,o){Object.defineProperties(this,{a:{value:t!==undefined?t:1,writable:false,enumerable:true,configurable:false},b:{value:e!==undefined?e:0,writable:false,enumerable:true,configurable:false},c:{value:r!==undefined?r:0,writable:false,enumerable:true,configurable:false},d:{value:n!==undefined?n:1,writable:false,enumerable:true,configurable:false},e:{value:i!==undefined?i:0,writable:false,enumerable:true,configurable:false},f:{value:o!==undefined?o:0,writable:false,enumerable:true,configurable:false}})}e.IDENTITY=new e(1,0,0,1,0,0);e.IDENTITY.isIdentity=function(){return true};e.prototype.multiply=function(t){if(this.isIdentity()){return t}if(t.isIdentity()){return this}return new this.constructor(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)};e.prototype.inverse=function(){if(this.isIdentity()){return this}var t=this.a*this.d-this.b*this.c;if(t===0){throw"Matrix is not invertible"}var e=1/t;var r=this.f*this.c-this.e*this.d;var n=this.e*this.b-this.f*this.a;return new this.constructor(this.d*e,-this.b*e,-this.c*e,this.a*e,r*e,n*e)};e.prototype.translate=function(t,e){return new this.constructor(this.a,this.b,this.c,this.d,this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f)};e.prototype.scale=function(t){return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.e,this.f)};e.prototype.scaleAt=function(t,e){var r=e.x-t*e.x;var n=e.y-t*e.y;return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.a*r+this.c*n+this.e,this.b*r+this.d*n+this.f)};e.prototype.scaleNonUniform=function(t,e){return new this.constructor(this.a*t,this.b*t,this.c*e,this.d*e,this.e,this.f)};e.prototype.scaleNonUniformAt=function(t,e,r){var n=r.x-t*r.x;var i=r.y-e*r.y;return new this.constructor(this.a*t,this.b*t,this.c*e,this.d*e,this.a*n+this.c*i+this.e,this.b*n+this.d*i+this.f)};e.prototype.rotate=function(t){var e=Math.cos(t);var r=Math.sin(t);return new this.constructor(this.a*e+this.c*r,this.b*e+this.d*r,this.a*-r+this.c*e,this.b*-r+this.d*e,this.e,this.f)};e.prototype.rotateAt=function(t,e){var r=Math.cos(t);var n=Math.sin(t);var i=-e.x+e.x*r-e.y*n;var o=-e.y+e.y*r+e.x*n;return new this.constructor(this.a*r+this.c*n,this.b*r+this.d*n,this.a*-n+this.c*r,this.b*-n+this.d*r,this.a*i+this.c*o+this.e,this.b*i+this.d*o+this.f)};e.prototype.rotateFromVector=function(t){var e=t.unit();var r=e.x;var n=e.y;return new this.constructor(this.a*r+this.c*n,this.b*r+this.d*n,this.a*-n+this.c*r,this.b*-n+this.d*r,this.e,this.f)};e.prototype.flipX=function(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)};e.prototype.flipY=function(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)};e.prototype.skewX=function(t){var e=Math.tan(t);return new this.constructor(this.a,this.b,this.a*e+this.c,this.b*e+this.d,this.e,this.f)};e.prototype.skewY=function(t){var e=Math.tan(t);return new this.constructor(this.a+this.c*e,this.b+this.d*e,this.c,this.d,this.e,this.f)};e.prototype.isIdentity=function(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.e===0&&this.f===0};e.prototype.isInvertible=function(){return this.a*this.d-this.b*this.c!==0};e.prototype.getScale=function(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}};e.prototype.getDecomposition=function(){var t=(this.a+this.d)*.5;var e=(this.a-this.d)*.5;var r=(this.b+this.c)*.5;var n=(this.b-this.c)*.5;var i=Math.sqrt(t*t+n*n);var o=Math.sqrt(e*e+r*r);var a=i+o;var s=i-o;var l=Math.atan2(r,e);var y=Math.atan2(n,t);var f=(y-l)*.5;var u=(y+l)*.5;return{translation:new this.constructor(1,0,0,1,this.e,this.f),rotation:this.constructor.IDENTITY.rotate(u),scale:new this.constructor(a,0,0,s,0,0),rotation0:this.constructor.IDENTITY.rotate(f)}};e.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f};e.prototype.toString=function(){return"matrix("+[this.a,this.b,this.c,this.d,this.e,this.f].join(",")+")"};{t.exports=e}});var v=p;var g=x;var w=d;var m={Point2D:v,Vector2D:g,Matrix2D:w};var k=h(function(t){d.TOLERANCE=1e-6;d.ACCURACY=15;d.interpolate=function(t,e,r,n,i){if(t.constructor!==Array||e.constructor!==Array)throw new Error("Polynomial.interpolate: xs and ys must be arrays");if(isNaN(r)||isNaN(n)||isNaN(i))throw new Error("Polynomial.interpolate: n, offset, and x must be numbers");var o=0;var a=0;var s=new Array(r);var l=new Array(r);var y=0;var f=Math.abs(i-t[n]);for(var u=0;u<r;u++){var c=Math.abs(i-t[n+u]);if(c<f){y=u;f=c}s[u]=l[u]=e[n+u]}o=e[n+y];y--;for(var h=1;h<r;h++){for(var u=0;u<r-h;u++){var p=t[n+u]-i;var x=t[n+u+h]-i;var d=s[u+1]-l[u];var v=p-x;if(v==0){break}v=d/v;l[u]=x*v;s[u]=p*v}a=2*(y+1)<r-h?s[y+1]:l[y--];o+=a}return{y:o,dy:a}};function d(){this.init(arguments)}d.prototype.init=function(t){this.coefs=new Array;for(var e=t.length-1;e>=0;e--)this.coefs.push(t[e]);this._variable="t";this._s=0};d.prototype.eval=function(t){if(isNaN(t))throw new Error("Polynomial.eval: parameter must be a number");var e=0;for(var r=this.coefs.length-1;r>=0;r--)e=e*t+this.coefs[r];return e};d.prototype.add=function(t){var e=new d;var r=this.getDegree();var n=t.getDegree();var i=Math.max(r,n);for(var o=0;o<=i;o++){var a=o<=r?this.coefs[o]:0;var s=o<=n?t.coefs[o]:0;e.coefs[o]=a+s}return e};d.prototype.multiply=function(t){var e=new d;for(var r=0;r<=this.getDegree()+t.getDegree();r++)e.coefs.push(0);for(var r=0;r<=this.getDegree();r++)for(var n=0;n<=t.getDegree();n++)e.coefs[r+n]+=this.coefs[r]*t.coefs[n];return e};d.prototype.divide_scalar=function(t){for(var e=0;e<this.coefs.length;e++)this.coefs[e]/=t};d.prototype.simplify=function(){var t=1e-15;for(var e=this.getDegree();e>=0;e--){if(Math.abs(this.coefs[e])<=t)this.coefs.pop();else break}};d.prototype.bisection=function(t,e){var r=this.eval(t);var n=this.eval(e);var i;if(Math.abs(r)<=d.TOLERANCE)i=t;else if(Math.abs(n)<=d.TOLERANCE)i=e;else if(r*n<=0){var o=Math.log(e-t);var a=Math.LN10*d.ACCURACY;var s=Math.ceil((o+a)/Math.LN2);for(var l=0;l<s;l++){i=.5*(t+e);var y=this.eval(i);if(Math.abs(y)<=d.TOLERANCE){break}if(y*r<0){e=i;n=y}else{t=i;r=y}}}return i};d.prototype.toString=function(){var t=new Array;var e=new Array;for(var r=this.coefs.length-1;r>=0;r--){var n=Math.round(this.coefs[r]*1e3)/1e3;if(n!=0){var i=n<0?" - ":" + ";n=Math.abs(n);if(r>0)if(n==1)n=this._variable;else n+=this._variable;if(r>1)n+="^"+r;e.push(i);t.push(n)}}e[0]=e[0]==" + "?"":"-";var o="";for(var r=0;r<t.length;r++)o+=e[r]+t[r];return o};d.prototype.trapezoid=function(t,e,r){if(isNaN(t)||isNaN(e)||isNaN(r))throw new Error("Polynomial.trapezoid: parameters must be numbers");var n=e-t;if(r==1){var i=this.eval(t);var o=this.eval(e);this._s=.5*n*(i+o)}else{var a=1<<r-2;var s=n/a;var l=t+.5*s;var y=0;for(var f=0;f<a;f++){y+=this.eval(l);l+=s}this._s=.5*(this._s+n*y/a)}if(isNaN(this._s))throw new Error("Polynomial.trapezoid: this._s is NaN");return this._s};d.prototype.simpson=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Polynomial.simpson: parameters must be numbers");var r=e-t;var n=.5*r*(this.eval(t)+this.eval(e));var i=n;var o=4*n/3;var a=o;var s=n;var l=1e-7;var y=1;for(var f=2;f<=20;f++){var u=r/y;var c=t+.5*u;var h=0;for(var p=1;p<=y;p++){h+=this.eval(c);c+=u}i=.5*(i+r*h/y);n=i;o=(4*n-s)/3;if(Math.abs(o-a)<l*Math.abs(a))break;a=o;s=n;y<<=1}return o};d.prototype.romberg=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Polynomial.romberg: parameters must be numbers");var r=20;var n=3;var i=1e-6;var o=new Array(r+1);var a=new Array(r+1);var s={y:0,dy:0};a[0]=1;for(var l=1;l<=r;l++){o[l-1]=this.trapezoid(t,e,l);if(l>=n){s=d.interpolate(a,o,n,l-n,0);if(Math.abs(s.dy)<=i*s.y)break}o[l]=o[l-1];a[l]=.25*a[l-1]}return s.y};d.prototype.getDegree=function(){return this.coefs.length-1};d.prototype.getDerivative=function(){var t=new d;for(var e=1;e<this.coefs.length;e++){t.coefs.push(e*this.coefs[e])}return t};d.prototype.getRoots=function(){var t;this.simplify();switch(this.getDegree()){case 0:t=new Array;break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=new Array}return t};d.prototype.getRootsInInterval=function(t,e){var r=new Array;var n;if(this.getDegree()==1){n=this.bisection(t,e);if(n!=null)r.push(n)}else{var o=this.getDerivative();var a=o.getRootsInInterval(t,e);if(a.length>0){n=this.bisection(t,a[0]);if(n!=null)r.push(n);for(i=0;i<=a.length-2;i++){n=this.bisection(a[i],a[i+1]);if(n!=null)r.push(n)}n=this.bisection(a[a.length-1],e);if(n!=null)r.push(n)}else{n=this.bisection(t,e);if(n!=null)r.push(n)}}return r};d.prototype.getLinearRoot=function(){var t=new Array;var e=this.coefs[1];if(e!=0)t.push(-this.coefs[0]/e);return t};d.prototype.getQuadraticRoots=function(){var t=new Array;if(this.getDegree()==2){var e=this.coefs[2];var r=this.coefs[1]/e;var n=this.coefs[0]/e;var i=r*r-4*n;if(i>0){var o=Math.sqrt(i);t.push(.5*(-r+o));t.push(.5*(-r-o))}else if(i==0){t.push(.5*-r)}}return t};d.prototype.getCubicRoots=function(){var t=new Array;if(this.getDegree()==3){var e=this.coefs[3];var r=this.coefs[2]/e;var n=this.coefs[1]/e;var i=this.coefs[0]/e;var o=(3*n-r*r)/3;var a=(2*r*r*r-9*n*r+27*i)/27;var s=r/3;var l=a*a/4+o*o*o/27;var y=a/2;var f=this.zeroErrorEstimate();if(Math.abs(l)<=f)l=0;if(l>0){var u=Math.sqrt(l);var c;var h;c=-y+u;if(c>=0)h=Math.pow(c,1/3);else h=-Math.pow(-c,1/3);c=-y-u;if(c>=0)h+=Math.pow(c,1/3);else h-=Math.pow(-c,1/3);t.push(h-s)}else if(l<0){var p=Math.sqrt(-o/3);var x=Math.atan2(Math.sqrt(-l),-y)/3;var d=Math.cos(x);var v=Math.sin(x);var g=Math.sqrt(3);t.push(2*p*d-s);t.push(-p*(d+g*v)-s);t.push(-p*(d-g*v)-s)}else{var c;if(y>=0)c=-Math.pow(y,1/3);else c=Math.pow(-y,1/3);t.push(2*c-s);t.push(-c-s)}}return t};var M=function(t){return typeof t==="number"?t?t<0?-1:1:t===t?t:NaN:NaN};d.prototype.getQuarticRoots=function(){var t=[];var e=this.getDegree();if(e==4){var r=new d;r.coefs=this.coefs.slice();r.divide_scalar(r.coefs[e]);var n=1e-15;if(Math.abs(r.coefs[0])<10*n*Math.abs(r.coefs[3]))r.coefs[0]=0;var i=r.getDerivative();var o=i.getRoots().sort(function(t,e){return t-e});var a=[];var s=o.length-1;var l;var y=this.bounds();maxabsX=Math.max(Math.abs(y.minX),Math.abs(y.maxX));var f=this.zeroErrorEstimate(maxabsX);for(l=0;l<=s;l++){a.push(r.eval(o[l]))}for(l=0;l<=s;l++){if(Math.abs(a[l])<f)a[l]=0}l=0;var u=Math.max(.1*(y.maxX-y.minX)/e,n);var c=[];var h=[];if(s>-1){if(a[0]!=0){if(M(a[0])!=M(r.eval(o[0]-u)-a[0])){c.push(o[0]-u);h.push([y.minX,o[0]])}}else{t.push(o[0],o[0]);l++}for(;l<s;l++){if(a[l+1]==0){t.push(o[l+1],o[l+1]);l++}else if(M(a[l])!=M(a[l+1])){c.push((o[l]+o[l+1])/2);h.push([o[l],o[l+1]])}}if(a[s]!=0&&M(a[s])!=M(r.eval(o[s]+u)-a[s])){c.push(o[s]+u);h.push([o[s],y.maxX])}}var p=function(t){return r.eval(t)};var x=function(t){return i.eval(t)};if(c.length>0){for(l=0;l<c.length;l++){c[l]=d.newton_secant_bisection(c[l],p,x,32,h[l][0],h[l][1])}}t=t.concat(c)}return t};d.prototype.zeroErrorEstimate=function(i){var t=this;var e=1e-15;if(typeof i==="undefined"){var r=t.bounds();i=Math.max(Math.abs(r.minX),Math.abs(r.maxX))}if(i<.001){return 2*Math.abs(t.eval(e))}var n=t.coefs.length-1;var o=t.coefs[n];return 10*e*t.coefs.reduce(function(t,e,r){var n=e/o*Math.pow(i,r);return n>t?n:t},0)};d.prototype.bounds_UpperReal_Fujiwara=function(){var e=this.coefs;var r=e.length-1;var n=e[r];if(n!=1){e=this.coefs.map(function(t){return t/n})}var t=e.map(function(t,e){return e<r?Math.pow(Math.abs(e==0?t/2:t),1/(r-e)):t});var i;var o=function(t,e,r){if(i(r)){if(t.max<e){t.nearmax=t.max;t.max=e}else if(t.nearmax<e){t.nearmax=e}}return t};i=function(t){return t<r&&e[t]<0};var a=t.reduce(o,{max:0,nearmax:0});i=function(t){return t<r&&(r%2==t%2?e[t]<0:e[t]>0)};var s=t.reduce(o,{max:0,nearmax:0});return{negX:-2*s.max,posX:2*a.max}};d.prototype.bounds_LowerReal_Fujiwara=function(){var t=new d;t.coefs=this.coefs.slice().reverse();var e=t.bounds_UpperReal_Fujiwara();e.negX=1/e.negX;e.posX=1/e.posX;return e};d.prototype.bounds=function(){var t=this.bounds_UpperReal_Fujiwara();var e={minX:t.negX,maxX:t.posX};if(t.negX===0&&t.posX===0)return e;if(t.negX===0){e.minX=this.bounds_LowerReal_Fujiwara().posX}else if(t.posX===0){e.maxX=this.bounds_LowerReal_Fujiwara().negX}if(e.minX>e.maxX){e.minX=e.maxX=0}return e};d.newton_secant_bisection=function(t,e,r,n,i,o){var a,s=0,l,f=0,u,c;var h,p;a=t;var x=14;var d=Math.pow(10,-x);var v=typeof i==="number"&&typeof o==="number";if(v){if(i>o)throw new Error("newton root finding: min must be greater than max");h=e(i);p=e(o);if(M(h)==M(p))throw new Error("newton root finding: y values of bounds must be of opposite sign")}var g=function(){return Math.abs(u)<=d*Math.abs(a)||f==a-u-a};var w;for(w=0;w<n;w++){l=r(a);if(l==0){if(s==0){throw new Error("newton root finding: df(x) is zero")}else{l=s}}s=l;y=e(a);u=y/l;c=a-u;if(g()){break}if(v){if(M(y)==M(p)){o=a;p=y}else if(M(y)==M(h)){i=a;h=y}else{a=c;break}if(c<i||c>o){if(M(h)==M(p)){break}var m=50;var k=.25;var b=p-h;var E=o-i;if(b==0){u=a-(i+E*.5)}else if(Math.abs(b/Math.min(h,p))>m){u=a-(i+E*(.5+(Math.abs(h)<Math.abs(p)?-k:k)))}else{u=a-(i-h/b*E)}c=a-u;if(g()){break}}}f=a-c;a=c}return a};{t.exports=d}});var b=h(function(t){{var e=k}n.VERSION=1;n.prototype=new e;n.prototype.constructor=n;n.superclass=e.prototype;function n(){this.init(arguments)}n.prototype.eval=function(t){var e=1e-7;var r=n.superclass.eval.call(this,t);if(Math.abs(r)<e)r=0;if(r<0)throw new Error("SqrtPolynomial.eval: cannot take square root of negative number");return Math.sqrt(r)};n.prototype.toString=function(){var t=n.superclass.toString.call(this);return"sqrt("+t+")"};{t.exports=n}});var E=k;var M=b;var _={Polynomial:E,SqrtPolynomial:M};var O=m.Point2D;function C(t,e,r,n,i,o,a){function s(t,e,r,n){var i=t*r+e*n;var o=Math.sqrt((t*t+e*e)*(r*r+n*n));var a=Math.acos(i/o);if(t*n-e*r<0)a=-a;return a}i=i*Math.PI/180;var l=Math.cos(i);var y=Math.sin(i);var f=1e-6;var u=t.subtract(e).divide(2);var c=u.x*l+u.y*y;var h=u.x*-y+u.y*l;var p=c*c;var x=h*h;var d=p/(r*r)+x/(n*n);var v;if(d>1){v=Math.sqrt(d);r*=v;n*=v}var g=r*r;var w=n*n;var m=g*x;var k=w*p;v=(g*w-m-k)/(m+k);if(Math.abs(v)<f)v=0;var b=Math.sqrt(v);if(o==a)b=-b;var E=t.add(e).divide(2);var M=b*r*h/n;var _=b*-n*c/r;var C=(c-M)/r;var P=(c+M)/r;var L=(h-_)/n;var N=(h+_)/n;var S=s(1,0,C,L);var I=s(C,L,-P,-N);var j=Math.PI*2;while(I>j)I-=j;while(I<0)I+=j;if(a==false)I-=j;return{center:new O(M*l-_*y+E.x,M*y+_*l+E.y),rx:r,ry:n,theta1:S,deltaTheta:I}}function P(t,e){this.init(t,e)}P.prototype.init=function(t,e){this.type=t;this.params=e;this.meta={}};P.TYPE={};var L=P.TYPE;L.LINE="Line";L.RECT="Rectangle";L.ROUNDRECT="RoundRectangle";L.CIRCLE="Circle";L.ELLIPSE="Ellipse";L.POLYGON="Polygon";L.POLYLINE="Polyline";L.PATH="Path";L.ARC="Arc";L.BEZIER2="Bezier2";L.BEZIER3="Bezier3";function N(t){return t.split(" ").map(function(t){t=t.split(",");return new O(t[0],t[1])})}P.newShape=function(t,e){t=t.toLowerCase();if(t==="line"){return P.newLine(new O(e.x1,e.y1),new O(e.x2,e.y2))}if(t==="rect"){if(e.rx>0||e.ry>0){return P.newRoundRect(e.x,e.y,e.width,e.height,e.rx,e.ry)}else{return P.newRect(e.x,e.y,e.width,e.height)}}if(t==="circle"){return P.newCircle(new O(e.cx,e.cy),e.r)}if(t==="ellipse"){return P.newEllipse(new O(e.cx,e.cy),e.rx,e.ry)}if(t==="polygon"){return P.newPolygon(N(e.points))}if(t==="polyline"){return P.newPolyline(N(e.points))}if(t==="path"){return P.newPath(e.d)}};P.newArc=function(t,e,r,n,i,o,a){var s=C(t,e,r,n,i,o,a);return new P(L.ARC,[s.center,s.rx,s.ry,i*Math.PI/180,s.theta1,s.deltaTheta])};P.newBezier2=function(t,e,r){return new P(L.BEZIER2,[t,e,r])};P.newBezier3=function(t,e,r,n){return new P(L.BEZIER3,[t,e,r,n])};P.newCircle=function(t,e){return new P(L.CIRCLE,[t,e])};P.newEllipse=function(t,e,r){return new P(L.ELLIPSE,[t,e,r])};P.newLine=function(t,e){return new P(L.LINE,[t,e])};P.newPolygon=function(t){return new P(L.POLYGON,[t])};P.newPolyline=function(t){return new P(L.POLYLINE,[t])};P.newRect=function(t,e,r,n){var i=[];i.push(new O(t,e));i.push(new O(t+r,e));i.push(new O(t+r,e+n));i.push(new O(t,e+n));return new P(L.RECT,[i])};var S=function(t){return t*Math.PI/180};P.newRoundRect=function(t,e,r,n,i,o){if(i===0&&o===0)return P.newRect(t,e,r,n);if(i===0)i=o;if(o===0)o=i;if(i>r/2)i=r/2;if(o>n/2)i=n/2;var a=[];var s=t,l=t+i,y=t+r-i,f=t+r;var u=e,c=e+o,h=e+n-o,p=e+n;a.push(new P(L.ARC,[new O(l,c),i,o,0,S(180),S(90)]));a.push(new P(L.LINE,[new O(l,u),new O(y,u)]));a.push(new P(L.ARC,[new O(y,c),i,o,0,S(-90),S(90)]));a.push(new P(L.LINE,[new O(f,c),new O(f,h)]));a.push(new P(L.ARC,[new O(y,h),i,o,0,S(0),S(90)]));a.push(new P(L.LINE,[new O(y,p),new O(l,p)]));a.push(new P(L.ARC,[new O(l,h),i,o,0,S(90),S(90)]));a.push(new P(L.LINE,[new O(s,h),new O(s,c)]));a[a.length-1].meta.closePath=true;return new P(L.ROUNDRECT,[a])};function I(t,e){if(arguments.length>0){this.init(t,e)}}I.prototype.init=function(t,e){this.type=t;this.text=e};I.prototype.typeis=function(t){return this.type==t};var j={};j.COMMAND=0;j.NUMBER=1;j.EOD=2;j.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]};function T(t){var e=new Array;while(t!=""){if(t.match(/^([ \t\r\n,]+)/)){t=t.substr(RegExp.$1.length)}else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/)){e[e.length]=new I(j.COMMAND,RegExp.$1);t=t.substr(RegExp.$1.length)}else if(t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){e[e.length]=new I(j.NUMBER,parseFloat(RegExp.$1));t=t.substr(RegExp.$1.length)}else{throw new Error("Unrecognized segment command: "+t)}}e[e.length]=new I(j.EOD,null);return e}P.newPath=function(t){var e=T(t);var r=0;var n=e[r];var i="BOD";var o=[];while(!n.typeis(j.EOD)){var a;var s=new Array;if(i=="BOD"){if(n.text=="M"||n.text=="m"){r++;a=j.PARAMS[n.text].length;i=n.text}else{throw new Error("Path data must begin with a moveto command")}}else{if(n.typeis(j.NUMBER)){a=j.PARAMS[i].length}else{r++;a=j.PARAMS[n.text].length;i=n.text}}if(r+a<e.length){for(var l=r;l<r+a;l++){var y=e[l];if(y.typeis(j.NUMBER))s[s.length]=y.text;else throw new Error("Parameter type is not a number: "+i+","+y.text)}var f;var u=o.length;var c=u==0?null:o[u-1];switch(i){case"A":f=new A(s,c);break;case"C":f=new F(s,c);break;case"c":f=new Z(s,c);break;case"H":f=new D(s,c);break;case"V":f=new G(s,c);break;case"L":f=new V(s,c);break;case"l":f=new $(s,c);break;case"M":f=new W(s,c);break;case"m":f=new Q(s,c);break;case"Q":f=new z(s,c);break;case"q":f=new H(s,c);break;case"S":f=new q(s,c);break;case"s":f=new K(s,c);break;case"T":f=new U(s,c);break;case"t":f=new J(s,c);break;case"Z":f=new Y(s,c);break;case"z":f=new Y(s,c);break;default:throw new Error("Unsupported segment type: "+i)}o.push(f);r+=a;n=e[r];if(i=="M")i="L";if(i=="m")i="l"}else{throw new Error("Path data ended before all parameters were found")}}var h=[];for(l=0;l<o.length;l++){var p=o[l].getIntersectionParams();if(p){h.push(p)}}return new P(L.PATH,[h])};function R(t,e,r){if(arguments.length>0)this.init(t,e,r)}R.prototype.init=function(t,e,r){this.command=t;this.previous=r;this.points=[];var n=0;while(n<e.length){this.points.push(new O(e[n],e[n+1]));n+=2}};R.prototype.getLastPoint=function(){return this.points[this.points.length-1]};R.prototype.getIntersectionParams=function(){return null};function A(t,e){if(arguments.length>0){this.init("A",t,e)}}A.prototype=new R;A.prototype.constructor=z;A.superclass=R.prototype;A.prototype.init=function(t,e,r){var n=new Array;var i=e.pop();var o=e.pop();n.push(o,i);A.superclass.init.call(this,t,n,r);this.rx=parseFloat(e.shift());this.ry=parseFloat(e.shift());this.angle=parseFloat(e.shift());this.arcFlag=parseFloat(e.shift());this.sweepFlag=parseFloat(e.shift())};A.prototype.getIntersectionParams=function(){return P.newArc(this.previous.getLastPoint(),this.points[0],this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag)};function z(t,e){if(arguments.length>0){this.init("Q",t,e)}}z.prototype=new R;z.prototype.constructor=z;z.superclass=R.prototype;z.prototype.getIntersectionParams=function(){return P.newBezier2(this.previous.getLastPoint(),this.points[0],this.points[1])};function F(t,e){if(arguments.length>0){this.init("C",t,e)}}F.prototype=new R;F.prototype.constructor=F;F.superclass=R.prototype;F.prototype.getLastControlPoint=function(){return this.points[1]};F.prototype.getIntersectionParams=function(){return P.newBezier3(this.previous.getLastPoint(),this.points[0],this.points[1],this.points[2])};function D(t,e){if(arguments.length>0){this.init("H",t,e)}}D.prototype=new R;D.prototype.constructor=D;D.superclass=R.prototype;D.prototype.init=function(t,e,r){var n=r.getLastPoint();var i=new Array;i.push(e.pop(),n.y);D.superclass.init.call(this,t,i,r)};function G(t,e){if(arguments.length>0){this.init("V",t,e)}}G.prototype=new R;G.prototype.constructor=G;G.superclass=R.prototype;G.prototype.init=function(t,e,r){var n=r.getLastPoint();var i=new Array;i.push(n.x,e.pop());G.superclass.init.call(this,t,i,r)};function V(t,e){if(arguments.length>0){this.init("L",t,e)}}V.prototype=new R;V.prototype.constructor=V;V.superclass=R.prototype;V.prototype.getIntersectionParams=function(){return P.newLine(this.previous.getLastPoint(),this.points[0])};function W(t,e){if(arguments.length>0){this.init("M",t,e)}}W.prototype=new R;W.prototype.constructor=W;W.superclass=R.prototype;function U(t,e){if(arguments.length>0){this.init("T",t,e)}}U.prototype=new R;U.prototype.constructor=U;U.superclass=R.prototype;U.prototype.getControlPoint=function(){var t=this.previous.getLastPoint();var e;if(this.previous.command.match(/^[QqTt]$/)){var r=this.previous.getControlPoint();var n=r.subtract(t);e=t.subtract(n)}else{e=t}return e};U.prototype.getIntersectionParams=function(){return P.newBezier2(this.previous.getLastPoint(),this.getControlPoint(),this.points[0])};function q(t,e){if(arguments.length>0){this.init("S",t,e)}}q.prototype=new R;q.prototype.constructor=q;q.superclass=R.prototype;q.prototype.getFirstControlPoint=function(){var t=this.previous.getLastPoint();var e;if(this.previous.command.match(/^[SsCc]$/)){var r=this.previous.getLastControlPoint();var n=r.subtract(t);e=t.subtract(n)}else{e=t}return e};q.prototype.getLastControlPoint=function(){return this.points[0]};q.prototype.getIntersectionParams=function(){return P.newBezier3(this.previous.getLastPoint(),this.getFirstControlPoint(),this.points[0],this.points[1])};function X(t,e,r){if(arguments.length>0)this.init(t,e,r)}X.prototype=new R;X.prototype.constructor=X;X.superclass=R.prototype;X.prototype.init=function(t,e,r){this.command=t;this.previous=r;this.points=[];var n;if(this.previous)n=this.previous.getLastPoint();else n=new O(0,0);var i=0;while(i<e.length){var o=new O(n.x+e[i],n.y+e[i+1]);this.points.push(o);i+=2}};function Y(t,e){if(arguments.length>0){this.init("z",t,e)}}Y.prototype=new X;Y.prototype.constructor=Y;Y.superclass=X.prototype;Y.prototype.getLastPoint=function(){var t=this.previous;var e;while(t){if(t.command.match(/^[mMzZ]$/)){e=t.getLastPoint();break}t=t.previous}return e};Y.prototype.getIntersectionParams=function(){return P.newLine(this.previous.getLastPoint(),this.getLastPoint())};function H(t,e){if(arguments.length>0){this.init("q",t,e)}}H.prototype=new X;H.prototype.constructor=H;H.superclass=X.prototype;H.prototype.getControlPoint=function(){return this.points[0]};H.prototype.getIntersectionParams=function(){return P.newBezier2(this.previous.getLastPoint(),this.points[0],this.points[1])};function Z(t,e){if(arguments.length>0){this.init("c",t,e)}}Z.prototype=new X;Z.prototype.constructor=Z;Z.superclass=X.prototype;Z.prototype.getLastControlPoint=function(){return this.points[1]};Z.prototype.getIntersectionParams=function(){return P.newBezier3(this.previous.getLastPoint(),this.points[0],this.points[1],this.points[2])};function $(t,e){if(arguments.length>0){this.init("l",t,e)}}$.prototype=new X;$.prototype.constructor=$;$.superclass=X.prototype;$.prototype.toString=function(){var t;var e;if(this.previous)t=this.previous.getLastPoint();else t=new Point(0,0);e=this.points[0].subtract(t);if(this.previous.constructor!=this.constuctor)if(this.previous.constructor!=Q)cmd=this.command;return cmd+e.toString()};$.prototype.getIntersectionParams=function(){return P.newLine(this.previous.getLastPoint(),this.points[0])};function Q(t,e){if(arguments.length>0){this.init("m",t,e)}}Q.prototype=new X;Q.prototype.constructor=Q;Q.superclass=X.prototype;function J(t,e){if(arguments.length>0){this.init("t",t,e)}}J.prototype=new X;J.prototype.constructor=J;J.superclass=X.prototype;J.prototype.getControlPoint=function(){var t=this.previous.getLastPoint();var e;if(this.previous.command.match(/^[QqTt]$/)){var r=this.previous.getControlPoint();var n=r.subtract(t);e=t.subtract(n)}else{e=t}return e};J.prototype.getIntersectionParams=function(){return P.newBezier2(this.previous.getLastPoint(),this.getControlPoint(),this.points[0])};function K(t,e){if(arguments.length>0){this.init("s",t,e)}}K.prototype=new X;K.prototype.constructor=K;K.superclass=X.prototype;K.prototype.getFirstControlPoint=function(){var t=this.previous.getLastPoint();var e;if(this.previous.command.match(/^[SsCc]$/)){var r=this.previous.getLastControlPoint();var n=r.subtract(t);e=t.subtract(n)}else{e=t}return e};K.prototype.getLastControlPoint=function(){return this.points[0]};K.prototype.getIntersectionParams=function(){return P.newBezier3(this.previous.getLastPoint(),this.getFirstControlPoint(),this.points[0],this.points[1])};var tt=P;function et(t){this.init(t)}et.prototype.init=function(t){this.status=t;this.points=[]};et.prototype.appendPoint=function(t){this.points.push(t)};et.prototype.appendPoints=function(t){this.points=this.points.concat(t)};var lt=et;var yt=m.Point2D;var ft=m.Vector2D;var ut=_.Polynomial;function ct(t){var e=1e-15;t.sort(function(t,e){return t-e});for(var r=1;r<t.length;){if(Math.abs(t[r]-t[r-1])<e){t.splice(r,1)}else{r++}}}var rt={};var nt=function(t,e,r,n,i,o){var a,s;var l,y,f;var u,c,h;var p=new lt;var x;a=e.multiply(-2);l=t.add(a.add(r));a=t.multiply(-2);s=e.multiply(2);y=a.add(s);f=new yt(t.x,t.y);a=i.multiply(-2);u=n.add(a.add(o));a=n.multiply(-2);s=i.multiply(2);c=a.add(s);h=new yt(n.x,n.y);var d,v,g,w,m,k,b;if(l.y===0){d=l.x*(f.y-h.y);v=d-y.x*y.y;g=d+v;w=y.y*y.y;x=new ut(l.x*u.y*u.y,2*l.x*c.y*u.y,l.x*c.y*c.y-u.x*w-u.y*d-u.y*v,-c.x*w-c.y*d-c.y*v,(f.x-h.x)*w+(f.y-h.y)*v)}else{d=l.x*u.y-l.y*u.x;v=l.x*c.y-c.x*l.y;g=y.x*l.y-y.y*l.x;w=f.y-h.y;m=l.y*(f.x-h.x)-l.x*w;k=-y.y*g+l.y*m;b=g*g;x=new ut(d*d,2*d*v,(-u.y*b+l.y*v*v+l.y*d*m+d*k)/l.y,(-c.y*b+l.y*v*m+v*k)/l.y,(w*b+m*k)/l.y)}var E=x.getRoots();for(var M=0;M<E.length;M++){var _=E[M];if(0<=_&&_<=1){var C=new ut(l.x,y.x,f.x-h.x-_*c.x-_*_*u.x).getRoots();var P=new ut(l.y,y.y,f.y-h.y-_*c.y-_*_*u.y).getRoots();if(C.length>0&&P.length>0){var L=1e-4;t:for(var N=0;N<C.length;N++){var S=C[N];if(0<=S&&S<=1){for(var I=0;I<P.length;I++){if(Math.abs(S-P[I])<L){p.points.push(u.multiply(_*_).add(c.multiply(_).add(h)));break t}}}}}}}return p};var it=function(t,e,r,n,i,o,a){var s,l,y,f;var u,c,h;var p,x,d,v;var g=new lt;s=e.multiply(-2);u=t.add(s.add(r));s=t.multiply(-2);l=e.multiply(2);c=s.add(l);h=new yt(t.x,t.y);s=n.multiply(-1);l=i.multiply(3);y=o.multiply(-3);f=s.add(l.add(y.add(a)));p=new ft(f.x,f.y);s=n.multiply(3);l=i.multiply(-6);y=o.multiply(3);f=s.add(l.add(y));x=new ft(f.x,f.y);s=n.multiply(-3);l=i.multiply(3);y=s.add(l);d=new ft(y.x,y.y);v=new ft(n.x,n.y);var w=h.x*h.x;var m=h.y*h.y;var k=c.x*c.x;var b=c.y*c.y;var E=u.x*u.x;var M=u.y*u.y;var _=v.x*v.x;var C=v.y*v.y;var P=d.x*d.x;var L=d.y*d.y;var N=x.x*x.x;var S=x.y*x.y;var I=p.x*p.x;var j=p.y*p.y;var B=new ut(-2*u.x*u.y*p.x*p.y+E*j+M*I,-2*u.x*u.y*x.x*p.y-2*u.x*u.y*x.y*p.x+2*M*x.x*p.x+2*E*x.y*p.y,-2*u.x*d.x*u.y*p.y-2*u.x*u.y*d.y*p.x-2*u.x*u.y*x.x*x.y+2*d.x*M*p.x+M*N+E*(2*d.y*p.y+S),2*h.x*u.x*u.y*p.y+2*h.y*u.x*u.y*p.x+c.x*c.y*u.x*p.y+c.x*c.y*u.y*p.x-2*v.x*u.x*u.y*p.y-2*u.x*v.y*u.y*p.x-2*u.x*d.x*u.y*x.y-2*u.x*u.y*d.y*x.x-2*h.x*M*p.x-2*h.y*E*p.y+2*v.x*M*p.x+2*d.x*M*x.x-b*u.x*p.x-k*u.y*p.y+E*(2*v.y*p.y+2*d.y*x.y),2*h.x*u.x*u.y*x.y+2*h.y*u.x*u.y*x.x+c.x*c.y*u.x*x.y+c.x*c.y*u.y*x.x-2*v.x*u.x*u.y*x.y-2*u.x*v.y*u.y*x.x-2*u.x*d.x*u.y*d.y-2*h.x*M*x.x-2*h.y*E*x.y+2*v.x*M*x.x-b*u.x*x.x-k*u.y*x.y+P*M+E*(2*v.y*x.y+L),2*h.x*u.x*u.y*d.y+2*h.y*u.x*d.x*u.y+c.x*c.y*u.x*d.y+c.x*c.y*d.x*u.y-2*v.x*u.x*u.y*d.y-2*u.x*v.y*d.x*u.y-2*h.x*d.x*M-2*h.y*E*d.y+2*v.x*d.x*M-b*u.x*d.x-k*u.y*d.y+2*E*v.y*d.y,-2*h.x*h.y*u.x*u.y-h.x*c.x*c.y*u.y-h.y*c.x*c.y*u.x+2*h.x*u.x*v.y*u.y+2*h.y*v.x*u.x*u.y+c.x*v.x*c.y*u.y+c.x*c.y*u.x*v.y-2*v.x*u.x*v.y*u.y-2*h.x*v.x*M+h.x*b*u.x+h.y*k*u.y-2*h.y*E*v.y-v.x*b*u.x-k*v.y*u.y+w*M+m*E+_*M+E*C);var O=B.getRootsInInterval(0,1);ct(O);for(var T=0;T<O.length;T++){var R=O[T];var A=new ut(u.x,c.x,h.x-v.x-R*d.x-R*R*x.x-R*R*R*p.x).getRoots();var z=new ut(u.y,c.y,h.y-v.y-R*d.y-R*R*x.y-R*R*R*p.y).getRoots();if(A.length>0&&z.length>0){var F=1e-4;t:for(var D=0;D<A.length;D++){var G=A[D];if(0<=G&&G<=1){for(var V=0;V<z.length;V++){if(Math.abs(G-z[V])<F){var W=p.multiply(R*R*R).add(x.multiply(R*R).add(d.multiply(R).add(v)));g.points.push(new yt(W.x,W.y));break t}}}}}}return g};var ot=function(t,e,r,n,i,o){var a,s;var l,y,f;var u=new lt;a=e.multiply(-2);l=t.add(a.add(r));a=t.multiply(-2);s=e.multiply(2);y=a.add(s);f=new yt(t.x,t.y);var c=i*i;var h=o*o;var p=new ut(h*l.x*l.x+c*l.y*l.y,2*(h*l.x*y.x+c*l.y*y.y),h*(2*l.x*f.x+y.x*y.x)+c*(2*l.y*f.y+y.y*y.y)-2*(h*n.x*l.x+c*n.y*l.y),2*(h*y.x*(f.x-n.x)+c*y.y*(f.y-n.y)),h*(f.x*f.x+n.x*n.x)+c*(f.y*f.y+n.y*n.y)-2*(h*n.x*f.x+c*n.y*f.y)-c*h).getRoots();for(var x=0;x<p.length;x++){var d=p[x];if(0<=d&&d<=1)u.points.push(l.multiply(d*d).add(y.multiply(d).add(f)))}return u};var at=function(t,e,r,n,i){var o,a;var s,l,y;var f;var u;var c=n.min(i);var h=n.max(i);var p=new lt;o=e.multiply(-2);s=t.add(o.add(r));o=t.multiply(-2);a=e.multiply(2);l=o.add(a);y=new yt(t.x,t.y);u=new ft(n.y-i.y,i.x-n.x);f=n.x*i.y-i.x*n.y;roots=new ut(u.dot(s),u.dot(l),u.dot(y)+f).getRoots();for(var x=0;x<roots.length;x++){var d=roots[x];if(0<=d&&d<=1){var v=t.lerp(e,d);var g=e.lerp(r,d);var w=v.lerp(g,d);if(n.x==i.x){if(c.y<=w.y&&w.y<=h.y){p.appendPoint(w)}}else if(n.y==i.y){if(c.x<=w.x&&w.x<=h.x){p.appendPoint(w)}}else if(c.x<=w.x&&w.x<=h.x&&c.y<=w.y&&w.y<=h.y){p.appendPoint(w)}}}return p};var st=function(t,e,r,n,i,o,a,s){var l,y,f,u;var c,h,p,x;var d,v,g,w;var m=new lt;l=t.multiply(-1);y=e.multiply(3);f=r.multiply(-3);u=l.add(y.add(f.add(n)));c=new ft(u.x,u.y);l=t.multiply(3);y=e.multiply(-6);f=r.multiply(3);u=l.add(y.add(f));h=new ft(u.x,u.y);l=t.multiply(-3);y=e.multiply(3);f=l.add(y);p=new ft(f.x,f.y);x=new ft(t.x,t.y);l=i.multiply(-1);y=o.multiply(3);f=a.multiply(-3);u=l.add(y.add(f.add(s)));d=new ft(u.x,u.y);l=i.multiply(3);y=o.multiply(-6);f=a.multiply(3);u=l.add(y.add(f));v=new ft(u.x,u.y);l=i.multiply(-3);y=o.multiply(3);f=l.add(y);g=new ft(f.x,f.y);w=new ft(i.x,i.y);var k=x.x*x.x;var b=x.x*x.x*x.x;var E=x.y*x.y;var M=x.y*x.y*x.y;var _=p.x*p.x;var C=p.x*p.x*p.x;var P=p.y*p.y;var L=p.y*p.y*p.y;var N=h.x*h.x;var S=h.x*h.x*h.x;var I=h.y*h.y;var j=h.y*h.y*h.y;var B=c.x*c.x;var O=c.x*c.x*c.x;var T=c.y*c.y;var R=c.y*c.y*c.y;var A=w.x*w.x;var z=w.x*w.x*w.x;var F=w.y*w.y;var D=w.y*w.y*w.y;var G=g.x*g.x;var V=g.x*g.x*g.x;var W=g.y*g.y;var U=v.x*v.x;var q=v.x*v.x*v.x;var X=v.y*v.y;var Y=d.x*d.x;var H=d.x*d.x*d.x;var Z=d.y*d.y;var $=d.y*d.y*d.y;var Q=new ut(-O*$+R*H-3*c.x*T*Y*d.y+3*B*c.y*d.x*Z,-6*c.x*v.x*T*d.x*d.y+6*B*c.y*v.y*d.x*d.y+3*v.x*R*Y-3*O*v.y*Z-3*c.x*T*v.y*Y+3*B*v.x*c.y*Z,-6*g.x*c.x*T*d.x*d.y-6*c.x*v.x*T*v.y*d.x+6*B*v.x*c.y*v.y*d.y+3*g.x*R*Y+3*U*R*d.x+3*g.x*B*c.y*Z-3*c.x*g.y*T*Y-3*c.x*U*T*d.y+B*c.y*d.x*(6*g.y*d.y+3*X)+O*(-g.y*Z-2*X*d.y-d.y*(2*g.y*d.y+X)),p.x*h.y*c.x*c.y*d.x*d.y-p.y*h.x*c.x*c.y*d.x*d.y+6*g.x*v.x*R*d.x+3*p.x*h.x*c.x*c.y*Z+6*x.x*c.x*T*d.x*d.y-3*p.x*h.x*T*d.x*d.y-3*p.y*h.y*c.x*c.y*Y-6*x.y*B*c.y*d.x*d.y-6*w.x*c.x*T*d.x*d.y+3*p.y*h.y*B*d.x*d.y-2*h.x*I*c.x*d.x*d.y-6*g.x*c.x*v.x*T*d.y-6*g.x*c.x*T*v.y*d.x-6*c.x*g.y*v.x*T*d.x+6*g.x*B*c.y*v.y*d.y+2*N*h.y*c.y*d.x*d.y+q*R-3*x.x*R*Y+3*x.y*O*Z+3*w.x*R*Y+j*c.x*Y-S*c.y*Z-3*x.x*B*c.y*Z+3*x.y*c.x*T*Y-2*p.x*h.y*B*Z+p.x*h.y*T*Y-p.y*h.x*B*Z+2*p.y*h.x*T*Y+3*w.x*B*c.y*Z-h.x*I*c.y*Y-3*w.y*c.x*T*Y+N*h.y*c.x*Z-3*c.x*U*T*v.y+B*c.y*d.x*(6*w.y*d.y+6*g.y*v.y)+B*v.x*c.y*(6*g.y*d.y+3*X)+O*(-2*g.y*v.y*d.y-w.y*Z-v.y*(2*g.y*d.y+X)-d.y*(2*w.y*d.y+2*g.y*v.y)),6*p.x*h.x*c.x*c.y*v.y*d.y+p.x*h.y*c.x*v.x*c.y*d.y+p.x*h.y*c.x*c.y*v.y*d.x-p.y*h.x*c.x*v.x*c.y*d.y-p.y*h.x*c.x*c.y*v.y*d.x-6*p.y*h.y*c.x*v.x*c.y*d.x-6*x.x*v.x*R*d.x+6*w.x*v.x*R*d.x+6*x.y*O*v.y*d.y+2*j*c.x*v.x*d.x-2*S*c.y*v.y*d.y+6*x.x*c.x*v.x*T*d.y+6*x.x*c.x*T*v.y*d.x+6*x.y*c.x*v.x*T*d.x-3*p.x*h.x*v.x*T*d.y-3*p.x*h.x*T*v.y*d.x+2*p.x*h.y*v.x*T*d.x+4*p.y*h.x*v.x*T*d.x-6*x.x*B*c.y*v.y*d.y-6*x.y*B*v.x*c.y*d.y-6*x.y*B*c.y*v.y*d.x-4*p.x*h.y*B*v.y*d.y-6*w.x*c.x*v.x*T*d.y-6*w.x*c.x*T*v.y*d.x-2*p.y*h.x*B*v.y*d.y+3*p.y*h.y*B*v.x*d.y+3*p.y*h.y*B*v.y*d.x-2*h.x*I*c.x*v.x*d.y-2*h.x*I*c.x*v.y*d.x-2*h.x*I*v.x*c.y*d.x-6*w.y*c.x*v.x*T*d.x-6*g.x*c.x*g.y*T*d.x-6*g.x*c.x*v.x*T*v.y+6*w.x*B*c.y*v.y*d.y+2*N*h.y*c.x*v.y*d.y+2*N*h.y*v.x*c.y*d.y+2*N*h.y*c.y*v.y*d.x+3*g.x*U*R+3*G*R*d.x-3*c.x*g.y*U*T-3*G*c.x*T*d.y+B*v.x*c.y*(6*w.y*d.y+6*g.y*v.y)+B*c.y*d.x*(6*w.y*v.y+3*W)+g.x*B*c.y*(6*g.y*d.y+3*X)+O*(-2*w.y*v.y*d.y-d.y*(2*w.y*v.y+W)-g.y*(2*g.y*d.y+X)-v.y*(2*w.y*d.y+2*g.y*v.y)),p.x*g.x*h.y*c.x*c.y*d.y+p.x*h.y*c.x*g.y*c.y*d.x+p.x*h.y*c.x*v.x*c.y*v.y-p.y*h.x*g.x*c.x*c.y*d.y-p.y*h.x*c.x*g.y*c.y*d.x-p.y*h.x*c.x*v.x*c.y*v.y-6*p.y*g.x*h.y*c.x*c.y*d.x-6*x.x*g.x*R*d.x+6*w.x*g.x*R*d.x+2*g.x*j*c.x*d.x+6*x.x*g.x*c.x*T*d.y+6*x.x*c.x*g.y*T*d.x+6*x.x*c.x*v.x*T*v.y+6*x.y*g.x*c.x*T*d.x-3*p.x*h.x*g.x*T*d.y-3*p.x*h.x*g.y*T*d.x-3*p.x*h.x*v.x*T*v.y+2*p.x*g.x*h.y*T*d.x+4*p.y*h.x*g.x*T*d.x-6*x.y*g.x*B*c.y*d.y-6*x.y*B*g.y*c.y*d.x-6*x.y*B*v.x*c.y*v.y-6*w.x*g.x*c.x*T*d.y-6*w.x*c.x*g.y*T*d.x-6*w.x*c.x*v.x*T*v.y+3*p.y*g.x*h.y*B*d.y-3*p.y*h.y*c.x*U*c.y+3*p.y*h.y*B*g.y*d.x+3*p.y*h.y*B*v.x*v.y-2*h.x*g.x*I*c.x*d.y-2*h.x*g.x*I*c.y*d.x-2*h.x*I*c.x*g.y*d.x-2*h.x*I*c.x*v.x*v.y-6*w.y*g.x*c.x*T*d.x-6*g.x*c.x*g.y*v.x*T+6*w.y*B*g.y*c.y*d.x+2*N*g.x*h.y*c.y*d.y+2*N*h.y*g.y*c.y*d.x+2*N*h.y*v.x*c.y*v.y-3*x.x*U*R+3*w.x*U*R+3*G*v.x*R+j*c.x*U+3*x.y*c.x*U*T+p.x*h.y*U*T+2*p.y*h.x*U*T-h.x*I*U*c.y-3*w.y*c.x*U*T-3*G*c.x*T*v.y+N*h.y*c.x*(2*g.y*d.y+X)+p.x*h.x*c.x*c.y*(6*g.y*d.y+3*X)+g.x*B*c.y*(6*w.y*d.y+6*g.y*v.y)+S*c.y*(-2*g.y*d.y-X)+x.y*O*(6*g.y*d.y+3*X)+p.y*h.x*B*(-2*g.y*d.y-X)+p.x*h.y*B*(-4*g.y*d.y-2*X)+x.x*B*c.y*(-6*g.y*d.y-3*X)+B*v.x*c.y*(6*w.y*v.y+3*W)+w.x*B*c.y*(6*g.y*d.y+3*X)+O*(-2*w.y*g.y*d.y-v.y*(2*w.y*v.y+W)-w.y*(2*g.y*d.y+X)-g.y*(2*w.y*d.y+2*g.y*v.y)),-x.x*p.x*h.y*c.x*c.y*d.y+x.x*p.y*h.x*c.x*c.y*d.y+6*x.x*p.y*h.y*c.x*c.y*d.x-6*x.y*p.x*h.x*c.x*c.y*d.y-x.y*p.x*h.y*c.x*c.y*d.x+x.y*p.y*h.x*c.x*c.y*d.x+p.x*p.y*h.x*h.y*c.x*d.y-p.x*p.y*h.x*h.y*c.y*d.x+p.x*w.x*h.y*c.x*c.y*d.y+p.x*w.y*h.y*c.x*c.y*d.x+p.x*g.x*h.y*c.x*c.y*v.y+p.x*h.y*c.x*g.y*v.x*c.y-w.x*p.y*h.x*c.x*c.y*d.y-6*w.x*p.y*h.y*c.x*c.y*d.x-p.y*h.x*w.y*c.x*c.y*d.x-p.y*h.x*g.x*c.x*c.y*v.y-p.y*h.x*c.x*g.y*v.x*c.y-6*p.y*g.x*h.y*c.x*v.x*c.y-6*x.x*w.x*R*d.x-6*x.x*g.x*v.x*R-2*x.x*j*c.x*d.x+6*w.x*g.x*v.x*R+2*w.x*j*c.x*d.x+2*g.x*j*c.x*v.x+2*x.y*S*c.y*d.y-6*x.x*x.y*c.x*T*d.x+3*x.x*p.x*h.x*T*d.y-2*x.x*p.x*h.y*T*d.x-4*x.x*p.y*h.x*T*d.x+3*x.y*p.x*h.x*T*d.x+6*x.x*x.y*B*c.y*d.y+6*x.x*w.x*c.x*T*d.y-3*x.x*p.y*h.y*B*d.y+2*x.x*h.x*I*c.x*d.y+2*x.x*h.x*I*c.y*d.x+6*x.x*w.y*c.x*T*d.x+6*x.x*g.x*c.x*T*v.y+6*x.x*c.x*g.y*v.x*T+4*x.y*p.x*h.y*B*d.y+6*x.y*w.x*c.x*T*d.x+2*x.y*p.y*h.x*B*d.y-3*x.y*p.y*h.y*B*d.x+2*x.y*h.x*I*c.x*d.x+6*x.y*g.x*c.x*v.x*T-3*p.x*w.x*h.x*T*d.y+2*p.x*w.x*h.y*T*d.x+p.x*p.y*I*c.x*d.x-3*p.x*h.x*w.y*T*d.x-3*p.x*h.x*g.x*T*v.y-3*p.x*h.x*g.y*v.x*T+2*p.x*g.x*h.y*v.x*T+4*w.x*p.y*h.x*T*d.x+4*p.y*h.x*g.x*v.x*T-2*x.x*N*h.y*c.y*d.y-6*x.y*w.x*B*c.y*d.y-6*x.y*w.y*B*c.y*d.x-6*x.y*g.x*B*c.y*v.y-2*x.y*N*h.y*c.x*d.y-2*x.y*N*h.y*c.y*d.x-6*x.y*B*g.y*v.x*c.y-p.x*p.y*N*c.y*d.y-2*p.x*P*c.x*c.y*d.x+3*w.x*p.y*h.y*B*d.y-2*w.x*h.x*I*c.x*d.y-2*w.x*h.x*I*c.y*d.x-6*w.x*w.y*c.x*T*d.x-6*w.x*g.x*c.x*T*v.y-6*w.x*c.x*g.y*v.x*T+3*p.y*w.y*h.y*B*d.x+3*p.y*g.x*h.y*B*v.y+3*p.y*h.y*B*g.y*v.x-2*h.x*w.y*I*c.x*d.x-2*h.x*g.x*I*c.x*v.y-2*h.x*g.x*I*v.x*c.y-2*h.x*I*c.x*g.y*v.x-6*w.y*g.x*c.x*v.x*T-P*h.x*h.y*c.x*d.x+2*w.x*N*h.y*c.y*d.y+6*w.y*B*g.y*v.x*c.y+2*_*p.y*c.x*c.y*d.y+_*h.x*h.y*c.y*d.y+2*N*w.y*h.y*c.y*d.x+2*N*g.x*h.y*c.y*v.y+2*N*h.y*g.y*v.x*c.y+V*R+3*k*R*d.x-3*E*O*d.y+3*A*R*d.x+L*B*d.x-C*T*d.y-p.x*P*B*d.y+_*p.y*T*d.x-3*k*c.x*T*d.y+3*E*B*c.y*d.x-_*I*c.x*d.y+P*N*c.y*d.x-3*G*c.x*g.y*T-3*A*c.x*T*d.y+3*F*B*c.y*d.x+p.x*h.x*c.x*c.y*(6*w.y*d.y+6*g.y*v.y)+S*c.y*(-2*w.y*d.y-2*g.y*v.y)+x.y*O*(6*w.y*d.y+6*g.y*v.y)+p.y*h.x*B*(-2*w.y*d.y-2*g.y*v.y)+N*h.y*c.x*(2*w.y*d.y+2*g.y*v.y)+p.x*h.y*B*(-4*w.y*d.y-4*g.y*v.y)+x.x*B*c.y*(-6*w.y*d.y-6*g.y*v.y)+w.x*B*c.y*(6*w.y*d.y+6*g.y*v.y)+g.x*B*c.y*(6*w.y*v.y+3*W)+O*(-2*w.y*g.y*v.y-F*d.y-g.y*(2*w.y*v.y+W)-w.y*(2*w.y*d.y+2*g.y*v.y)),-x.x*p.x*h.y*c.x*c.y*v.y+x.x*p.y*h.x*c.x*c.y*v.y+6*x.x*p.y*h.y*c.x*v.x*c.y-6*x.y*p.x*h.x*c.x*c.y*v.y-x.y*p.x*h.y*c.x*v.x*c.y+x.y*p.y*h.x*c.x*v.x*c.y+p.x*p.y*h.x*h.y*c.x*v.y-p.x*p.y*h.x*h.y*v.x*c.y+p.x*w.x*h.y*c.x*c.y*v.y+p.x*w.y*h.y*c.x*v.x*c.y+p.x*g.x*h.y*c.x*g.y*c.y-w.x*p.y*h.x*c.x*c.y*v.y-6*w.x*p.y*h.y*c.x*v.x*c.y-p.y*h.x*w.y*c.x*v.x*c.y-p.y*h.x*g.x*c.x*g.y*c.y-6*x.x*w.x*v.x*R-2*x.x*j*c.x*v.x+2*w.x*j*c.x*v.x+2*x.y*S*c.y*v.y-6*x.x*x.y*c.x*v.x*T+3*x.x*p.x*h.x*T*v.y-2*x.x*p.x*h.y*v.x*T-4*x.x*p.y*h.x*v.x*T+3*x.y*p.x*h.x*v.x*T+6*x.x*x.y*B*c.y*v.y+6*x.x*w.x*c.x*T*v.y-3*x.x*p.y*h.y*B*v.y+2*x.x*h.x*I*c.x*v.y+2*x.x*h.x*I*v.x*c.y+6*x.x*w.y*c.x*v.x*T+6*x.x*g.x*c.x*g.y*T+4*x.y*p.x*h.y*B*v.y+6*x.y*w.x*c.x*v.x*T+2*x.y*p.y*h.x*B*v.y-3*x.y*p.y*h.y*B*v.x+2*x.y*h.x*I*c.x*v.x-3*p.x*w.x*h.x*T*v.y+2*p.x*w.x*h.y*v.x*T+p.x*p.y*I*c.x*v.x-3*p.x*h.x*w.y*v.x*T-3*p.x*h.x*g.x*g.y*T+4*w.x*p.y*h.x*v.x*T-2*x.x*N*h.y*c.y*v.y-6*x.y*w.x*B*c.y*v.y-6*x.y*w.y*B*v.x*c.y-6*x.y*g.x*B*g.y*c.y-2*x.y*N*h.y*c.x*v.y-2*x.y*N*h.y*v.x*c.y-p.x*p.y*N*c.y*v.y-2*p.x*P*c.x*v.x*c.y+3*w.x*p.y*h.y*B*v.y-2*w.x*h.x*I*c.x*v.y-2*w.x*h.x*I*v.x*c.y-6*w.x*w.y*c.x*v.x*T-6*w.x*g.x*c.x*g.y*T+3*p.y*w.y*h.y*B*v.x+3*p.y*g.x*h.y*B*g.y-2*h.x*w.y*I*c.x*v.x-2*h.x*g.x*I*c.x*g.y-P*h.x*h.y*c.x*v.x+2*w.x*N*h.y*c.y*v.y-3*p.y*G*h.y*c.x*c.y+6*w.y*g.x*B*g.y*c.y+2*_*p.y*c.x*c.y*v.y+_*h.x*h.y*c.y*v.y+2*N*w.y*h.y*v.x*c.y+2*N*g.x*h.y*g.y*c.y-3*x.x*G*R+3*w.x*G*R+3*k*v.x*R-3*E*O*v.y+3*A*v.x*R+G*j*c.x+L*B*v.x-C*T*v.y+3*x.y*G*c.x*T-p.x*P*B*v.y+p.x*G*h.y*T+2*p.y*h.x*G*T+_*p.y*v.x*T-h.x*G*I*c.y-3*w.y*G*c.x*T-3*k*c.x*T*v.y+3*E*B*v.x*c.y-_*I*c.x*v.y+P*N*v.x*c.y-3*A*c.x*T*v.y+3*F*B*v.x*c.y+N*h.y*c.x*(2*w.y*v.y+W)+p.x*h.x*c.x*c.y*(6*w.y*v.y+3*W)+S*c.y*(-2*w.y*v.y-W)+x.y*O*(6*w.y*v.y+3*W)+p.y*h.x*B*(-2*w.y*v.y-W)+p.x*h.y*B*(-4*w.y*v.y-2*W)+x.x*B*c.y*(-6*w.y*v.y-3*W)+w.x*B*c.y*(6*w.y*v.y+3*W)+O*(-2*w.y*W-F*v.y-w.y*(2*w.y*v.y+W)),-x.x*p.x*h.y*c.x*g.y*c.y+x.x*p.y*h.x*c.x*g.y*c.y+6*x.x*p.y*g.x*h.y*c.x*c.y-6*x.y*p.x*h.x*c.x*g.y*c.y-x.y*p.x*g.x*h.y*c.x*c.y+x.y*p.y*h.x*g.x*c.x*c.y-p.x*p.y*h.x*g.x*h.y*c.y+p.x*p.y*h.x*h.y*c.x*g.y+p.x*w.x*h.y*c.x*g.y*c.y+6*p.x*h.x*w.y*c.x*g.y*c.y+p.x*w.y*g.x*h.y*c.x*c.y-w.x*p.y*h.x*c.x*g.y*c.y-6*w.x*p.y*g.x*h.y*c.x*c.y-p.y*h.x*w.y*g.x*c.x*c.y-6*x.x*w.x*g.x*R-2*x.x*g.x*j*c.x+6*x.y*w.y*O*g.y+2*w.x*g.x*j*c.x+2*x.y*S*g.y*c.y-2*S*w.y*g.y*c.y-6*x.x*x.y*g.x*c.x*T+3*x.x*p.x*h.x*g.y*T-2*x.x*p.x*g.x*h.y*T-4*x.x*p.y*h.x*g.x*T+3*x.y*p.x*h.x*g.x*T+6*x.x*x.y*B*g.y*c.y+6*x.x*w.x*c.x*g.y*T-3*x.x*p.y*h.y*B*g.y+2*x.x*h.x*g.x*I*c.y+2*x.x*h.x*I*c.x*g.y+6*x.x*w.y*g.x*c.x*T+4*x.y*p.x*h.y*B*g.y+6*x.y*w.x*g.x*c.x*T+2*x.y*p.y*h.x*B*g.y-3*x.y*p.y*g.x*h.y*B+2*x.y*h.x*g.x*I*c.x-3*p.x*w.x*h.x*g.y*T+2*p.x*w.x*g.x*h.y*T+p.x*p.y*g.x*I*c.x-3*p.x*h.x*w.y*g.x*T+4*w.x*p.y*h.x*g.x*T-6*x.x*w.y*B*g.y*c.y-2*x.x*N*h.y*g.y*c.y-6*x.y*w.x*B*g.y*c.y-6*x.y*w.y*g.x*B*c.y-2*x.y*N*g.x*h.y*c.y-2*x.y*N*h.y*c.x*g.y-p.x*p.y*N*g.y*c.y-4*p.x*w.y*h.y*B*g.y-2*p.x*P*g.x*c.x*c.y+3*w.x*p.y*h.y*B*g.y-2*w.x*h.x*g.x*I*c.y-2*w.x*h.x*I*c.x*g.y-6*w.x*w.y*g.x*c.x*T-2*p.y*h.x*w.y*B*g.y+3*p.y*w.y*g.x*h.y*B-2*h.x*w.y*g.x*I*c.x-P*h.x*g.x*h.y*c.x+6*w.x*w.y*B*g.y*c.y+2*w.x*N*h.y*g.y*c.y+2*_*p.y*c.x*g.y*c.y+_*h.x*h.y*g.y*c.y+2*N*w.y*g.x*h.y*c.y+2*N*w.y*h.y*c.x*g.y+3*k*g.x*R-3*E*O*g.y+3*A*g.x*R+L*g.x*B-C*g.y*T-3*F*O*g.y-p.x*P*B*g.y+_*p.y*g.x*T-3*k*c.x*g.y*T+3*E*g.x*B*c.y-_*I*c.x*g.y+P*N*g.x*c.y-3*A*c.x*g.y*T+3*F*g.x*B*c.y,x.x*x.y*p.x*h.y*c.x*c.y-x.x*x.y*p.y*h.x*c.x*c.y+x.x*p.x*p.y*h.x*h.y*c.y-x.y*p.x*p.y*h.x*h.y*c.x-x.x*p.x*w.y*h.y*c.x*c.y+6*x.x*w.x*p.y*h.y*c.x*c.y+x.x*p.y*h.x*w.y*c.x*c.y-x.y*p.x*w.x*h.y*c.x*c.y-6*x.y*p.x*h.x*w.y*c.x*c.y+x.y*w.x*p.y*h.x*c.x*c.y-p.x*w.x*p.y*h.x*h.y*c.y+p.x*p.y*h.x*w.y*h.y*c.x+p.x*w.x*w.y*h.y*c.x*c.y-w.x*p.y*h.x*w.y*c.x*c.y-2*x.x*w.x*j*c.x+2*x.y*S*w.y*c.y-3*x.x*x.y*p.x*h.x*T-6*x.x*x.y*w.x*c.x*T+3*x.x*x.y*p.y*h.y*B-2*x.x*x.y*h.x*I*c.x-2*x.x*p.x*w.x*h.y*T-x.x*p.x*p.y*I*c.x+3*x.x*p.x*h.x*w.y*T-4*x.x*w.x*p.y*h.x*T+3*x.y*p.x*w.x*h.x*T+6*x.x*x.y*w.y*B*c.y+2*x.x*x.y*N*h.y*c.y+2*x.x*p.x*P*c.x*c.y+2*x.x*w.x*h.x*I*c.y+6*x.x*w.x*w.y*c.x*T-3*x.x*p.y*w.y*h.y*B+2*x.x*h.x*w.y*I*c.x+x.x*P*h.x*h.y*c.x+x.y*p.x*p.y*N*c.y+4*x.y*p.x*w.y*h.y*B-3*x.y*w.x*p.y*h.y*B+2*x.y*w.x*h.x*I*c.x+2*x.y*p.y*h.x*w.y*B+p.x*w.x*p.y*I*c.x-3*p.x*w.x*h.x*w.y*T-2*x.x*N*w.y*h.y*c.y-6*x.y*w.x*w.y*B*c.y-2*x.y*w.x*N*h.y*c.y-2*x.y*_*p.y*c.x*c.y-x.y*_*h.x*h.y*c.y-2*x.y*N*w.y*h.y*c.x-2*p.x*w.x*P*c.x*c.y-p.x*p.y*N*w.y*c.y+3*w.x*p.y*w.y*h.y*B-2*w.x*h.x*w.y*I*c.x-w.x*P*h.x*h.y*c.x+3*E*p.x*h.x*c.x*c.y+3*p.x*h.x*F*c.x*c.y+2*w.x*N*w.y*h.y*c.y-3*k*p.y*h.y*c.x*c.y+2*_*p.y*w.y*c.x*c.y+_*h.x*w.y*h.y*c.y-3*A*p.y*h.y*c.x*c.y-b*R+M*O+z*R-D*O-3*x.x*A*R-x.x*L*B+3*k*w.x*R+x.y*C*T+3*x.y*F*O+w.x*L*B+k*j*c.x-3*E*w.y*O-E*S*c.y+A*j*c.x-C*w.y*T-S*F*c.y-x.x*_*p.y*T+x.y*p.x*P*B-3*x.x*E*B*c.y-x.x*P*N*c.y+x.y*_*I*c.x-p.x*P*w.y*B+3*k*x.y*c.x*T+k*p.x*h.y*T+2*k*p.y*h.x*T-2*E*p.x*h.y*B-E*p.y*h.x*B+_*w.x*p.y*T-3*x.x*F*B*c.y+3*x.y*A*c.x*T+p.x*A*h.y*T-2*p.x*F*h.y*B+w.x*P*N*c.y-p.y*h.x*F*B-k*h.x*I*c.y-3*k*w.y*c.x*T+3*E*w.x*B*c.y+E*N*h.y*c.x-_*w.y*I*c.x+2*A*p.y*h.x*T+3*w.x*F*B*c.y-A*h.x*I*c.y-3*A*w.y*c.x*T+N*F*h.y*c.x);var J=Q.getRootsInInterval(0,1);ct(J);for(var K=0;K<J.length;K++){var tt=J[K];var et=new ut(c.x,h.x,p.x,x.x-w.x-tt*g.x-tt*tt*v.x-tt*tt*tt*d.x).getRoots();var rt=new ut(c.y,h.y,p.y,x.y-w.y-tt*g.y-tt*tt*v.y-tt*tt*tt*d.y).getRoots();if(et.length>0&&rt.length>0){var nt=1e-4;t:for(var it=0;it<et.length;it++){var ot=et[it];if(0<=ot&&ot<=1){for(var at=0;at<rt.length;at++){if(Math.abs(ot-rt[at])<nt){var st=d.multiply(tt*tt*tt).add(v.multiply(tt*tt).add(g.multiply(tt).add(w)));m.points.push(new yt(st.x,st.y));break t}}}}}}return m};var ht=function(t,e,r,n,i,o,a){var s,l,y,f;var u,c,h,p;var x=new lt;s=t.multiply(-1);l=e.multiply(3);y=r.multiply(-3);f=s.add(l.add(y.add(n)));u=new ft(f.x,f.y);s=t.multiply(3);l=e.multiply(-6);y=r.multiply(3);f=s.add(l.add(y));c=new ft(f.x,f.y);s=t.multiply(-3);l=e.multiply(3);y=s.add(l);h=new ft(y.x,y.y);p=new ft(t.x,t.y);var d=o*o;var v=a*a;var g=new ut(u.x*u.x*v+u.y*u.y*d,2*(u.x*c.x*v+u.y*c.y*d),2*(u.x*h.x*v+u.y*h.y*d)+c.x*c.x*v+c.y*c.y*d,2*u.x*v*(p.x-i.x)+2*u.y*d*(p.y-i.y)+2*(c.x*h.x*v+c.y*h.y*d),2*c.x*v*(p.x-i.x)+2*c.y*d*(p.y-i.y)+h.x*h.x*v+h.y*h.y*d,2*h.x*v*(p.x-i.x)+2*h.y*d*(p.y-i.y),p.x*p.x*v-2*p.y*i.y*d-2*p.x*i.x*v+p.y*p.y*d+i.x*i.x*v+i.y*i.y*d-d*v);var w=g.getRootsInInterval(0,1);ct(w);for(var m=0;m<w.length;m++){var k=w[m];var b=u.multiply(k*k*k).add(c.multiply(k*k).add(h.multiply(k).add(p)));x.points.push(new yt(b.x,b.y))}return x};var pt=function(t,e,r,n,i,o){var a,s,l,y;var f,u,c,h;var p;var x;var d=i.min(o);var v=i.max(o);var g=new lt;a=t.multiply(-1);s=e.multiply(3);l=r.multiply(-3);y=a.add(s.add(l.add(n)));f=new ft(y.x,y.y);a=t.multiply(3);s=e.multiply(-6);l=r.multiply(3);y=a.add(s.add(l));u=new ft(y.x,y.y);a=t.multiply(-3);s=e.multiply(3);l=a.add(s);c=new ft(l.x,l.y);h=new ft(t.x,t.y);x=new ft(i.y-o.y,o.x-i.x);p=i.x*o.y-o.x*i.y;roots=new ut(x.dot(f),x.dot(u),x.dot(c),x.dot(h)+p).getRoots();for(var w=0;w<roots.length;w++){var m=roots[w];if(0<=m&&m<=1){var k=t.lerp(e,m);var b=e.lerp(r,m);var E=r.lerp(n,m);var M=k.lerp(b,m);var _=b.lerp(E,m);var C=M.lerp(_,m);if(i.x==o.x){if(d.y<=C.y&&C.y<=v.y){g.appendPoint(C)}}else if(i.y==o.y){if(d.x<=C.x&&C.x<=v.x){g.appendPoint(C)}}else if(d.x<=C.x&&C.x<=v.x&&d.y<=C.y&&C.y<=v.y){g.appendPoint(C)}}}return g};rt.intersectBezier2Bezier2=nt;rt.intersectBezier2Bezier3=it;rt.intersectBezier2Ellipse=ot;rt.intersectBezier2Line=at;rt.intersectBezier3Bezier3=st;rt.intersectBezier3Ellipse=ht;rt.intersectBezier3Line=pt;var xt=m.Point2D;var dt=m.Vector2D;var vt=m.Matrix2D;var gt=_.Polynomial;var wt=tt.TYPE;function mt(t,e){var r=t[0]*e[1]-e[0]*t[1];var n=t[0]*e[2]-e[0]*t[2];var i=t[0]*e[3]-e[0]*t[3];var o=t[0]*e[4]-e[0]*t[4];var a=t[0]*e[5]-e[0]*t[5];var s=t[1]*e[2]-e[1]*t[2];var l=t[1]*e[4]-e[1]*t[4];var y=t[1]*e[5]-e[1]*t[5];var f=t[2]*e[3]-e[2]*t[3];var u=t[3]*e[4]-e[3]*t[4];var c=t[3]*e[5]-e[3]*t[5];var h=y+u;var p=l-f;return new gt(r*s-n*n,r*p+i*s-2*n*o,r*h+i*p-o*o-2*n*a,r*c+i*h-2*o*a,i*c-a*a)}function kt(t,e,r,n,i,o,a,s){if(t.points.length===0)return t;if(s&&!s.isIdentity())var l=s.inverse();var y=[];var f=new dt(1,0);var u=Math.PI*2;var c=a<0;var h=Math.abs(a)>Math.PI;var p=(new vt).scaleNonUniform(1,n/r).rotate(o);var x=(new vt).scaleNonUniform(1,n/r).rotate(o+a);o=(f.angleBetween(f.transform(p))+u)%u;a=f.transform(p).angleBetween(f.transform(x));a=(h?u-Math.abs(a):Math.abs(a))*(c?-1:1);var d=(new vt).rotate(i).multiply(p);for(var v=0,g,w;v<t.points.length;v++){g=t.points[v];w=f.transform(d).angleBetween(dt.fromPoints(e,l?g.transform(l):g));if(a>=0){w=(w+2*u)%u;if(w<=a)y.push(g)}else{w=(w-2*u)%u;if(w>=a)y.push(g)}}t.points=y;return t}function bt(t,e){if(t.length===0||e.length===0)return;var r=function(t,e){if(t<e.x)t=e.x;if(t<e.y)t=e.y;return t};var n=t.reduce(r,0);n=e.reduce(r,n);var i=1e-15;var o=100*n*i*Math.SQRT2;var a;for(var s=0;s<t.length;){for(a=0;a<e.length;a++){if(t[s].distanceFrom(e[a])<=o){t.splice(s,1);break}}if(a==e.length)s++}}var Et={intersectPathShape:function(t,e,r,n){var i=new lt;var o=t.params[0];var a;for(var s,l=0;l<o.length;l++){s=_t(o[l],e,r,n);if(a){bt(a.points,s.points);i.appendPoints(a.points)}a=s}if(a){i.appendPoints(a.points)}return i},intersectLinesShape:function(t,r,n,i,e){var o=tt.TYPE;var a=t.params[0];var s=new tt(o.LINE,[0,0]);var l=new lt;var y,f;var u=function(t,e){s.params[0]=a[t];s.params[1]=a[e];y=_t(s,r,n,i);bt(y.points,[a[e]]);l.appendPoints(y.points)};for(f=0;f<a.length-1;f++){u(f,f+1)}if(typeof e!=="undefined"&&e||t.type===o.RECT||t.type===o.POLYGON){u(a.length-1,0)}return l},intersectArcShape:function(t,e,r,n){r=r||vt.IDENTITY;n=n||vt.IDENTITY;var i=t.params[0],o=t.params[1],a=t.params[2],s=t.params[3],l=t.params[4],y=t.params[5];var f;if(r.isIdentity()&&s===0){f=_t(tt.newEllipse(i,o,a),e,r,n)}else{r=r.multiply(vt.IDENTITY.translate(i.x,i.y).rotate(s));i=new xt(0,0);s=0;f=_t(tt.newEllipse(i,o,a),e,r,n)}f=kt(f,i,o,a,s,l,y,r);return f},intersectEllipseEllipse:function(t,e,r,n,i,o){var a=[r*r,0,e*e,-2*r*r*t.x,-2*e*e*t.y,r*r*t.x*t.x+e*e*t.y*t.y-e*e*r*r];var s=[o*o,0,i*i,-2*o*o*n.x,-2*i*i*n.y,o*o*n.x*n.x+i*i*n.y*n.y-i*i*o*o];var l=mt(a,s);var y=l.getRoots();var f=.001;var u=(a[0]*a[0]+2*a[1]*a[1]+a[2]*a[2])*f;var c=(s[0]*s[0]+2*s[1]*s[1]+s[2]*s[2])*f;var h=new lt;var p;var x=function(t,e,r){return Math.max(e,Math.min(r,t))};for(p=0;p<y.length;p++){y[p]=x(y[p],t.y-r,t.y+r);y[p]=x(y[p],n.y-o,n.y+o)}y.sort(function(t,e){return t-e});var d=[];for(var v=0;v<y.length;v++){var g=new gt(a[0],a[3]+y[v]*a[1],a[5]+y[v]*(a[4]+y[v]*a[2]));var w=1e-15;if(Math.abs(g.coefs[0])<10*w*Math.abs(g.coefs[2]))g.coefs[0]=0;var m=g.getRoots();d.push(0);for(var k=0;k<m.length;k++){var b=(a[0]*m[k]+a[1]*y[v]+a[3])*m[k]+(a[2]*y[v]+a[4])*y[v]+a[5];if(Math.abs(b)<u){b=(s[0]*m[k]+s[1]*y[v]+s[3])*m[k]+(s[2]*y[v]+s[4])*y[v]+s[5];if(Math.abs(b)<c){h.appendPoint(new xt(m[k],y[v]));d[v]+=1}}}}if(h.points.length<=0)return h;var E=h.points;if(E.length==8){E=E.splice(0,6);E.splice(2,2)}else if(E.length==7){E=E.splice(0,6);E.splice(2,2);E.splice(d.indexOf(1),1)}else if(E.length==6){E.splice(2,2);if(d.indexOf(0)>-1){if(E[0].distanceFrom(E[1])<E[2].distanceFrom(E[3])){E.splice(0,1)}else{E.splice(2,1)}}else if(d[0]==d[3]){E.splice(1,2)}}else if(E.length==4){if(y.length==2||y.length==4&&(d[0]==2&&d[1]==2||d[2]==2&&d[3]==2)){E.splice(2,2)}}else if(E.length==3||E.length==5){p=d.indexOf(2);if(p>-1){if(E.length==3)p=p%2;var M=p+(p%2?-1:2);var _,C,P;_=E[p].distanceFrom(E[p+1]);C=E[p].distanceFrom(E[M]);P=E[p+1].distanceFrom(E[M]);if(_<C&&_<P){E.splice(p,1)}else{E.splice(M,1)}}}var L=l.zeroErrorEstimate();L*=100*Math.SQRT2;for(p=0;p<E.length-1;){if(E[p].distanceFrom(E[p+1])<L){E.splice(p+1,1);continue}p++}h.points=E;return h},intersectEllipseLine:function(t,e,r,n,i){var o;var a=new dt(n.x,n.y);var s=dt.fromPoints(n,i);var l=new dt(t.x,t.y);var y=a.subtract(l);var f=new dt(s.x/(e*e),s.y/(r*r));var u=new dt(y.x/(e*e),y.y/(r*r));var c=s.dot(f);var h=s.dot(u);var t=y.dot(u)-1;var p=h*h-c*t;var x=1e-15;var d=10*Math.max(Math.abs(c),Math.abs(h),Math.abs(t))*x;if(Math.abs(p)<d){p=0}if(p<0){o=new lt("Outside")}else if(p>0){var v=Math.sqrt(p);var g=(-h-v)/c;var w=(-h+v)/c;w=w>1?w-x:w<0?w+x:w;g=g>1?g-x:g<0?g+x:g;if((g<0||1<g)&&(w<0||1<w)){if(g<0&&w<0||g>1&&w>1)o=new lt("Outside");else o=new lt("Inside")}else{o=new lt;if(0<=g&&g<=1)o.appendPoint(n.lerp(i,g));if(0<=w&&w<=1)o.appendPoint(n.lerp(i,w))}}else{var m=-h/c;if(0<=m&&m<=1){o=new lt;o.appendPoint(n.lerp(i,m))}else{o=new lt("Outside")}}return o},intersectLineLine:function(t,e,r,n){var i;var o=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x);var a=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x);var s=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(s!==0){var l=o/s;var y=a/s;if(0<=l&&l<=1&&0<=y&&y<=1){i=new lt;i.points.push(new xt(t.x+l*(e.x-t.x),t.y+l*(e.y-t.y)))}else{i=new lt}}else{if(o===0||a===0){i=new lt("Coincident")}else{i=new lt("Parallel")}}return i},intersectRayRay:function(t,e,r,n){var i;var o=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x);var a=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x);var s=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(s!==0){var l=o/s;i=new lt;i.points.push(new xt(t.x+l*(e.x-t.x),t.y+l*(e.y-t.y)))}else{if(o===0||a===0){i=new lt("Coincident")}else{i=new lt("Parallel")}}return i}};var Mt={};Mt[wt.PATH]=Et.intersectPathShape;Mt[wt.POLYLINE]=Et.intersectLinesShape;Mt[wt.POLYGON]=Et.intersectLinesShape;Mt[wt.RECT]=Et.intersectLinesShape;Mt[wt.ROUNDRECT]=Et.intersectPathShape;Mt[wt.ARC]=Et.intersectArcShape;function _t(t,e,r,n){var i=t;var o=e;var a;if(i!==null&&o!==null){var s;if(s=Mt[i.type]){a=s(i,o,r,n)}else if(s=Mt[o.type]){a=s(o,i,n,r)}else{var l;var y,f,u,c;if(i.type===wt.CIRCLE){y=[i.params[0],i.params[1],i.params[1]];u=wt.ELLIPSE}else{y=i.params.slice();u=i.type}if(o.type===wt.CIRCLE){f=[o.params[0],o.params[1],o.params[1]];c=wt.ELLIPSE}else{f=o.params.slice();c=o.type}var h=1;var p;var x=r instanceof vt&&n instanceof vt;if(x){if(u===wt.ELLIPSE&&c===wt.ELLIPSE){var d,v;var g;var w=y[0],m=y[1],k=y[2];var b=f[0],E=f[1],M=f[2];r=r.multiply(vt.IDENTITY.translate(w.x,w.y).scaleNonUniform(m/h,k/h));w=new xt(0,0);m=k=h;n=n.multiply(vt.IDENTITY.translate(b.x,b.y).scaleNonUniform(E,M));b=new xt(0,0);E=M=1;g=r.inverse().multiply(n).getDecomposition();d=g.rotation.inverse().multiply(g.translation.inverse());v=g.scale;E=v.a;M=v.d;w=w.transform(d);p=r.multiply(d.inverse());y[0]=w;y[1]=m;y[2]=k;f[0]=b;f[1]=E;f[2]=M}else{var _=function(t,e,r){var n=function(t){e[t]=e[t].transform(r)};if(t===wt.LINE){n(0);n(1)}else if(t===wt.BEZIER2){n(0);n(1);n(2)}else if(t===wt.BEZIER3){n(0);n(1);n(2);n(3)}else{throw new Error("Unknown shape: "+t)}};if(c===wt.ELLIPSE){var C;C=f;f=y;y=C;C=c;c=u;u=C;C=n;n=r;r=C}if(u===wt.ELLIPSE){var w=y[0],m=y[1],k=y[2];r=r.multiply(vt.IDENTITY.translate(w.x,w.y).scaleNonUniform(m/h,k/h));w=new xt(0,0);m=k=h;v=r.inverse().multiply(n);_(c,f,v);p=r;y[0]=w;y[1]=m;y[2]=k}else{_(u,y,r);_(c,f,n);p=vt.IDENTITY}}}if(u<c){s="intersect"+u+c;l=y.concat(f)}else{s="intersect"+c+u;l=f.concat(y)}a=Et[s].apply(null,l);if(x){for(var P=0;P<a.points.length;P++){a.points[P]=a.points[P].transform(p)}}}}else{a=new lt}return a}for(var Ct in rt){if(rt.hasOwnProperty(Ct)){Et[Ct]=rt[Ct]}}var Pt=_t;var Lt=Pt;var Nt=tt.newShape;var St=function(){function n(t,e,r){if(r){this.start=t.toRef(r);this.end=e.toRef(r);this.ref=r}else if(t.ref===e.ref){this.start=t;this.end=e;this.ref=t.ref}else{if(!t.ref){throw"Start point has no reference point and no vector reference point is specified."}if(!e.ref){throw"End point has no reference point and no vector reference point is specified."}throw"Start and end reference points do not match and vector reference point is not specified."}}n.prototype.toRef=function(t){if(this.ref===t){return this}else{return new n(this.start,this.end,t)}};n.prototype.toString=function(){return"["+this.start.toString()+"]â†’["+this.end.toString()+"]"+(this.ref?" + "+this.ref.getAbsTransformation().toString():"")};n.prototype.invert=function(){return new n(this.end,this.start,this.ref)};n.prototype.size=function(){var t=this.end.x-this.start.x;var e=this.end.y-this.start.y;return Math.sqrt(t*t+e*e)};n.prototype.angleRad=function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)};n.prototype.angleDeg=function(){return 180*Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)/Math.PI};n.prototype.addToSize=function(t){var e=this.size()+t;var r=this.angleRad();return new n(this.start,new B(this.start.x+e*Math.cos(r),this.start.y+e*Math.sin(r),this.start.ref),this.ref)};n.prototype.getPointFromStart=function(t){var e=this.angleRad();return new B(this.start.x+t*Math.cos(e),this.start.y+t*Math.sin(e),this.ref)};n.prototype.getPointFromEnd=function(t){var e=this.angleRad();return new B(this.end.x-t*Math.cos(e),this.end.y-t*Math.sin(e),this.ref)};return n}();var It=function(){function n(){this.paddingEm=.75;this.marginEm=2;this.minHeightEm=2;this.minWidthEm=2;this.strokeWidth=1.5}n.prototype.render=function(t,e,r){var n=e.attr("class");var i=e.getPosition().toRef(e.graph);var o=e.attr("tooltip");return t.g({class:n?"node "+n:"node",key:e.id,transform:"translate("+i.x+","+i.y+")",opacity:e.attr("opacity")},[this.renderElements(t,e),o!=""?t.title([],[o]):null,r&&e.hasNestedGraph()?r(e.getNestedGraph()):null])};n.prototype.renderElements=function(t,e){return[this.renderLabel(t,e)]};n.prototype.renderLabel=function(t,e){var r=e.getSize();return t.text({"text-anchor":"middle","font-size":"11pt","font-family":"sans-serif",fill:e.attr("color"),x:0,y:e.hasNestedGraph()?-r.height/2+1.25*this.get1em(e):"0.33em"},[e.attr("label",e.id)])};n.prototype.getConnectorVector=function(t,e,r){var n=e.toRef(t.graph);var i=t.getPosition().toRef(t.graph);var o=Nt("line",{x1:n.x-i.x,y1:n.y-i.y,x2:0,y2:0});var a=this.getSvgIntersectionsShapes(t);var s;for(var l=0,y=a;l<y.length;l++){var f=y[l];var u=Nt(f[0],f[1]);var c=Lt(o,u);for(var h=0,p=c.points;h<p.length;h++){var x=p[h];if(x){var d=new St(n,new B(x.x+i.x,x.y+i.y,t.graph),t.graph);if(!s||d.size<s.size){s=d}}}}if(s){return s}else{return new St(e,t.getPosition(),t.graph)}};n.prototype.getSvgIntersectionsShapes=function(t){return[]};n.prototype.getLabelSize=function(t){var e=this.get1em(t);var r=2*this.getPadding(t);return new o(Math.max(this.getTextWidth(t),this.minWidthEm*e)+r,Math.max(e,this.minHeightEm*e)+r)};n.prototype.getMinSize=function(t){return this.getLabelSize(t)};n.prototype.getNestedGraphTransformation=function(t){var e=t.getPosition();if(t.hasNestedGraph()){var r=t.getNestedGraph().getBoundingBox();return new a(e.x-(r.tlx+r.brx)/2,e.y-(r.tly+r.bry)/2)}else{return new a(e.x,e.y)}};n.prototype.getTextWidth=function(t){return this.getTextMetrics(t.attr("label",t.id)).width};n.prototype.getPadding=function(t){return this.paddingEm*this.get1em(t)};n.prototype.getMargin=function(t){return this.marginEm*this.get1em(t)};n.prototype.getTextMetrics=function(t){if(!n.cacheTextMeasureCanvasContext){var e=document.createElement("canvas");var r=document.createDocumentFragment();r.appendChild(e);n.cacheTextMeasureCanvasContext=e.getContext("2d");n.cacheTextMeasureCanvasContext.font="11pt sans-serif"}return n.cacheTextMeasureCanvasContext.measureText(t)};n.prototype.get1em=function(t){if(!n.cache1emWidth){n.cache1emWidth=this.getTextMetrics("M").width}return n.cache1emWidth};n.prototype.parseSvgString=function(t){var e=new DOMParser;return e.parseFromString('<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>","image/svg+xml").documentElement.children[0]};n.cacheTextMeasureCanvasContext=null;n.cache1emWidth=null;return n}();var jt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.getSize().width;return[t.circle({r:r/2,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),this.renderLabel(t,e)]};e.prototype.getConnectorVector=function(t,e,r){var n=t.getSize().width;return new St(e,t.getPosition(),t.getPosition().ref).addToSize(-n/2)};e.prototype.getMinSize=function(t){return new o(this.getLabelSize(t).getLonger())};return e}(It);var Bt=function(){function t(t,e){this.path="";this.scaleFactor=1;if(t instanceof B){this.Mp(t)}else if(t!==undefined&&e!==undefined){this.M(t,e)}}t.prototype.toString=function(){return this.path};t.prototype.num=function(t){return this.scaleFactor==1?t.toFixed(1):(this.scaleFactor*t).toFixed(1)};t.prototype.scale=function(t){this.scaleFactor=t;return this};t.prototype.Z=function(){this.path+=" Z";return this};t.prototype.z=function(){this.path+=" z";return this};t.prototype.M=function(t,e){this.path+=(this.path===""?"M":" M")+this.num(t)+","+this.num(e);return this};t.prototype.m=function(t,e){this.path+=(this.path===""?"m":" m")+this.num(t)+","+this.num(e);return this};t.prototype.L=function(t,e){this.path+=" L"+this.num(t)+","+this.num(e);return this};t.prototype.l=function(t,e){this.path+=" l"+this.num(t)+","+this.num(e);return this};t.prototype.H=function(t){this.path+=" H"+this.num(t);return this};t.prototype.h=function(t){this.path+=" h"+this.num(t);return this};t.prototype.V=function(t){this.path+=" V"+this.num(t);return this};t.prototype.v=function(t){this.path+=" v"+this.num(t);return this};t.prototype.C=function(t,e,r,n,i,o){this.path+=" C"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n)+" "+this.num(i)+","+this.num(o);return this};t.prototype.c=function(t,e,r,n,i,o){this.path+=" c"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n)+" "+this.num(i)+","+this.num(o);return this};t.prototype.S=function(t,e,r,n){this.path+=" S"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n);return this};t.prototype.s=function(t,e,r,n){this.path+=" s"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n);return this};t.prototype.Q=function(t,e,r,n){this.path+=" Q"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n);return this};t.prototype.q=function(t,e,r,n){this.path+=" q"+this.num(t)+","+this.num(e)+" "+this.num(r)+","+this.num(n);return this};t.prototype.T=function(t,e){this.path+=" T"+this.num(t)+","+this.num(e);return this};t.prototype.t=function(t,e){this.path+=" t"+this.num(t)+","+this.num(e);return this};t.prototype.A=function(t,e,r,n,i,o,a){this.path+=" A"+this.num(t)+","+this.num(e)+" "+r.toFixed(2)+" "+(n?"1":"0")+" "+(i?"1":"0")+" "+this.num(o)+","+this.num(a);return this};t.prototype.a=function(t,e,r,n,i,o,a){this.path+=" a"+this.num(t)+","+this.num(e)+" "+r.toFixed(2)+" "+(n?"1":"0")+" "+(i?"1":"0")+" "+this.num(o)+","+this.num(a);return this};t.prototype.Mp=function(t){this.path+=(this.path===""?"M":" M")+this.num(t.x)+","+this.num(t.y);return this};t.prototype.mp=function(t){this.path+=(this.path===""?"m":" m")+this.num(t.x)+","+this.num(t.y);return this};t.prototype.Lp=function(t){this.path+=" L"+this.num(t.x)+","+this.num(t.y);return this};t.prototype.lp=function(t){this.path+=" l"+this.num(t.x)+","+this.num(t.y);return this};t.prototype.Cp=function(t,e,r){this.path+=" C"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y)+" "+this.num(r.x)+","+this.num(r.y);return this};t.prototype.cp=function(t,e,r){this.path+=" c"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y)+" "+this.num(r.x)+","+this.num(r.y);return this};t.prototype.Sp=function(t,e){this.path+=" S"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y);return this};t.prototype.sp=function(t,e){this.path+=" s"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y);return this};t.prototype.Qp=function(t,e){this.path+=" Q"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y);return this};t.prototype.qp=function(t,e){this.path+=" q"+this.num(t.x)+","+this.num(t.y)+" "+this.num(e.x)+","+this.num(e.y);return this};t.prototype.Tp=function(t){this.path+=" T"+this.num(t.x)+","+this.num(t.y);return this};t.prototype.tp=function(t){this.path+=" t"+this.num(t.x)+","+this.num(t.y);return this};t.prototype.Ap=function(t,e,r,n,i,o){this.path+=" A"+this.num(t)+","+this.num(e)+" "+r.toFixed(2)+" "+(n?"1":"0")+" "+(i?"1":"0")+" "+this.num(o.x)+","+this.num(o.y);return this};t.prototype.ap=function(t,e,r,n,i,o){this.path+=" a"+this.num(t)+","+this.num(e)+" "+r.toFixed(2)+" "+(n?"1":"0")+" "+(i?"1":"0")+" "+this.num(o.x)+","+this.num(o.y);return this};t.prototype._=function(t,e){this.path+=" "+this.num(t)+","+this.num(e);return this};t.prototype._p=function(t){this.path+=" "+this.num(t.x)+","+this.num(t.y);return this};t.prototype._v=function(t,e){if(t){this.path+=" "+t}for(var r=0;r<e.length;r++){var n=e[r];this.path+=" "+this.num(n.x)+","+this.num(n.y)}return this};return t}();var Ot=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.attr("event_type","starting");var n=e.attr("event_symbol","none");var i=e.attr("event_is_interrupting",false);var o=r=="end"?true:e.attr("event_is_throwing",false);var a=e.getSize().width/2;var s=a/40;var l;switch(r){default:case"start":l=this.renderStartBorder(t,e,a,i);break;case"intermediate":l=this.renderIntermediateBorder(t,e,a,i);break;case"end":l=this.renderEndBorder(t,e,a);break}var y;switch(n){default:case"none":break;case"message":y=this.renderMessageSymbol(t,e,s,o);break;case"timer":y=this.renderTimerSymbol(t,e,s);break;case"error":y=this.renderErrorSymbol(t,e,s,o);break;case"escalation":y=this.renderEscalationSymbol(t,e,s,o);break;case"cancel":y=this.renderCancelSymbol(t,e,s,o);break;case"compensation":y=this.renderCompensationSymbol(t,e,s,o);break;case"conditional":y=this.renderConditionalSymbol(t,e,s,o);break;case"link":y=this.renderLinkSymbol(t,e,s,o);break;case"signal":y=this.renderSignalSymbol(t,e,s,o);break;case"terminate":y=this.renderTerminateSymbol(t,e,s);break;case"multiple":y=this.renderMultipleSymbol(t,e,s,o);break;case"parallel_multiple":y=this.renderParallelMultipleSymbol(t,e,s,o);break}return l.concat(y)};e.prototype.getMinSize=function(t){return new o(3*this.get1em(t)+3*this.strokeWidth)};e.prototype.renderStartBorder=function(t,e,r,n){return[t.circle({cx:0,cy:0,r:r,"stroke-width":this.strokeWidth,stroke:e.attr("color"),"stroke-dasharray":n?5*this.strokeWidth:undefined,fill:e.attr("fill")})]};e.prototype.renderIntermediateBorder=function(t,e,r,n){return[t.circle({cx:0,cy:0,r:r,"stroke-width":.75*this.strokeWidth,stroke:e.attr("color"),"stroke-dasharray":n?5*this.strokeWidth:undefined,fill:e.attr("fill")}),t.circle({cx:0,cy:0,r:r-2*this.strokeWidth,"stroke-width":.75*this.strokeWidth,stroke:e.attr("color"),"stroke-dasharray":n?4.333*this.strokeWidth:undefined,fill:e.attr("fill")})]};e.prototype.renderEndBorder=function(t,e,r){return[t.circle({cx:0,cy:0,r:r-this.strokeWidth,"stroke-width":2*this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")})]};e.prototype.renderMessageSymbol=function(t,e,r,n){if(n){return[t.path({d:(new Bt).scale(r).M(-14,-12).L(14,-12).L(0,-3).Z().M(-16,-8).L(0,2).L(16,-8).L(16,12).L(-16,12).Z(),fill:e.attr("color"),"stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]}else{return[t.path({d:(new Bt).scale(r).M(-16,-12).L(16,-12).L(16,12).L(-16,12).Z().L(0,0).L(16,-12),fill:"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]}};e.prototype.renderTimerSymbol=function(t,e,r){return[t.circle({cx:0,cy:0,r:20*r,fill:"none","stroke-width":.75*this.strokeWidth,stroke:e.attr("color")}),t.path({d:(new Bt).scale(r).M(0,-16).L(0,-12).M(0,12).L(0,16).M(-16,0).L(-12,0).M(12,0).L(16,0).M(-6,10).L(-8.3,13.7).M(-10,6).L(-13.7,8.3).M(-10,-6).L(-13.65,-8.35).M(-6,-10).L(-8.25,-13.65).M(6,-10).L(8.27,-13.75).M(10,-6).L(13.77,-8.25).M(10,6).L(13.77,8.29).M(6,10).L(8.27,13.79).M(0,0).L(8,0).M(0,0).L(2.47,-12.53),fill:"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderErrorSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-18,12).L(-6,-16).L(6,4).L(18,-12).L(6,16).L(-6,-4).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderEscalationSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-14,18).L(0,-18).L(14,18).L(0,4).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderCancelSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-16,-12).L(-4,0).L(-16,12).L(-12,16).L(0,4).L(12,16).L(16,12).L(4,0).L(16,-12).L(12,-16).L(0,-4).L(-12,-16).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderCompensationSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-4,-16).L(-4,16).L(-20,0).Z().M(12,-16).L(12,16).L(-4,0).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderConditionalSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-18,-20).L(-18,20).L(18,20).L(18,-20).Z().M(-14,-12).L(14,-12).M(-14,-4).L(14,-4).M(-14,4).L(14,4).M(-14,12).L(14,12),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderLinkSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(-20,-8).L(8,-8).L(8,-16).L(20,0).L(8,16).L(8,8).L(-20,8).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderSignalSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(0,-20).L(-18,12).L(18,12).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderTerminateSymbol=function(t,e,r){return[t.circle({cx:0,cy:0,r:20*r,fill:e.attr("color"),"stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderMultipleSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(0,-20).L(19,-6.2).L(11.8,16.2).L(-11.8,16.2).L(-19,-6.2).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderParallelMultipleSymbol=function(t,e,r,n){return[t.path({d:(new Bt).scale(r).M(3,-20).L(3,-3).L(20,-3).L(20,3).L(3,3).L(3,20).L(-3,20).L(-3,3).L(-20,3).L(-20,-3).L(-3,-3).L(-3,-20).Z(),fill:n?e.attr("color"):"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.eventTypes=["start","intermediate","end"];e.eventSymbols=["none","message","timer","error","escalation","cancel","compensation","conditional","link","signal","terminate","multiple","parallel_multiple"];return e}(jt);var Tt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getSvgPolygonPoints=function(t){var e=t.attr("points");if(e){return e}else{var r=t.getSize();var n=r.width/2;var i=r.height/2;return[[-n,-i],[-n,+i],[+n,+i],[+n,-i]]}};e.prototype.renderElements=function(t,e){return[this.renderOutlineElement(t,e),this.renderLabel(t,e)]};e.prototype.renderOutlineElement=function(t,e){return t.polygon({points:this.getSvgPolygonPoints(e).map(function(t){return t.join(",")}).join(" "),"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")})};e.prototype.getSvgIntersectionsShapes=function(t){return[["polygon",{points:this.getSvgPolygonPoints(t).map(function(t){return t.join(",")}).join(" ")}]]};return e}(It);var Rt=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.paddingEm=1.5;return t}t.prototype.getSvgPolygonPoints=function(t){var e=t.getSize();var r=e.width/2;var n=e.height/2;return[[0,-n],[r,0],[0,+n],[-r,0]]};return t}(Tt);var At=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){return[this.renderOutlineElement(t,e),this.renderSymbol(t,e)]};e.prototype.getMinSize=function(t){return new o(4*this.get1em(t)+this.strokeWidth)};e.prototype.renderSymbol=function(t,e){var r=e.attr("gateway_type","none");var n=e.attr("gateway_instantiate",false);var i=2*this.get1em(e)/40;switch(r){default:case"none":case"plain":return null;case"exclusive":return this.renderExclusiveSymbol(t,e,i);case"event":return this.renderEventSymbol(t,e,i,n);case"parallel_event":return this.renderParallelEventSymbol(t,e,i);case"inclusive":return this.renderInclusiveSymbol(t,e,i);case"complex":return this.renderComplexSymbol(t,e,i);case"parallel":return this.renderParallelSymbol(t,e,i)}};e.prototype.renderExclusiveSymbol=function(t,e,r){return[t.path({d:(new Bt).scale(r).M(-14,-18).L(-8,-18).L(0,-5).L(8,-18).L(14,-18).L(3,0).L(14,18).L(8,18).L(0,5).L(-8,18).L(-14,18).L(-3,0).Z(),fill:e.attr("color"),"stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderInclusiveSymbol=function(t,e,r){return[t.circle({cx:0,cy:0,r:20*r-this.strokeWidth,"stroke-width":2*this.strokeWidth,stroke:e.attr("color"),fill:"transparent"})]};e.prototype.renderEventSymbol=function(t,e,r,n){return[t.circle({cx:0,cy:0,r:20*r,"stroke-width":.5*this.strokeWidth,stroke:e.attr("color"),fill:"transparent"}),n?null:t.circle({cx:0,cy:0,r:20*r-1.5*this.strokeWidth,"stroke-width":.5*this.strokeWidth,stroke:e.attr("color"),fill:"transparent"}),t.path({d:(new Bt).scale(.6*r).M(0,-20).L(19,-6.2).L(11.8,16.2).L(-11.8,16.2).L(-19,-6.2).Z(),fill:"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderParallelEventSymbol=function(t,e,r){return[t.circle({cx:0,cy:0,r:20*r,"stroke-width":.5*this.strokeWidth,stroke:e.attr("color"),fill:"transparent"}),t.path({d:(new Bt).scale(.6*r).M(4,-20).L(4,-4).L(20,-4).L(20,4).L(4,4).L(4,20).L(-4,20).L(-4,4).L(-20,4).L(-20,-4).L(-4,-4).L(-4,-20).Z(),fill:"none","stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderComplexSymbol=function(t,e,r){return[t.path({d:(new Bt).scale(r).M(-3,-20).v(12.7).l(-9,-9).l(-4.2,4.2).l(9,9).H(-20).v(6).h(12.7).l(-9,9).l(4.2,4.2).l(9,-9).V(20).H(3).V(7.2).L(12,16.2).L(16.2,12).L(7.2,3).H(20).V(-3).H(7.2).l(9,-9).l(-4.2,-4.2).l(-9,9).V(-20).Z(),fill:e.attr("color"),"stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};e.prototype.renderParallelSymbol=function(t,e,r){return[t.path({d:(new Bt).scale(r).M(3,-20).L(3,-3).L(20,-3).L(20,3).L(3,3).L(3,20).L(-3,20).L(-3,3).L(-20,3).L(-20,-3).L(-3,-3).L(-3,-20).Z(),fill:e.attr("color"),"stroke-width":.5*this.strokeWidth,stroke:e.attr("color")})]};return e}(Rt);var zt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getSvgPath=function(t){var e=t.getSize();var r=e.width/2;var n=e.height/2;return new Bt(-r,-n).L(-r,+n).L(+r,+n).L(+r,-n).Z()};e.prototype.renderElements=function(t,e){return[t.path({d:this.getSvgPath(e),"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),this.renderLabel(t,e)]};e.prototype.getSvgIntersectionsShapes=function(t){return[["path",{d:this.getSvgPath(t).toString()}]]};return e}(It);var Ft=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.minHeightEm=4.5;t.minWidthEm=9;return t}t.prototype.getSvgPath=function(t){var e=t.getSize();var r=this.get1em(t);var n=e.height/2;var i=e.width/2;var o=e.width/2-r;var a=e.height/2-r;return new Bt(+o,-n).A(r,r,0,false,true,+i,-a).L(+i,+a).A(r,r,0,false,true,+o,+n).L(-o,+n).A(r,r,0,false,true,-i,+a).L(-i,-a).A(r,r,0,false,true,-o,-n).Z()};return t}(zt);var Dt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.getSize();return[t.ellipse({cx:0,cy:0,rx:r.width/2,ry:r.height/2,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),this.renderLabel(t,e)]};e.prototype.getSvgIntersectionsShapes=function(t){var e=t.getSize();return[["ellipse",{cx:0,cy:0,rx:e.width/2,ry:e.height/2}]]};return e}(It);var Gt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getEdgeCount=function(t){return t.attr("n",6)};e.prototype.getSvgPolygonPoints=function(t){var e=t.attr("points");if(e){return e}else{var r=t.getSize();var n=Math.max(r.width,r.height)/2;var i=this.getEdgeCount(t);var o=2*Math.PI/i;var a=o*t.attr("rotation",.5);var s=[];for(var l=0;l<i;l++){s.push([(n*Math.sin(l*o+a)).toFixed(1),(n*Math.cos(l*o+a)).toFixed(1)])}return s}};return e}(Tt);var Vt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getEdgeCount=function(t){return 6};return e}(Gt);var Wt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.getSize();var n=r.width;var i=r.height;return[t.rect({x:-n/2,y:-i/2,width:n,height:i,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),this.renderLabel(t,e)]};e.prototype.getSvgIntersectionsShapes=function(t){var e=t.getSize();var r=e.width;var n=e.height;return[["rect",{x:-r/2,y:-n/2,width:r,height:n}]]};return e}(It);var Ut=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){return[this.renderLabel(t,e)]};e.prototype.getPadding=function(t){return 0};return e}(Wt);var qt=function(e){f(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.renderElements=function(t,e){var r=e.getSize();var n=r.width;var i=r.height;return[t.rect({x:-n/2,y:-i/2,width:n,height:i,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),this.renderLabel(t,e)]};t.prototype.getMinSize=function(t){if(t.hasNestedGraph()){return t.getNestedGraph().getBoundingBox().addMargin(3*this.getPadding(t)).getSize().fit(e.prototype.getMinSize.call(this,t))}else{return e.prototype.getMinSize.call(this,t)}};return t}(Wt);var Xt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){return[]};e.prototype.getMinSize=function(t){return new o(0,0)};return e}(It);var Yt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getSvgPath=function(t){var e=t.getSize();var r=e.width/2;var n=e.height/2;var i=this.get1em(t);return new Bt(-r,-n).L(r-i,-n).L(r,-n+i).L(r,n).L(-r,n).Z().M(r-i,-n).L(r-i,-n+i).L(r,-n+i)};return e}(zt);var Ht=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getEdgeCount=function(t){return 8};return e}(Gt);var Zt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getEdgeCount=function(t){return 5};return e}(Gt);var $t=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){return[t.circle({cx:0,cy:0,r:e.getSize().width,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("color")})]};e.prototype.getMinSize=function(t){return new o(3*this.strokeWidth)};return e}(jt);var Qt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getSvgPath=function(t){var e=t.getSize();var r=e.width/2;var n=e.height/2;if(r>n){var i=n;var o=r-i;return new Bt(+o,-n).A(i,i,0,true,true,+o,+n).L(-o,+n).A(i,i,0,true,true,-o,-n).Z()}else{var i=r;var o=n-i;return new Bt(-r,-o).A(i,i,0,true,false,+r,-o).L(+r,+o).A(i,i,0,true,false,-r,+o).Z()}};return e}(zt);var Jt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getEdgeCount=function(t){return 7};return e}(Gt);var Kt=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getMinSize=function(t){return new o(this.getLabelSize(t).getLonger())};return e}(Wt);var te=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.attr("svg");var n=e.getSize();var i=n.width;var o=n.height;return[t.image({href:"data:image/svg+xml;utf8,"+escape(r),width:i,height:o,transform:"translate("+-i/2+","+-o/2+")"})]};e.prototype.getMinSize=function(t){var e=t.attr("svg");var r=(new DOMParser).parseFromString(e,"image/svg+xml");if(r.documentElement.viewBox){var n=r.documentElement.viewBox.baseVal;return new o(n.width,n.height)}else{return new o(0,0)}};e.prototype.getSvgIntersectionsShapes=function(t){var e=t.getSize();var r=e.width;var n=e.height;return[["rect",{x:-r/2,y:-n/2,width:r,height:n}]]};return e}(It);var ee=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.minWidthEm=5;return t}return t}(Qt);var re=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.getSize().width/2;return[t.circle({cx:0,cy:0,r:r,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("fill")}),t.circle({cx:0,cy:0,r:r-3*this.strokeWidth,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("color")})]};e.prototype.getMinSize=function(t){return new o(1.5*this.get1em(t)+3*this.strokeWidth)};return e}(jt);var ne=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.renderElements=function(t,e){var r=e.getSize().width/2;return[t.circle({cx:0,cy:0,r:r,"stroke-width":this.strokeWidth,stroke:e.attr("color"),fill:e.attr("color")})]};e.prototype.getMinSize=function(t){return new o(1.5*this.get1em(t)+this.strokeWidth)};return e}(jt);var ie=function(){function t(){this.shapeCache={};this.shapeList={none:Xt,label:Ut,rect:Wt,square:Kt,ellipse:Dt,oval:Dt,circle:jt,point:$t,polygon:Tt,regular_polygon:Gt,pentagon:Zt,hexagon:Vt,septagon:Jt,octagon:Ht,diamond:Rt,path:zt,round:Qt,nested_graph:qt,svg:te,"uml.initial_state":ne,"uml.state":ee,"uml.final_state":re,"bpmn.event":Ot,"bpmn.task":Ft,"bpmn.gateway":At,note:Yt}}t.prototype.getShape=function(t){if(t in this.shapeCache){return this.shapeCache[t]}else{var e=this.createShape(t);this.shapeCache[t]=e;return e}};t.prototype.listShapes=function(){return Object.keys(this.shapeList)};t.prototype.createShape=function(t){if(t in this.shapeList){return new this.shapeList[t]}else{return undefined}};return t}();var oe=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.listShapes=function(){return[]};e.prototype.createShape=function(t){console.log("Fallback shape library: creating shape "+t);return new Wt};return e}(ie);var ae=function(){function t(t){if(t===void 0){t={}}this.options=t||{}}t.prototype.option=function(t,e){var r=this.options[t];return r!==undefined&&r!==null?r:e};t.prototype.apply=function(t){};return t}();var se=function(){function t(t){this.graph=t}t.prototype.sort=function(){var r=this;var n=this.countInteractions(this.graph);if(this.graph.nodes.length>8){console.warn("GSortSwimLane: Too many nodes for brute-force sort. Leaving nodes unsorted.");return this.graph.nodes}var i=this.countCrossings(n,this.graph.nodes);var o=this.graph.nodes;this.permutateList(this.graph.nodes,function(t){var e=r.countCrossings(n,t);if(e<i){i=e;o=t}});return o};t.prototype.permutateList=function(t,o){var a=function(t,e){if(e===void 0){e=[]}if(t.length===0){o(e);s++}else{for(var r=0;r<t.length;r++){var n=t.slice();var i=n.splice(r,1);a(n.slice(),e.concat(i))}}};var s=0;a(t);console.log("GSortSwimLane::permutateList(): Explored permutations:",s)};t.prototype.countCrossings=function(t,e){var r=0;for(var n=0;n<e.length-2;n++){var i=e[n];for(var o=n+2;o<e.length;o++){var a=e[o];r+=(o-n-1)*(t[i.id][a.id]+t[a.id][i.id])}}return r};t.prototype.calculateBarycenter=function(t,e){var r={};for(var n=0;n<this.graph.nodes.length;n++){r[this.graph.nodes[n].id]=n}var i=0;var o=0;for(var a in t[e.id]){var s=t[e.id][a]+t[a][e.id];var l=r[a];i+=s*l;o+=s}console.log("BC:",e.id,i,o,i/o);return i/o};t.prototype.countInteractions=function(n){var i=this;var o={};n.forEachNode(function(e){o[e.id]={};n.forEachNode(function(t){o[e.id][t.id]=0})});n.forEachEdge(function(t){var e=i.findContainingNode(n,t.start);var r=i.findContainingNode(n,t.end);if(e.graph===n&&r.graph===n){o[e.id][r.id]++}});return o};t.prototype.findContainingNode=function(t,e){var r=e;while(r&&r.graph!==t&&r.graph.parentNode){r=r.graph.parentNode}return r};return t}();var le=function(){function t(t){this.graph=t}t.prototype.sort=function(){if(this.graph.nodes.length==0){return this.graph.nodes}var t=this.findRoots(this.graph.nodes);return this.bfs(t)};t.prototype.findRoots=function(t){var e=[];var r=[];for(var n=0,i=t;n<i.length;n++){var o=i[n];var a=false;for(var s=0,l=o.connectedEdges;s<l.length;s++){var y=l[s];var f=y.start;var u=y.end;if(f.graph===o.graph&&u.graph===o.graph&&f!==o&&u===o){a=true}}if(a){r.push(o)}else{e.push(o)}}return e.concat(r)};t.prototype.bfs=function(t){var e=[];var r=[];var n={};for(var i=0,o=t;i<o.length;i++){var a=o[i];if(!n[a.id]){n[a.id]=true;r.push(a);while(r.length>0){var s=r.shift();e.push(s);for(var l=0,y=s.connectedEdges;l<y.length;l++){var f=y[l];var u=f.start;var c=f.end;if(u.graph===s.graph&&c.graph===s.graph&&u===s&&c!==s&&!n[c.id]){n[c.id]=true;r.push(c)}}}}}return e};return t}();var ye=function(){function t(t){this.graph=t}t.prototype.sort=function(i){if(i===void 0){i="id"}if(this.graph.nodes.length==0){return this.graph.nodes}var t=this.graph.nodes;t.sort(function(t,e){var r=t.attr(i);var n=e.attr(i);return r==n?0:r<n?-1:1});return t};return t}();var fe=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isVertical=true;return t}t.prototype.apply=function(t){var e=this.option("spacing",1);var r=this.option("align",0);var n=this.option("edgeDistMul",1/3);switch(r){case"left":r=-1;break;case"top":r=-1;break;case"center":r=0;break;case"middle":r=0;break;case"right":r=+1;break;case"bottom":r=+1;break}var i,o,a,s;if(this.isVertical){i=function(t){return t.width};o=function(t){return t.height};a=function(t){return t.y};s=function(t,e,r){return new B(t,e,r)}}else{i=function(t){return t.height};o=function(t){return t.width};a=function(t){return t.x};s=function(t,e,r){return new B(e,t,r)}}var l=0;var y=0;if(r!=0){for(var f=0,u=t.nodes;f<u.length;f++){var c=u[f];y=Math.max(y,i(c.getSize()))}}var h;var p=this.option("sortNodes",false);switch(p){case false:h=t.nodes;break;case true:case"swimlane":var x=new se(t);h=x.sort();break;case"topological":var d=new le(t);h=d.sort();break;case"attr":case"attribute":var v=new ye(t);var g=this.option("sortAttr",undefined);if(g===undefined){throw new Error("Unspecified sort attribute (sortAttr) for attribute sort algorithm.")}h=v.sort(g);break;default:throw new Error("Unknown sort algorithm: "+p)}var w;for(var m=0,k=h;m<k.length;m++){var b=k[m];var E=b.getSize();if(!E){throw new Error("Node size not known: "+b.id)}var M=o(E);var _=i(E);var C=b.getMargin();l+=e*(w===undefined?0:Math.max(w,C));l+=M/2;b.setPosition(s(r==0?0:r*(y-_)/2,l,t));l+=M/2;w=C}if(this.option("arcEdges",true)){for(var P=0,L=t.edges;P<L.length;P++){var N=L[P];if(N.start.graph==t&&N.end.graph==t){var S=N.end.getPosition();var I=N.start.getPosition();if(!I){throw new Error("Node not placed: "+N.start.id)}if(!S){throw new Error("Node not placed: "+N.end.id)}var j=Math.abs(a(S)-a(I));var M=o(N.start.getSize())/2+o(N.end.getSize())/2+e;if(j>M+1&&N.points.length==0){N.points.push(s((this.isVertical?1:-1)*j*n,(a(I)+a(S))/2,t))}}}}};return t}(ae);function ue(){this.__data__=[];this.size=0}var ce=ue;function he(t,e){return t===e||t!==t&&e!==e}var pe=he;function xe(t,e){var r=t.length;while(r--){if(pe(t[r][0],e)){return r}}return-1}var de=xe;var ve=Array.prototype;var ge=ve.splice;function we(t){var e=this.__data__,r=de(e,t);if(r<0){return false}var n=e.length-1;if(r==n){e.pop()}else{ge.call(e,r,1)}--this.size;return true}var me=we;function ke(t){var e=this.__data__,r=de(e,t);return r<0?undefined:e[r][1]}var be=ke;function Ee(t){return de(this.__data__,t)>-1}var Me=Ee;function _e(t,e){var r=this.__data__,n=de(r,t);if(n<0){++this.size;r.push([t,e])}else{r[n][1]=e}return this}var Ce=_e;function Pe(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}Pe.prototype.clear=ce;Pe.prototype["delete"]=me;Pe.prototype.get=be;Pe.prototype.has=Me;Pe.prototype.set=Ce;var Le=Pe;function Ne(){this.__data__=new Le;this.size=0}var Se=Ne;function Ie(t){var e=this.__data__,r=e["delete"](t);this.size=e.size;return r}var je=Ie;function Be(t){return this.__data__.get(t)}var Oe=Be;function Te(t){return this.__data__.has(t)}var Re=Te;var Ae=typeof u=="object"&&u&&u.Object===Object&&u;var ze=Ae;var Fe=typeof self=="object"&&self&&self.Object===Object&&self;var De=ze||Fe||Function("return this")();var Ge=De;var Ve=Ge.Symbol;var We=Ve;var Ue=Object.prototype;var qe=Ue.hasOwnProperty;var Xe=Ue.toString;var Ye=We?We.toStringTag:undefined;function He(t){var e=qe.call(t,Ye),r=t[Ye];try{t[Ye]=undefined;var n=true}catch(t){}var i=Xe.call(t);if(n){if(e){t[Ye]=r}else{delete t[Ye]}}return i}var Ze=He;var $e=Object.prototype;var Qe=$e.toString;function Je(t){return Qe.call(t)}var Ke=Je;var tr="[object Null]",er="[object Undefined]";var rr=We?We.toStringTag:undefined;function nr(t){if(t==null){return t===undefined?er:tr}return rr&&rr in Object(t)?Ze(t):Ke(t)}var ir=nr;function or(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ar=or;var sr="[object AsyncFunction]",lr="[object Function]",yr="[object GeneratorFunction]",fr="[object Proxy]";function ur(t){if(!ar(t)){return false}var e=ir(t);return e==lr||e==yr||e==sr||e==fr}var cr=ur;var hr=Ge["__core-js_shared__"];var pr=hr;var xr=function(){var t=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function dr(t){return!!xr&&xr in t}var vr=dr;var gr=Function.prototype;var wr=gr.toString;function mr(t){if(t!=null){try{return wr.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var kr=mr;var br=/[\\^$.*+?()[\]{}|]/g;var Er=/^\[object .+?Constructor\]$/;var Mr=Function.prototype,_r=Object.prototype;var Cr=Mr.toString;var Pr=_r.hasOwnProperty;var Lr=RegExp("^"+Cr.call(Pr).replace(br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nr(t){if(!ar(t)||vr(t)){return false}var e=cr(t)?Lr:Er;return e.test(kr(t))}var Sr=Nr;function Ir(t,e){return t==null?undefined:t[e]}var jr=Ir;function Br(t,e){var r=jr(t,e);return Sr(r)?r:undefined}var Or=Br;var Tr=Or(Ge,"Map");var Rr=Tr;var Ar=Or(Object,"create");var zr=Ar;function Fr(){this.__data__=zr?zr(null):{};this.size=0}var Dr=Fr;function Gr(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}var Vr=Gr;var Wr="__lodash_hash_undefined__";var Ur=Object.prototype;var qr=Ur.hasOwnProperty;function Xr(t){var e=this.__data__;if(zr){var r=e[t];return r===Wr?undefined:r}return qr.call(e,t)?e[t]:undefined}var Yr=Xr;var Hr=Object.prototype;var Zr=Hr.hasOwnProperty;function $r(t){var e=this.__data__;return zr?e[t]!==undefined:Zr.call(e,t)}var Qr=$r;var Jr="__lodash_hash_undefined__";function Kr(t,e){var r=this.__data__;this.size+=this.has(t)?0:1;r[t]=zr&&e===undefined?Jr:e;return this}var tn=Kr;function en(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}en.prototype.clear=Dr;en.prototype["delete"]=Vr;en.prototype.get=Yr;en.prototype.has=Qr;en.prototype.set=tn;var rn=en;function nn(){this.size=0;this.__data__={hash:new rn,map:new(Rr||Le),string:new rn}}var on=nn;function an(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var sn=an;function ln(t,e){var r=t.__data__;return sn(e)?r[typeof e=="string"?"string":"hash"]:r.map}var yn=ln;function fn(t){var e=yn(this,t)["delete"](t);this.size-=e?1:0;return e}var un=fn;function cn(t){return yn(this,t).get(t)}var hn=cn;function pn(t){return yn(this,t).has(t)}var xn=pn;function dn(t,e){var r=yn(this,t),n=r.size;r.set(t,e);this.size+=r.size==n?0:1;return this}var vn=dn;function gn(t){var e=-1,r=t==null?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}gn.prototype.clear=on;gn.prototype["delete"]=un;gn.prototype.get=hn;gn.prototype.has=xn;gn.prototype.set=vn;var wn=gn;var mn=200;function kn(t,e){var r=this.__data__;if(r instanceof Le){var n=r.__data__;if(!Rr||n.length<mn-1){n.push([t,e]);this.size=++r.size;return this}r=this.__data__=new wn(n)}r.set(t,e);this.size=r.size;return this}var bn=kn;function En(t){var e=this.__data__=new Le(t);this.size=e.size}En.prototype.clear=Se;En.prototype["delete"]=je;En.prototype.get=Oe;En.prototype.has=Re;En.prototype.set=bn;var Mn=En;function _n(t,e){var r=-1,n=t==null?0:t.length;while(++r<n){if(e(t[r],r,t)===false){break}}return t}var Cn=_n;var Pn=function(){try{var t=Or(Object,"defineProperty");t({},"",{});return t}catch(t){}}();var Ln=Pn;function Nn(t,e,r){if(e=="__proto__"&&Ln){Ln(t,e,{configurable:true,enumerable:true,value:r,writable:true})}else{t[e]=r}}var Sn=Nn;var In=Object.prototype;var jn=In.hasOwnProperty;function Bn(t,e,r){var n=t[e];if(!(jn.call(t,e)&&pe(n,r))||r===undefined&&!(e in t)){Sn(t,e,r)}}var On=Bn;function Tn(t,e,r,n){var i=!r;r||(r={});var o=-1,a=e.length;while(++o<a){var s=e[o];var l=n?n(r[s],t[s],s,r,t):undefined;if(l===undefined){l=t[s]}if(i){Sn(r,s,l)}else{On(r,s,l)}}return r}var Rn=Tn;function An(t,e){var r=-1,n=Array(t);while(++r<t){n[r]=e(r)}return n}var zn=An;function Fn(t){return t!=null&&typeof t=="object"}var Dn=Fn;var Gn="[object Arguments]";function Vn(t){return Dn(t)&&ir(t)==Gn}var Wn=Vn;var Un=Object.prototype;var qn=Un.hasOwnProperty;var Xn=Un.propertyIsEnumerable;var Yn=Wn(function(){return arguments}())?Wn:function(t){return Dn(t)&&qn.call(t,"callee")&&!Xn.call(t,"callee")};var Hn=Yn;var Zn=Array.isArray;var $n=Zn;function Qn(){return false}var Jn=Qn;var Kn=h(function(t,e){var r=e&&!e.nodeType&&e;var n=r&&"object"=="object"&&t&&!t.nodeType&&t;var i=n&&n.exports===r;var o=i?Ge.Buffer:undefined;var a=o?o.isBuffer:undefined;var s=a||Jn;t.exports=s});var ti=9007199254740991;var ei=/^(?:0|[1-9]\d*)$/;function ri(t,e){var r=typeof t;e=e==null?ti:e;return!!e&&(r=="number"||r!="symbol"&&ei.test(t))&&(t>-1&&t%1==0&&t<e)}var ni=ri;var ii=9007199254740991;function oi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ii}var ai=oi;var si="[object Arguments]",li="[object Array]",yi="[object Boolean]",fi="[object Date]",ui="[object Error]",ci="[object Function]",hi="[object Map]",pi="[object Number]",xi="[object Object]",di="[object RegExp]",vi="[object Set]",gi="[object String]",wi="[object WeakMap]";var mi="[object ArrayBuffer]",ki="[object DataView]",bi="[object Float32Array]",Ei="[object Float64Array]",Mi="[object Int8Array]",_i="[object Int16Array]",Ci="[object Int32Array]",Pi="[object Uint8Array]",Li="[object Uint8ClampedArray]",Ni="[object Uint16Array]",Si="[object Uint32Array]";var Ii={};Ii[bi]=Ii[Ei]=Ii[Mi]=Ii[_i]=Ii[Ci]=Ii[Pi]=Ii[Li]=Ii[Ni]=Ii[Si]=true;Ii[si]=Ii[li]=Ii[mi]=Ii[yi]=Ii[ki]=Ii[fi]=Ii[ui]=Ii[ci]=Ii[hi]=Ii[pi]=Ii[xi]=Ii[di]=Ii[vi]=Ii[gi]=Ii[wi]=false;function ji(t){return Dn(t)&&ai(t.length)&&!!Ii[ir(t)]}var Bi=ji;function Oi(e){return function(t){return e(t)}}var Ti=Oi;var Ri=h(function(t,e){var r=e&&!e.nodeType&&e;var n=r&&"object"=="object"&&t&&!t.nodeType&&t;var i=n&&n.exports===r;var o=i&&ze.process;var a=function(){try{var t=n&&n.require&&n.require("util").types;if(t){return t}return o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a});var Ai=Ri&&Ri.isTypedArray;var zi=Ai?Ti(Ai):Bi;var Fi=zi;var Di=Object.prototype;var Gi=Di.hasOwnProperty;function Vi(t,e){var r=$n(t),n=!r&&Hn(t),i=!r&&!n&&Kn(t),o=!r&&!n&&!i&&Fi(t),a=r||n||i||o,s=a?zn(t.length,String):[],l=s.length;for(var y in t){if((e||Gi.call(t,y))&&!(a&&(y=="length"||i&&(y=="offset"||y=="parent")||o&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||ni(y,l)))){s.push(y)}}return s}var Wi=Vi;var Ui=Object.prototype;function qi(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ui;return t===r}var Xi=qi;function Yi(e,r){return function(t){return e(r(t))}}var Hi=Yi;var Zi=Hi(Object.keys,Object);var $i=Zi;var Qi=Object.prototype;var Ji=Qi.hasOwnProperty;function Ki(t){if(!Xi(t)){return $i(t)}var e=[];for(var r in Object(t)){if(Ji.call(t,r)&&r!="constructor"){e.push(r)}}return e}var to=Ki;function eo(t){return t!=null&&ai(t.length)&&!cr(t)}var ro=eo;function no(t){return ro(t)?Wi(t):to(t)}var io=no;function oo(t,e){return t&&Rn(e,io(e),t)}var ao=oo;function so(t){var e=[];if(t!=null){for(var r in Object(t)){e.push(r)}}return e}var lo=so;var yo=Object.prototype;var fo=yo.hasOwnProperty;function uo(t){if(!ar(t)){return lo(t)}var e=Xi(t),r=[];for(var n in t){if(!(n=="constructor"&&(e||!fo.call(t,n)))){r.push(n)}}return r}var co=uo;function ho(t){return ro(t)?Wi(t,true):co(t)}var po=ho;function xo(t,e){return t&&Rn(e,po(e),t)}var vo=xo;var go=h(function(t,e){var r=e&&!e.nodeType&&e;var n=r&&"object"=="object"&&t&&!t.nodeType&&t;var i=n&&n.exports===r;var o=i?Ge.Buffer:undefined,a=o?o.allocUnsafe:undefined;function s(t,e){if(e){return t.slice()}var r=t.length,n=a?a(r):new t.constructor(r);t.copy(n);return n}t.exports=s});function wo(t,e){var r=-1,n=t.length;e||(e=Array(n));while(++r<n){e[r]=t[r]}return e}var mo=wo;function ko(t,e){var r=-1,n=t==null?0:t.length,i=0,o=[];while(++r<n){var a=t[r];if(e(a,r,t)){o[i++]=a}}return o}var bo=ko;function Eo(){return[]}var Mo=Eo;var _o=Object.prototype;var Co=_o.propertyIsEnumerable;var Po=Object.getOwnPropertySymbols;var Lo=!Po?Mo:function(e){if(e==null){return[]}e=Object(e);return bo(Po(e),function(t){return Co.call(e,t)})};var No=Lo;function So(t,e){return Rn(t,No(t),e)}var Io=So;function jo(t,e){var r=-1,n=e.length,i=t.length;while(++r<n){t[i+r]=e[r]}return t}var Bo=jo;var Oo=Hi(Object.getPrototypeOf,Object);var To=Oo;var Ro=Object.getOwnPropertySymbols;var Ao=!Ro?Mo:function(t){var e=[];while(t){Bo(e,No(t));t=To(t)}return e};var zo=Ao;function Fo(t,e){return Rn(t,zo(t),e)}var Do=Fo;function Go(t,e,r){var n=e(t);return $n(t)?n:Bo(n,r(t))}var Vo=Go;function Wo(t){return Vo(t,io,No)}var Uo=Wo;function qo(t){return Vo(t,po,zo)}var Xo=qo;var Yo=Or(Ge,"DataView");var Ho=Yo;var Zo=Or(Ge,"Promise");var $o=Zo;var Qo=Or(Ge,"Set");var Jo=Qo;var Ko=Or(Ge,"WeakMap");var ta=Ko;var ea="[object Map]",ra="[object Object]",na="[object Promise]",ia="[object Set]",oa="[object WeakMap]";var aa="[object DataView]";var sa=kr(Ho),la=kr(Rr),ya=kr($o),fa=kr(Jo),ua=kr(ta);var ca=ir;if(Ho&&ca(new Ho(new ArrayBuffer(1)))!=aa||Rr&&ca(new Rr)!=ea||$o&&ca($o.resolve())!=na||Jo&&ca(new Jo)!=ia||ta&&ca(new ta)!=oa){ca=function(t){var e=ir(t),r=e==ra?t.constructor:undefined,n=r?kr(r):"";if(n){switch(n){case sa:return aa;case la:return ea;case ya:return na;case fa:return ia;case ua:return oa}}return e}}var ha=ca;var pa=Object.prototype;var xa=pa.hasOwnProperty;function da(t){var e=t.length,r=new t.constructor(e);if(e&&typeof t[0]=="string"&&xa.call(t,"index")){r.index=t.index;r.input=t.input}return r}var va=da;var ga=Ge.Uint8Array;var wa=ga;function ma(t){var e=new t.constructor(t.byteLength);new wa(e).set(new wa(t));return e}var ka=ma;function ba(t,e){var r=e?ka(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Ea=ba;var Ma=/\w*$/;function _a(t){var e=new t.constructor(t.source,Ma.exec(t));e.lastIndex=t.lastIndex;return e}var Ca=_a;var Pa=We?We.prototype:undefined,La=Pa?Pa.valueOf:undefined;function Na(t){return La?Object(La.call(t)):{}}var Sa=Na;function Ia(t,e){var r=e?ka(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var ja=Ia;var Ba="[object Boolean]",Oa="[object Date]",Ta="[object Map]",Ra="[object Number]",Aa="[object RegExp]",za="[object Set]",Fa="[object String]",Da="[object Symbol]";var Ga="[object ArrayBuffer]",Va="[object DataView]",Wa="[object Float32Array]",Ua="[object Float64Array]",qa="[object Int8Array]",Xa="[object Int16Array]",Ya="[object Int32Array]",Ha="[object Uint8Array]",Za="[object Uint8ClampedArray]",$a="[object Uint16Array]",Qa="[object Uint32Array]";function Ja(t,e,r){var n=t.constructor;switch(e){case Ga:return ka(t);case Ba:case Oa:return new n(+t);case Va:return Ea(t,r);case Wa:case Ua:case qa:case Xa:case Ya:case Ha:case Za:case $a:case Qa:return ja(t,r);case Ta:return new n;case Ra:case Fa:return new n(t);case Aa:return Ca(t);case za:return new n;case Da:return Sa(t)}}var Ka=Ja;var ts=Object.create;var es=function(){function r(){}return function(t){if(!ar(t)){return{}}if(ts){return ts(t)}r.prototype=t;var e=new r;r.prototype=undefined;return e}}();var rs=es;function ns(t){return typeof t.constructor=="function"&&!Xi(t)?rs(To(t)):{}}var is=ns;var os="[object Map]";function as(t){return Dn(t)&&ha(t)==os}var ss=as;var ls=Ri&&Ri.isMap;var ys=ls?Ti(ls):ss;var fs=ys;var us="[object Set]";function cs(t){return Dn(t)&&ha(t)==us}var hs=cs;var ps=Ri&&Ri.isSet;var xs=ps?Ti(ps):hs;var ds=xs;var vs=1,gs=2,ws=4;var ms="[object Arguments]",ks="[object Array]",bs="[object Boolean]",Es="[object Date]",Ms="[object Error]",_s="[object Function]",Cs="[object GeneratorFunction]",Ps="[object Map]",Ls="[object Number]",Ns="[object Object]",Ss="[object RegExp]",Is="[object Set]",js="[object String]",Bs="[object Symbol]",Os="[object WeakMap]";var Ts="[object ArrayBuffer]",Rs="[object DataView]",As="[object Float32Array]",zs="[object Float64Array]",Fs="[object Int8Array]",Ds="[object Int16Array]",Gs="[object Int32Array]",Vs="[object Uint8Array]",Ws="[object Uint8ClampedArray]",Us="[object Uint16Array]",qs="[object Uint32Array]";var Xs={};Xs[ms]=Xs[ks]=Xs[Ts]=Xs[Rs]=Xs[bs]=Xs[Es]=Xs[As]=Xs[zs]=Xs[Fs]=Xs[Ds]=Xs[Gs]=Xs[Ps]=Xs[Ls]=Xs[Ns]=Xs[Ss]=Xs[Is]=Xs[js]=Xs[Bs]=Xs[Vs]=Xs[Ws]=Xs[Us]=Xs[qs]=true;Xs[Ms]=Xs[_s]=Xs[Os]=false;function Ys(r,n,i,t,e,o){var a,s=n&vs,l=n&gs,y=n&ws;if(i){a=e?i(r,t,e,o):i(r)}if(a!==undefined){return a}if(!ar(r)){return r}var f=$n(r);if(f){a=va(r);if(!s){return mo(r,a)}}else{var u=ha(r),c=u==_s||u==Cs;if(Kn(r)){return go(r,s)}if(u==Ns||u==ms||c&&!e){a=l||c?{}:is(r);if(!s){return l?Do(r,vo(a,r)):Io(r,ao(a,r))}}else{if(!Xs[u]){return e?r:{}}a=Ka(r,u,s)}}o||(o=new Mn);var h=o.get(r);if(h){return h}o.set(r,a);if(ds(r)){r.forEach(function(t){a.add(Ys(t,n,i,t,r,o))});return a}if(fs(r)){r.forEach(function(t,e){a.set(e,Ys(t,n,i,e,r,o))});return a}var p=y?l?Xo:Uo:l?keysIn:io;var x=f?undefined:p(r);Cn(x||r,function(t,e){if(x){e=t;t=r[e]}On(a,e,Ys(t,n,i,e,r,o))});return a}var Hs=Ys;var Zs=4;function $s(t){return Hs(t,Zs)}var Qs=$s;function Js(t){return function(){return t}}var Ks=Js;function tl(l){return function(t,e,r){var n=-1,i=Object(t),o=r(t),a=o.length;while(a--){var s=o[l?a:++n];if(e(i[s],s,i)===false){break}}return t}}var el=tl;var rl=el();var nl=rl;function il(t,e){return t&&nl(t,e,io)}var ol=il;function al(o,a){return function(t,e){if(t==null){return t}if(!ro(t)){return o(t,e)}var r=t.length,n=a?r:-1,i=Object(t);while(a?n--:++n<r){if(e(i[n],n,i)===false){break}}return t}}var sl=al;var ll=sl(ol);var yl=ll;function fl(t){return t}var ul=fl;function cl(t){return typeof t=="function"?t:ul}var hl=cl;function pl(t,e){var r=$n(t)?Cn:yl;return r(t,hl(e))}var xl=pl;var dl=xl;function vl(t,n){var i=[];yl(t,function(t,e,r){if(n(t,e,r)){i.push(t)}});return i}var gl=vl;var wl="__lodash_hash_undefined__";function ml(t){this.__data__.set(t,wl);return this}var kl=ml;function bl(t){return this.__data__.has(t)}var El=bl;function Ml(t){var e=-1,r=t==null?0:t.length;this.__data__=new wn;while(++e<r){this.add(t[e])}}Ml.prototype.add=Ml.prototype.push=kl;Ml.prototype.has=El;var _l=Ml;function Cl(t,e){var r=-1,n=t==null?0:t.length;while(++r<n){if(e(t[r],r,t)){return true}}return false}var Pl=Cl;function Ll(t,e){return t.has(e)}var Nl=Ll;var Sl=1,Il=2;function jl(t,e,r,n,i,o){var a=r&Sl,s=t.length,l=e.length;if(s!=l&&!(a&&l>s)){return false}var y=o.get(t);if(y&&o.get(e)){return y==e}var f=-1,u=true,c=r&Il?new _l:undefined;o.set(t,e);o.set(e,t);while(++f<s){var h=t[f],p=e[f];if(n){var x=a?n(p,h,f,e,t,o):n(h,p,f,t,e,o)}if(x!==undefined){if(x){continue}u=false;break}if(c){if(!Pl(e,function(t,e){if(!Nl(c,e)&&(h===t||i(h,t,r,n,o))){return c.push(e)}})){u=false;break}}else if(!(h===p||i(h,p,r,n,o))){u=false;break}}o["delete"](t);o["delete"](e);return u}var Bl=jl;function Ol(t){var r=-1,n=Array(t.size);t.forEach(function(t,e){n[++r]=[e,t]});return n}var Tl=Ol;function Rl(t){var e=-1,r=Array(t.size);t.forEach(function(t){r[++e]=t});return r}var Al=Rl;var zl=1,Fl=2;var Dl="[object Boolean]",Gl="[object Date]",Vl="[object Error]",Wl="[object Map]",Ul="[object Number]",ql="[object RegExp]",Xl="[object Set]",Yl="[object String]",Hl="[object Symbol]";var Zl="[object ArrayBuffer]",$l="[object DataView]";var Ql=We?We.prototype:undefined,Jl=Ql?Ql.valueOf:undefined;function Kl(t,e,r,n,i,o,a){switch(r){case $l:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset){return false}t=t.buffer;e=e.buffer;case Zl:if(t.byteLength!=e.byteLength||!o(new wa(t),new wa(e))){return false}return true;case Dl:case Gl:case Ul:return pe(+t,+e);case Vl:return t.name==e.name&&t.message==e.message;case ql:case Yl:return t==e+"";case Wl:var s=Tl;case Xl:var l=n&zl;s||(s=Al);if(t.size!=e.size&&!l){return false}var y=a.get(t);if(y){return y==e}n|=Fl;a.set(t,e);var f=Bl(s(t),s(e),n,i,o,a);a["delete"](t);return f;case Hl:if(Jl){return Jl.call(t)==Jl.call(e)}}return false}var ty=Kl;var ey=1;var ry=Object.prototype;var ny=ry.hasOwnProperty;function iy(t,e,r,n,i,o){var a=r&ey,s=Uo(t),l=s.length,y=Uo(e),f=y.length;if(l!=f&&!a){return false}var u=l;while(u--){var c=s[u];if(!(a?c in e:ny.call(e,c))){return false}}var h=o.get(t);if(h&&o.get(e)){return h==e}var p=true;o.set(t,e);o.set(e,t);var x=a;while(++u<l){c=s[u];var d=t[c],v=e[c];if(n){var g=a?n(v,d,c,e,t,o):n(d,v,c,t,e,o)}if(!(g===undefined?d===v||i(d,v,r,n,o):g)){p=false;break}x||(x=c=="constructor")}if(p&&!x){var w=t.constructor,m=e.constructor;if(w!=m&&("constructor"in t&&"constructor"in e)&&!(typeof w=="function"&&w instanceof w&&typeof m=="function"&&m instanceof m)){p=false}}o["delete"](t);o["delete"](e);return p}var oy=iy;var ay=1;var sy="[object Arguments]",ly="[object Array]",yy="[object Object]";var fy=Object.prototype;var uy=fy.hasOwnProperty;function cy(t,e,r,n,i,o){var a=$n(t),s=$n(e),l=a?ly:ha(t),y=s?ly:ha(e);l=l==sy?yy:l;y=y==sy?yy:y;var f=l==yy,u=y==yy,c=l==y;if(c&&Kn(t)){if(!Kn(e)){return false}a=true;f=false}if(c&&!f){o||(o=new Mn);return a||Fi(t)?Bl(t,e,r,n,i,o):ty(t,e,l,r,n,i,o)}if(!(r&ay)){var h=f&&uy.call(t,"__wrapped__"),p=u&&uy.call(e,"__wrapped__");if(h||p){var x=h?t.value():t,d=p?e.value():e;o||(o=new Mn);return i(x,d,r,n,o)}}if(!c){return false}o||(o=new Mn);return oy(t,e,r,n,i,o)}var hy=cy;function py(t,e,r,n,i){if(t===e){return true}if(t==null||e==null||!Dn(t)&&!Dn(e)){return t!==t&&e!==e}return hy(t,e,r,n,py,i)}var xy=py;var dy=1,vy=2;function gy(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null){return!o}t=Object(t);while(i--){var s=r[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t)){return false}}while(++i<o){s=r[i];var l=s[0],y=t[l],f=s[1];if(a&&s[2]){if(y===undefined&&!(l in t)){return false}}else{var u=new Mn;if(n){var c=n(y,f,l,t,e,u)}if(!(c===undefined?xy(f,y,dy|vy,n,u):c)){return false}}}return true}var wy=gy;function my(t){return t===t&&!ar(t)}var ky=my;function by(t){var e=io(t),r=e.length;while(r--){var n=e[r],i=t[n];e[r]=[n,i,ky(i)]}return e}var Ey=by;function My(e,r){return function(t){if(t==null){return false}return t[e]===r&&(r!==undefined||e in Object(t))}}var _y=My;function Cy(e){var r=Ey(e);if(r.length==1&&r[0][2]){return _y(r[0][0],r[0][1])}return function(t){return t===e||wy(t,e,r)}}var Py=Cy;var Ly="[object Symbol]";function Ny(t){return typeof t=="symbol"||Dn(t)&&ir(t)==Ly}var Sy=Ny;var Iy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jy=/^\w*$/;function By(t,e){if($n(t)){return false}var r=typeof t;if(r=="number"||r=="symbol"||r=="boolean"||t==null||Sy(t)){return true}return jy.test(t)||!Iy.test(t)||e!=null&&t in Object(e)}var Oy=By;var Ty="Expected a function";function Ry(i,o){if(typeof i!="function"||o!=null&&typeof o!="function"){throw new TypeError(Ty)}var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],r=a.cache;if(r.has(e)){return r.get(e)}var n=i.apply(this,t);a.cache=r.set(e,n)||r;return n};a.cache=new(Ry.Cache||wn);return a}Ry.Cache=wn;var Ay=Ry;var zy=500;function Fy(t){var e=Ay(t,function(t){if(r.size===zy){r.clear()}return t});var r=e.cache;return e}var Dy=Fy;var Gy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Vy=/\\(\\)?/g;var Wy=Dy(function(t){var i=[];if(t.charCodeAt(0)===46){i.push("")}t.replace(Gy,function(t,e,r,n){i.push(r?n.replace(Vy,"$1"):e||t)});return i});var Uy=Wy;function qy(t,e){var r=-1,n=t==null?0:t.length,i=Array(n);while(++r<n){i[r]=e(t[r],r,t)}return i}var Xy=qy;var Yy=1/0;var Hy=We?We.prototype:undefined,Zy=Hy?Hy.toString:undefined;function $y(t){if(typeof t=="string"){return t}if($n(t)){return Xy(t,$y)+""}if(Sy(t)){return Zy?Zy.call(t):""}var e=t+"";return e=="0"&&1/t==-Yy?"-0":e}var Qy=$y;function Jy(t){return t==null?"":Qy(t)}var Ky=Jy;function tf(t,e){if($n(t)){return t}return Oy(t,e)?[t]:Uy(Ky(t))}var ef=tf;var rf=1/0;function nf(t){if(typeof t=="string"||Sy(t)){return t}var e=t+"";return e=="0"&&1/t==-rf?"-0":e}var of=nf;function af(t,e){e=ef(e,t);var r=0,n=e.length;while(t!=null&&r<n){t=t[of(e[r++])]}return r&&r==n?t:undefined}var sf=af;function lf(t,e,r){var n=t==null?undefined:sf(t,e);return n===undefined?r:n}var yf=lf;function ff(t,e){return t!=null&&e in Object(t)}var uf=ff;function cf(t,e,r){e=ef(e,t);var n=-1,i=e.length,o=false;while(++n<i){var a=of(e[n]);if(!(o=t!=null&&r(t,a))){break}t=t[a]}if(o||++n!=i){return o}i=t==null?0:t.length;return!!i&&ai(i)&&ni(a,i)&&($n(t)||Hn(t))}var hf=cf;function pf(t,e){return t!=null&&hf(t,e,uf)}var xf=pf;var df=1,vf=2;function gf(r,n){if(Oy(r)&&ky(n)){return _y(of(r),n)}return function(t){var e=yf(t,r);return e===undefined&&e===n?xf(t,r):xy(n,e,df|vf)}}var wf=gf;function mf(e){return function(t){return t==null?undefined:t[e]}}var kf=mf;function bf(e){return function(t){return sf(t,e)}}var Ef=bf;function Mf(t){return Oy(t)?kf(of(t)):Ef(t)}var _f=Mf;function Cf(t){if(typeof t=="function"){return t}if(t==null){return ul}if(typeof t=="object"){return $n(t)?wf(t[0],t[1]):Py(t)}return _f(t)}var Pf=Cf;function Lf(t,e){var r=$n(t)?bo:gl;return r(t,Pf(e,3))}var Nf=Lf;var Sf=Object.prototype;var If=Sf.hasOwnProperty;function jf(t,e){return t!=null&&If.call(t,e)}var Bf=jf;function Of(t,e){return t!=null&&hf(t,e,Bf)}var Tf=Of;var Rf="[object Map]",Af="[object Set]";var zf=Object.prototype;var Ff=zf.hasOwnProperty;function Df(t){if(t==null){return true}if(ro(t)&&($n(t)||typeof t=="string"||typeof t.splice=="function"||Kn(t)||Fi(t)||Hn(t))){return!t.length}var e=ha(t);if(e==Rf||e==Af){return!t.size}if(Xi(t)){return!to(t).length}for(var r in t){if(Ff.call(t,r)){return false}}return true}var Gf=Df;function Vf(t){return t===undefined}var Wf=Vf;function Uf(t,n){var i=-1,o=ro(t)?Array(t.length):[];yl(t,function(t,e,r){o[++i]=n(t,e,r)});return o}var qf=Uf;function Xf(t,e){var r=$n(t)?Xy:qf;return r(t,Pf(e,3))}var Yf=Xf;function Hf(t,e,r,n){var i=-1,o=t==null?0:t.length;if(n&&o){r=t[++i]}while(++i<o){r=e(r,t[i],i,t)}return r}var Zf=Hf;function $f(t,n,i,o,e){e(t,function(t,e,r){i=o?(o=false,t):n(i,t,e,r)});return i}var Qf=$f;function Jf(t,e,r){var n=$n(t)?Zf:Qf,i=arguments.length<3;return n(t,Pf(e,4),r,i,yl)}var Kf=Jf;var tu="[object String]";function eu(t){return typeof t=="string"||!$n(t)&&Dn(t)&&ir(t)==tu}var ru=eu;var nu=kf("length");var iu=nu;var ou="\\ud800-\\udfff",au="\\u0300-\\u036f",su="\\ufe20-\\ufe2f",lu="\\u20d0-\\u20ff",yu=au+su+lu,fu="\\ufe0e\\ufe0f";var uu="\\u200d";var cu=RegExp("["+uu+ou+yu+fu+"]");function hu(t){return cu.test(t)}var pu=hu;var xu="\\ud800-\\udfff",du="\\u0300-\\u036f",vu="\\ufe20-\\ufe2f",gu="\\u20d0-\\u20ff",wu=du+vu+gu,mu="\\ufe0e\\ufe0f";var ku="["+xu+"]",bu="["+wu+"]",Eu="\\ud83c[\\udffb-\\udfff]",Mu="(?:"+bu+"|"+Eu+")",_u="[^"+xu+"]",Cu="(?:\\ud83c[\\udde6-\\uddff]){2}",Pu="[\\ud800-\\udbff][\\udc00-\\udfff]",Lu="\\u200d";var Nu=Mu+"?",Su="["+mu+"]?",Iu="(?:"+Lu+"(?:"+[_u,Cu,Pu].join("|")+")"+Su+Nu+")*",ju=Su+Nu+Iu,Bu="(?:"+[_u+bu+"?",bu,Cu,Pu,ku].join("|")+")";var Ou=RegExp(Eu+"(?="+Eu+")|"+Bu+ju,"g");function Tu(t){var e=Ou.lastIndex=0;while(Ou.test(t)){++e}return e}var Ru=Tu;function Au(t){return pu(t)?Ru(t):iu(t)}var zu=Au;var Fu="[object Map]",Du="[object Set]";function Gu(t){if(t==null){return 0}if(ro(t)){return ru(t)?zu(t):t.length}var e=ha(t);if(e==Fu||e==Du){return t.size}return to(t).length}var Vu=Gu;function Wu(t,n,i){var e=$n(t),r=e||Kn(t)||Fi(t);n=Pf(n,4);if(i==null){var o=t&&t.constructor;if(r){i=e?new o:[]}else if(ar(t)){i=cr(o)?rs(To(t)):{}}else{i={}}}(r?Cn:ol)(t,function(t,e,r){return n(i,t,e,r)});return i}var Uu=Wu;var qu=We?We.isConcatSpreadable:undefined;function Xu(t){return $n(t)||Hn(t)||!!(qu&&t&&t[qu])}var Yu=Xu;function Hu(t,e,r,n,i){var o=-1,a=t.length;r||(r=Yu);i||(i=[]);while(++o<a){var s=t[o];if(e>0&&r(s)){if(e>1){Hu(s,e-1,r,n,i)}else{Bo(i,s)}}else if(!n){i[i.length]=s}}return i}var Zu=Hu;function $u(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Qu=$u;var Ju=Math.max;function Ku(o,a,s){a=Ju(a===undefined?o.length-1:a,0);return function(){var t=arguments,e=-1,r=Ju(t.length-a,0),n=Array(r);while(++e<r){n[e]=t[a+e]}e=-1;var i=Array(a+1);while(++e<a){i[e]=t[e]}i[a]=s(n);return Qu(o,this,i)}}var tc=Ku;var ec=!Ln?ul:function(t,e){return Ln(t,"toString",{configurable:true,enumerable:false,value:Ks(e),writable:true})};var rc=ec;var nc=800,ic=16;var oc=Date.now;function ac(r){var n=0,i=0;return function(){var t=oc(),e=ic-(t-i);i=t;if(e>0){if(++n>=nc){return arguments[0]}}else{n=0}return r.apply(undefined,arguments)}}var sc=ac;var lc=sc(rc);var yc=lc;function fc(t,e){return yc(tc(t,e,ul),t+"")}var uc=fc;function cc(t,e,r,n){var i=t.length,o=r+(n?1:-1);while(n?o--:++o<i){if(e(t[o],o,t)){return o}}return-1}var hc=cc;function pc(t){return t!==t}var xc=pc;function dc(t,e,r){var n=r-1,i=t.length;while(++n<i){if(t[n]===e){return n}}return-1}var vc=dc;function gc(t,e,r){return e===e?vc(t,e,r):hc(t,xc,r)}var wc=gc;function mc(t,e){var r=t==null?0:t.length;return!!r&&wc(t,e,0)>-1}var kc=mc;function bc(t,e,r){var n=-1,i=t==null?0:t.length;while(++n<i){if(r(e,t[n])){return true}}return false}var Ec=bc;function Mc(){}var _c=Mc;var Cc=1/0;var Pc=!(Jo&&1/Al(new Jo([,-0]))[1]==Cc)?_c:function(t){return new Jo(t)};var Lc=Pc;var Nc=200;function Sc(t,e,r){var n=-1,i=kc,o=t.length,a=true,s=[],l=s;if(r){a=false;i=Ec}else if(o>=Nc){var y=e?null:Lc(t);if(y){return Al(y)}a=false;i=Nl;l=new _l}else{l=e?[]:s}t:while(++n<o){var f=t[n],u=e?e(f):f;f=r||f!==0?f:0;if(a&&u===u){var c=l.length;while(c--){if(l[c]===u){continue t}}if(e){l.push(u)}s.push(f)}else if(!i(l,u,r)){if(l!==s){l.push(u)}s.push(f)}}return s}var Ic=Sc;function jc(t){return Dn(t)&&ro(t)}var Bc=jc;var Oc=uc(function(t){return Ic(Zu(t,1,Bc,true))});var Tc=Oc;function Rc(e,t){return Xy(t,function(t){return e[t]})}var Ac=Rc;function zc(t){return t==null?[]:Ac(t,io(t))}var Fc=zc;var Dc;if(typeof c==="function"){try{Dc={clone:Qs,constant:Ks,each:dl,filter:Nf,has:Tf,isArray:$n,isEmpty:Gf,isFunction:cr,isUndefined:Wf,keys:io,map:Yf,reduce:Kf,size:Vu,transform:Uu,union:Tc,values:Fc}}catch(t){}}if(!Dc){Dc=window._}var Gc=Dc;var Vc=Xc;var Wc="\0",Uc="\0",qc="";function Xc(t){this._isDirected=Gc.has(t,"directed")?t.directed:true;this._isMultigraph=Gc.has(t,"multigraph")?t.multigraph:false;this._isCompound=Gc.has(t,"compound")?t.compound:false;this._label=undefined;this._defaultNodeLabelFn=Gc.constant(undefined);this._defaultEdgeLabelFn=Gc.constant(undefined);this._nodes={};if(this._isCompound){this._parent={};this._children={};this._children[Uc]={}}this._in={};this._preds={};this._out={};this._sucs={};this._edgeObjs={};this._edgeLabels={}}Xc.prototype._nodeCount=0;Xc.prototype._edgeCount=0;Xc.prototype.isDirected=function(){return this._isDirected};Xc.prototype.isMultigraph=function(){return this._isMultigraph};Xc.prototype.isCompound=function(){return this._isCompound};Xc.prototype.setGraph=function(t){this._label=t;return this};Xc.prototype.graph=function(){return this._label};Xc.prototype.setDefaultNodeLabel=function(t){if(!Gc.isFunction(t)){t=Gc.constant(t)}this._defaultNodeLabelFn=t;return this};Xc.prototype.nodeCount=function(){return this._nodeCount};Xc.prototype.nodes=function(){return Gc.keys(this._nodes)};Xc.prototype.sources=function(){var e=this;return Gc.filter(this.nodes(),function(t){return Gc.isEmpty(e._in[t])})};Xc.prototype.sinks=function(){var e=this;return Gc.filter(this.nodes(),function(t){return Gc.isEmpty(e._out[t])})};Xc.prototype.setNodes=function(t,e){var r=arguments;var n=this;Gc.each(t,function(t){if(r.length>1){n.setNode(t,e)}else{n.setNode(t)}});return this};Xc.prototype.setNode=function(t,e){if(Gc.has(this._nodes,t)){if(arguments.length>1){this._nodes[t]=e}return this}this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t);if(this._isCompound){this._parent[t]=Uc;this._children[t]={};this._children[Uc][t]=true}this._in[t]={};this._preds[t]={};this._out[t]={};this._sucs[t]={};++this._nodeCount;return this};Xc.prototype.node=function(t){return this._nodes[t]};Xc.prototype.hasNode=function(t){return Gc.has(this._nodes,t)};Xc.prototype.removeNode=function(t){var e=this;if(Gc.has(this._nodes,t)){var r=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t];if(this._isCompound){this._removeFromParentsChildList(t);delete this._parent[t];Gc.each(this.children(t),function(t){e.setParent(t)});delete this._children[t]}Gc.each(Gc.keys(this._in[t]),r);delete this._in[t];delete this._preds[t];Gc.each(Gc.keys(this._out[t]),r);delete this._out[t];delete this._sucs[t];--this._nodeCount}return this};Xc.prototype.setParent=function(t,e){if(!this._isCompound){throw new Error("Cannot set parent in a non-compound graph")}if(Gc.isUndefined(e)){e=Uc}else{e+="";for(var r=e;!Gc.isUndefined(r);r=this.parent(r)){if(r===t){throw new Error("Setting "+e+" as parent of "+t+" would create a cycle")}}this.setNode(e)}this.setNode(t);this._removeFromParentsChildList(t);this._parent[t]=e;this._children[e][t]=true;return this};Xc.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]};Xc.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==Uc){return e}}};Xc.prototype.children=function(t){if(Gc.isUndefined(t)){t=Uc}if(this._isCompound){var e=this._children[t];if(e){return Gc.keys(e)}}else if(t===Uc){return this.nodes()}else if(this.hasNode(t)){return[]}};Xc.prototype.predecessors=function(t){var e=this._preds[t];if(e){return Gc.keys(e)}};Xc.prototype.successors=function(t){var e=this._sucs[t];if(e){return Gc.keys(e)}};Xc.prototype.neighbors=function(t){var e=this.predecessors(t);if(e){return Gc.union(e,this.successors(t))}};Xc.prototype.isLeaf=function(t){var e;if(this.isDirected()){e=this.successors(t)}else{e=this.neighbors(t)}return e.length===0};Xc.prototype.filterNodes=function(r){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var i=this;Gc.each(this._nodes,function(t,e){if(r(e)){n.setNode(e,t)}});Gc.each(this._edgeObjs,function(t){if(n.hasNode(t.v)&&n.hasNode(t.w)){n.setEdge(t,i.edge(t))}});var o={};function a(t){var e=i.parent(t);if(e===undefined||n.hasNode(e)){o[t]=e;return e}else if(e in o){return o[e]}else{return a(e)}}if(this._isCompound){Gc.each(n.nodes(),function(t){n.setParent(t,a(t))})}return n};Xc.prototype.setDefaultEdgeLabel=function(t){if(!Gc.isFunction(t)){t=Gc.constant(t)}this._defaultEdgeLabelFn=t;return this};Xc.prototype.edgeCount=function(){return this._edgeCount};Xc.prototype.edges=function(){return Gc.values(this._edgeObjs)};Xc.prototype.setPath=function(t,r){var n=this,i=arguments;Gc.reduce(t,function(t,e){if(i.length>1){n.setEdge(t,e,r)}else{n.setEdge(t,e)}return e});return this};Xc.prototype.setEdge=function(){var t,e,r,n,i=false,o=arguments[0];if(typeof o==="object"&&o!==null&&"v"in o){t=o.v;e=o.w;r=o.name;if(arguments.length===2){n=arguments[1];i=true}}else{t=o;e=arguments[1];r=arguments[3];if(arguments.length>2){n=arguments[2];i=true}}t=""+t;e=""+e;if(!Gc.isUndefined(r)){r=""+r}var a=Zc(this._isDirected,t,e,r);if(Gc.has(this._edgeLabels,a)){if(i){this._edgeLabels[a]=n}return this}if(!Gc.isUndefined(r)&&!this._isMultigraph){throw new Error("Cannot set a named edge when isMultigraph = false")}this.setNode(t);this.setNode(e);this._edgeLabels[a]=i?n:this._defaultEdgeLabelFn(t,e,r);var s=$c(this._isDirected,t,e,r);t=s.v;e=s.w;Object.freeze(s);this._edgeObjs[a]=s;Yc(this._preds[e],t);Yc(this._sucs[t],e);this._in[e][a]=s;this._out[t][a]=s;this._edgeCount++;return this};Xc.prototype.edge=function(t,e,r){var n=arguments.length===1?Qc(this._isDirected,arguments[0]):Zc(this._isDirected,t,e,r);return this._edgeLabels[n]};Xc.prototype.hasEdge=function(t,e,r){var n=arguments.length===1?Qc(this._isDirected,arguments[0]):Zc(this._isDirected,t,e,r);return Gc.has(this._edgeLabels,n)};Xc.prototype.removeEdge=function(t,e,r){var n=arguments.length===1?Qc(this._isDirected,arguments[0]):Zc(this._isDirected,t,e,r),i=this._edgeObjs[n];if(i){t=i.v;e=i.w;delete this._edgeLabels[n];delete this._edgeObjs[n];Hc(this._preds[e],t);Hc(this._sucs[t],e);delete this._in[e][n];delete this._out[t][n];this._edgeCount--}return this};Xc.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=Gc.values(r);if(!e){return n}return Gc.filter(n,function(t){return t.v===e})}};Xc.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=Gc.values(r);if(!e){return n}return Gc.filter(n,function(t){return t.w===e})}};Xc.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r){return r.concat(this.outEdges(t,e))}};function Yc(t,e){if(t[e]){t[e]++}else{t[e]=1}}function Hc(t,e){if(!--t[e]){delete t[e]}}function Zc(t,e,r,n){var i=""+e;var o=""+r;if(!t&&i>o){var a=i;i=o;o=a}return i+qc+o+qc+(Gc.isUndefined(n)?Wc:n)}function $c(t,e,r,n){var i=""+e;var o=""+r;if(!t&&i>o){var a=i;i=o;o=a}var s={v:i,w:o};if(n){s.name=n}return s}function Qc(t,e){return Zc(t,e.v,e.w,e.name)}var Jc="2.1.7";var Kc={Graph:Vc,version:Jc};var th={write:eh,read:ih};function eh(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:rh(t),edges:nh(t)};if(!Gc.isUndefined(t.graph())){e.value=Gc.clone(t.graph())}return e}function rh(i){return Gc.map(i.nodes(),function(t){var e=i.node(t),r=i.parent(t),n={v:t};if(!Gc.isUndefined(e)){n.value=e}if(!Gc.isUndefined(r)){n.parent=r}return n})}function nh(n){return Gc.map(n.edges(),function(t){var e=n.edge(t),r={v:t.v,w:t.w};if(!Gc.isUndefined(t.name)){r.name=t.name}if(!Gc.isUndefined(e)){r.value=e}return r})}function ih(t){var e=new Vc(t.options).setGraph(t.value);Gc.each(t.nodes,function(t){e.setNode(t.v,t.value);if(t.parent){e.setParent(t.v,t.parent)}});Gc.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)});return e}var oh=ah;function ah(e){var r={},n=[],i;function o(t){if(Gc.has(r,t))return;r[t]=true;i.push(t);Gc.each(e.successors(t),o);Gc.each(e.predecessors(t),o)}Gc.each(e.nodes(),function(t){i=[];o(t);if(i.length){n.push(i)}});return n}var sh=lh;function lh(){this._arr=[];this._keyIndices={}}lh.prototype.size=function(){return this._arr.length};lh.prototype.keys=function(){return this._arr.map(function(t){return t.key})};lh.prototype.has=function(t){return Gc.has(this._keyIndices,t)};lh.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==undefined){return this._arr[e].priority}};lh.prototype.min=function(){if(this.size()===0){throw new Error("Queue underflow")}return this._arr[0].key};lh.prototype.add=function(t,e){var r=this._keyIndices;t=String(t);if(!Gc.has(r,t)){var n=this._arr;var i=n.length;r[t]=i;n.push({key:t,priority:e});this._decrease(i);return true}return false};lh.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();delete this._keyIndices[t.key];this._heapify(0);return t.key};lh.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority){throw new Error("New priority is greater than current priority. "+"Key: "+t+" Old: "+this._arr[r].priority+" New: "+e)}this._arr[r].priority=e;this._decrease(r)};lh.prototype._heapify=function(t){var e=this._arr;var r=2*t,n=r+1,i=t;if(r<e.length){i=e[r].priority<e[i].priority?r:i;if(n<e.length){i=e[n].priority<e[i].priority?n:i}if(i!==t){this._swap(t,i);this._heapify(i)}}};lh.prototype._decrease=function(t){var e=this._arr;var r=e[t].priority;var n;while(t!==0){n=t>>1;if(e[n].priority<r){break}this._swap(t,n);t=n}};lh.prototype._swap=function(t,e){var r=this._arr;var n=this._keyIndices;var i=r[t];var o=r[e];r[t]=o;r[e]=i;n[o.key]=t;n[i.key]=e};var yh=uh;var fh=Gc.constant(1);function uh(e,t,r,n){return ch(e,String(t),r||fh,n||function(t){return e.outEdges(t)})}function ch(t,r,o,e){var a={},s=new sh,l,y;var n=function(t){var e=t.v!==l?t.v:t.w,r=a[e],n=o(t),i=y.distance+n;if(n<0){throw new Error("dijkstra does not allow negative edge weights. "+"Bad edge: "+t+" Weight: "+n)}if(i<r.distance){r.distance=i;r.predecessor=l;s.decrease(e,i)}};t.nodes().forEach(function(t){var e=t===r?0:Number.POSITIVE_INFINITY;a[t]={distance:e};s.add(t,e)});while(s.size()>0){l=s.removeMin();y=a[l];if(y.distance===Number.POSITIVE_INFINITY){break}e(l).forEach(n)}return a}var hh=ph;function ph(r,n,i){return Gc.transform(r.nodes(),function(t,e){t[e]=yh(r,e,n,i)},{})}var xh=dh;function dh(i){var o=0,a=[],s={},l=[];function y(t){var e=s[t]={onStack:true,lowlink:o,index:o++};a.push(t);i.successors(t).forEach(function(t){if(!Gc.has(s,t)){y(t);e.lowlink=Math.min(e.lowlink,s[t].lowlink)}else if(s[t].onStack){e.lowlink=Math.min(e.lowlink,s[t].index)}});if(e.lowlink===e.index){var r=[],n;do{n=a.pop();s[n].onStack=false;r.push(n)}while(t!==n);l.push(r)}}i.nodes().forEach(function(t){if(!Gc.has(s,t)){y(t)}});return l}var vh=gh;function gh(e){return Gc.filter(xh(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var wh=kh;var mh=Gc.constant(1);function kh(e,t,r){return bh(e,t||mh,r||function(t){return e.outEdges(t)})}function bh(t,i,e){var l={},r=t.nodes();r.forEach(function(n){l[n]={};l[n][n]={distance:0};r.forEach(function(t){if(n!==t){l[n][t]={distance:Number.POSITIVE_INFINITY}}});e(n).forEach(function(t){var e=t.v===n?t.w:t.v,r=i(t);l[n][e]={distance:r,predecessor:n}})});r.forEach(function(a){var s=l[a];r.forEach(function(t){var o=l[t];r.forEach(function(t){var e=o[a];var r=s[t];var n=o[t];var i=e.distance+r.distance;if(i<n.distance){n.distance=i;n.predecessor=r.predecessor}})})});return l}var Eh=Mh;Mh.CycleException=_h;function Mh(e){var r={},n={},i=[];function o(t){if(Gc.has(n,t)){throw new _h}if(!Gc.has(r,t)){n[t]=true;r[t]=true;Gc.each(e.predecessors(t),o);delete n[t];i.push(t)}}Gc.each(e.sinks(),o);if(Gc.size(r)!==e.nodeCount()){throw new _h}return i}function _h(){}_h.prototype=new Error;var Ch=Ph;function Ph(t){try{Eh(t)}catch(t){if(t instanceof Eh.CycleException){return false}throw t}return true}var Lh=Nh;function Nh(e,t,r){if(!Gc.isArray(t)){t=[t]}var n=(e.isDirected()?e.successors:e.neighbors).bind(e);var i=[],o={};Gc.each(t,function(t){if(!e.hasNode(t)){throw new Error("Graph does not have node: "+t)}Sh(e,t,r==="post",o,n,i)});return i}function Sh(e,t,r,n,i,o){if(!Gc.has(n,t)){n[t]=true;if(!r){o.push(t)}Gc.each(i(t),function(t){Sh(e,t,r,n,i,o)});if(r){o.push(t)}}}var Ih=jh;function jh(t,e){return Lh(t,e,"post")}var Bh=Oh;function Oh(t,e){return Lh(t,e,"pre")}var Th=Rh;function Rh(t,i){var e=new Vc,o={},a=new sh,s;function r(t){var e=t.v===s?t.w:t.v,r=a.priority(e);if(r!==undefined){var n=i(t);if(n<r){o[e]=s;a.decrease(e,n)}}}if(t.nodeCount()===0){return e}Gc.each(t.nodes(),function(t){a.add(t,Number.POSITIVE_INFINITY);e.setNode(t)});a.decrease(t.nodes()[0],0);var n=false;while(a.size()>0){s=a.removeMin();if(Gc.has(o,s)){e.setEdge(s,o[s])}else if(n){throw new Error("Input graph is not connected: "+t)}else{n=true}t.nodeEdges(s).forEach(r)}return e}var Ah={components:oh,dijkstra:yh,dijkstraAll:hh,findCycles:vh,floydWarshall:wh,isAcyclic:Ch,postorder:Ih,preorder:Bh,prim:Th,tarjan:xh,topsort:Eh};var zh={Graph:Kc.Graph,json:th,alg:Ah,version:Kc.version};var Fh;if(typeof c==="function"){try{Fh=zh}catch(t){}}if(!Fh){Fh=window.graphlib}var Dh=Fh;var Gh=1,Vh=4;function Wh(t){return Hs(t,Gh|Vh)}var Uh=Wh;function qh(t,e,r){if(!ar(r)){return false}var n=typeof e;if(n=="number"?ro(r)&&ni(e,r.length):n=="string"&&e in r){return pe(r[e],t)}return false}var Xh=qh;var Yh=Object.prototype;var Hh=Yh.hasOwnProperty;var Zh=uc(function(t,e){t=Object(t);var r=-1;var n=e.length;var i=n>2?e[2]:undefined;if(i&&Xh(e[0],e[1],i)){n=1}while(++r<n){var o=e[r];var a=po(o);var s=-1;var l=a.length;while(++s<l){var y=a[s];var f=t[y];if(f===undefined||pe(f,Yh[y])&&!Hh.call(t,y)){t[y]=o[y]}}}return t});var $h=Zh;function Qh(a){return function(t,e,r){var n=Object(t);if(!ro(t)){var i=Pf(e,3);t=io(t);e=function(t){return i(n[t],t,n)}}var o=a(t,e,r);return o>-1?n[i?t[o]:o]:undefined}}var Jh=Qh;var Kh=0/0;var tp=/^\s+|\s+$/g;var ep=/^[-+]0x[0-9a-f]+$/i;var rp=/^0b[01]+$/i;var np=/^0o[0-7]+$/i;var ip=parseInt;function op(t){if(typeof t=="number"){return t}if(Sy(t)){return Kh}if(ar(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ar(e)?e+"":e}if(typeof t!="string"){return t===0?t:+t}t=t.replace(tp,"");var r=rp.test(t);return r||np.test(t)?ip(t.slice(2),r?2:8):ep.test(t)?Kh:+t}var ap=op;var sp=1/0,lp=17976931348623157e292;function yp(t){if(!t){return t===0?t:0}t=ap(t);if(t===sp||t===-sp){var e=t<0?-1:1;return e*lp}return t===t?t:0}var fp=yp;function up(t){var e=fp(t),r=e%1;return e===e?r?e-r:e:0}var cp=up;var hp=Math.max;function pp(t,e,r){var n=t==null?0:t.length;if(!n){return-1}var i=r==null?0:cp(r);if(i<0){i=hp(n+i,0)}return hc(t,Pf(e,3),i)}var xp=pp;var dp=Jh(xp);var vp=dp;function gp(t){var e=t==null?0:t.length;return e?Zu(t,1):[]}var wp=gp;function mp(t,e){return t==null?t:nl(t,hl(e),po)}var kp=mp;function bp(t){var e=t==null?0:t.length;return e?t[e-1]:undefined}var Ep=bp;function Mp(t,n){var i={};n=Pf(n,3);ol(t,function(t,e,r){Sn(i,e,n(t,e,r))});return i}var _p=Mp;function Cp(t,e,r){var n=-1,i=t.length;while(++n<i){var o=t[n],a=e(o);if(a!=null&&(s===undefined?a===a&&!Sy(a):r(a,s))){var s=a,l=o}}return l}var Pp=Cp;function Lp(t,e){return t>e}var Np=Lp;function Sp(t){return t&&t.length?Pp(t,ul,Np):undefined}var Ip=Sp;function jp(t,e,r){if(r!==undefined&&!pe(t[e],r)||r===undefined&&!(e in t)){Sn(t,e,r)}}var Bp=jp;var Op="[object Object]";var Tp=Function.prototype,Rp=Object.prototype;var Ap=Tp.toString;var zp=Rp.hasOwnProperty;var Fp=Ap.call(Object);function Dp(t){if(!Dn(t)||ir(t)!=Op){return false}var e=To(t);if(e===null){return true}var r=zp.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ap.call(r)==Fp}var Gp=Dp;function Vp(t,e){if(e=="__proto__"){return}return t[e]}var Wp=Vp;function Up(t){return Rn(t,po(t))}var qp=Up;function Xp(t,e,r,n,i,o,a){var s=Wp(t,r),l=Wp(e,r),y=a.get(l);if(y){Bp(t,r,y);return}var f=o?o(s,l,r+"",t,e,a):undefined;var u=f===undefined;if(u){var c=$n(l),h=!c&&Kn(l),p=!c&&!h&&Fi(l);f=l;if(c||h||p){if($n(s)){f=s}else if(Bc(s)){f=mo(s)}else if(h){u=false;f=go(l,true)}else if(p){u=false;f=ja(l,true)}else{f=[]}}else if(Gp(l)||Hn(l)){f=s;if(Hn(s)){f=qp(s)}else if(!ar(s)||cr(s)){f=is(l)}}else{u=false}}if(u){a.set(l,f);i(f,l,n,o,a);a["delete"](l)}Bp(t,r,f)}var Yp=Xp;function Hp(n,i,o,a,s){if(n===i){return}nl(i,function(t,e){if(ar(t)){s||(s=new Mn);Yp(n,i,e,o,Hp,a,s)}else{var r=a?a(Wp(n,e),t,e+"",n,i,s):undefined;if(r===undefined){r=t}Bp(n,e,r)}},po)}var Zp=Hp;function $p(s){return uc(function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:undefined,o=n>2?e[2]:undefined;i=s.length>3&&typeof i=="function"?(n--,i):undefined;if(o&&Xh(e[0],e[1],o)){i=n<3?undefined:i;n=1}t=Object(t);while(++r<n){var a=e[r];if(a){s(t,a,r,i)}}return t})}var Qp=$p;var Jp=Qp(function(t,e,r){Zp(t,e,r)});var Kp=Jp;function tx(t,e){return t<e}var ex=tx;function rx(t){return t&&t.length?Pp(t,ul,ex):undefined}var nx=rx;function ix(t,e){return t&&t.length?Pp(t,Pf(e,2),ex):undefined}var ox=ix;var ax=function(){return Ge.Date.now()};var sx=ax;function lx(t,e,r,n){if(!ar(t)){return t}e=ef(e,t);var i=-1,o=e.length,a=o-1,s=t;while(s!=null&&++i<o){var l=of(e[i]),y=r;if(i!=a){var f=s[l];y=n?n(f,l,s):undefined;if(y===undefined){y=ar(f)?f:ni(e[i+1])?[]:{}}}On(s,l,y);s=s[l]}return t}var yx=lx;function fx(t,e,r){var n=-1,i=e.length,o={};while(++n<i){var a=e[n],s=sf(t,a);if(r(s,a)){yx(o,ef(a,t),s)}}return o}var ux=fx;function cx(r,t){return ux(r,t,function(t,e){return xf(r,e)})}var hx=cx;function px(t){return yc(tc(t,undefined,wp),t+"")}var xx=px;var dx=xx(function(t,e){return t==null?{}:hx(t,e)});var vx=dx;var gx=Math.ceil,wx=Math.max;function mx(t,e,r,n){var i=-1,o=wx(gx((e-t)/(r||1)),0),a=Array(o);while(o--){a[n?o:++i]=t;t+=r}return a}var kx=mx;function bx(n){return function(t,e,r){if(r&&typeof r!="number"&&Xh(t,e,r)){e=r=undefined}t=fp(t);if(e===undefined){e=t;t=0}else{e=fp(e)}r=r===undefined?t<e?1:-1:fp(r);return kx(t,e,r,n)}}var Ex=bx;var Mx=Ex();var _x=Mx;function Cx(t,e){var r=t.length;t.sort(e);while(r--){t[r]=t[r].value}return t}var Px=Cx;function Lx(t,e){if(t!==e){var r=t!==undefined,n=t===null,i=t===t,o=Sy(t);var a=e!==undefined,s=e===null,l=e===e,y=Sy(e);if(!s&&!y&&!o&&t>e||o&&a&&l&&!s&&!y||n&&a&&l||!r&&l||!i){return 1}if(!n&&!o&&!y&&t<e||y&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l){return-1}}return 0}var Nx=Lx;function Sx(t,e,r){var n=-1,i=t.criteria,o=e.criteria,a=i.length,s=r.length;while(++n<a){var l=Nx(i[n],o[n]);if(l){if(n>=s){return l}var y=r[n];return l*(y=="desc"?-1:1)}}return t.index-e.index}var Ix=Sx;function jx(t,i,r){var o=-1;i=Xy(i.length?i:[ul],Ti(Pf));var e=qf(t,function(e,t,r){var n=Xy(i,function(t){return t(e)});return{criteria:n,index:++o,value:e}});return Px(e,function(t,e){return Ix(t,e,r)})}var Bx=jx;var Ox=uc(function(t,e){if(t==null){return[]}var r=e.length;if(r>1&&Xh(t,e[0],e[1])){e=[]}else if(r>2&&Xh(e[0],e[1],e[2])){e=[e[0]]}return Bx(t,Zu(e,1),[])});var Tx=Ox;var Rx=0;function Ax(t){var e=++Rx;return Ky(t)+e}var zx=Ax;function Fx(t,e,r){var n=-1,i=t.length,o=e.length,a={};while(++n<i){var s=n<o?e[n]:undefined;r(a,t[n],s)}return a}var Dx=Fx;function Gx(t,e){return Dx(t||[],e||[],On)}var Vx=Gx;var Wx;if(typeof c==="function"){try{Wx={cloneDeep:Uh,constant:Ks,defaults:$h,each:dl,filter:Nf,find:vp,flatten:wp,forEach:xl,forIn:kp,has:Tf,isUndefined:Wf,last:Ep,map:Yf,mapValues:_p,max:Ip,merge:Kp,min:nx,minBy:ox,now:sx,pick:vx,range:_x,reduce:Kf,sortBy:Tx,uniqueId:zx,values:Fc,zipObject:Vx}}catch(t){}}if(!Wx){Wx=window._}var Ux=Wx;var qx=Xx;function Xx(){var t={};t._next=t._prev=t;this._sentinel=t}Xx.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t){Yx(e);return e}};Xx.prototype.enqueue=function(t){var e=this._sentinel;if(t._prev&&t._next){Yx(t)}t._next=e._next;e._next._prev=t;e._next=t;t._prev=e};Xx.prototype.toString=function(){var t=[],e=this._sentinel,r=e._prev;while(r!==e){t.push(JSON.stringify(r,Hx));r=r._prev}return"["+t.join(", ")+"]"};function Yx(t){t._prev._next=t._next;t._next._prev=t._prev;delete t._next;delete t._prev}function Hx(t,e){if(t!=="_next"&&t!=="_prev"){return e}}var Zx=Dh.Graph;var $x=Jx;var Qx=Ux.constant(1);function Jx(e,t){if(e.nodeCount()<=1){return[]}var r=ed(e,t||Qx);var n=Kx(r.graph,r.buckets,r.zeroIdx);return Ux.flatten(Ux.map(n,function(t){return e.outEdges(t.v,t.w)}),true)}function Kx(t,e,r){var n=[],i=e[e.length-1],o=e[0];var a;while(t.nodeCount()){while(a=o.dequeue()){td(t,e,r,a)}while(a=i.dequeue()){td(t,e,r,a)}if(t.nodeCount()){for(var s=e.length-2;s>0;--s){a=e[s].dequeue();if(a){n=n.concat(td(t,e,r,a,true));break}}}}return n}function td(i,o,a,t,n){var s=n?[]:undefined;Ux.forEach(i.inEdges(t.v),function(t){var e=i.edge(t),r=i.node(t.v);if(n){s.push({v:t.v,w:t.w})}r.out-=e;rd(o,a,r)});Ux.forEach(i.outEdges(t.v),function(t){var e=i.edge(t),r=t.w,n=i.node(r);n["in"]-=e;rd(o,a,n)});i.removeNode(t.v);return s}function ed(t,i){var o=new Zx,a=0,s=0;Ux.forEach(t.nodes(),function(t){o.setNode(t,{v:t,in:0,out:0})});Ux.forEach(t.edges(),function(t){var e=o.edge(t.v,t.w)||0,r=i(t),n=e+r;o.setEdge(t.v,t.w,n);s=Math.max(s,o.node(t.v).out+=r);a=Math.max(a,o.node(t.w)["in"]+=r)});var e=Ux.range(s+a+3).map(function(){return new qx});var r=a+1;Ux.forEach(o.nodes(),function(t){rd(e,r,o.node(t))});return{graph:o,buckets:e,zeroIdx:r}}function rd(t,e,r){if(!r.out){t[0].enqueue(r)}else if(!r["in"]){t[t.length-1].enqueue(r)}else{t[r.out-r["in"]+e].enqueue(r)}}var nd={run:id,undo:ad};function id(r){var t=r.graph().acyclicer==="greedy"?$x(r,e(r)):od(r);Ux.forEach(t,function(t){var e=r.edge(t);r.removeEdge(t);e.forwardName=t.name;e.reversed=true;r.setEdge(t.w,t.v,e,Ux.uniqueId("rev"))});function e(e){return function(t){return e.edge(t).weight}}}function od(e){var r=[],n={},i={};function o(t){if(Ux.has(i,t)){return}i[t]=true;n[t]=true;Ux.forEach(e.outEdges(t),function(t){if(Ux.has(n,t.w)){r.push(t)}else{o(t.w)}});delete n[t]}Ux.forEach(e.nodes(),o);return r}function ad(n){Ux.forEach(n.edges(),function(t){var e=n.edge(t);if(e.reversed){n.removeEdge(t);var r=e.forwardName;delete e.reversed;delete e.forwardName;n.setEdge(t.w,t.v,e,r)}})}var sd=Dh.Graph;var ld={addDummyNode:yd,simplify:fd,asNonCompoundGraph:ud,successorWeights:cd,predecessorWeights:hd,intersectRect:pd,buildLayerMatrix:xd,normalizeRanks:dd,removeEmptyRanks:vd,addBorderNode:gd,maxRank:wd,partition:md,time:kd,notime:bd};function yd(t,e,r,n){var i;do{i=Ux.uniqueId(n)}while(t.hasNode(i));r.dummy=e;t.setNode(i,r);return i}function fd(n){var i=(new sd).setGraph(n.graph());Ux.forEach(n.nodes(),function(t){i.setNode(t,n.node(t))});Ux.forEach(n.edges(),function(t){var e=i.edge(t.v,t.w)||{weight:0,minlen:1},r=n.edge(t);i.setEdge(t.v,t.w,{weight:e.weight+r.weight,minlen:Math.max(e.minlen,r.minlen)})});return i}function ud(e){var r=new sd({multigraph:e.isMultigraph()}).setGraph(e.graph());Ux.forEach(e.nodes(),function(t){if(!e.children(t).length){r.setNode(t,e.node(t))}});Ux.forEach(e.edges(),function(t){r.setEdge(t,e.edge(t))});return r}function cd(r){var t=Ux.map(r.nodes(),function(t){var e={};Ux.forEach(r.outEdges(t),function(t){e[t.w]=(e[t.w]||0)+r.edge(t).weight});return e});return Ux.zipObject(r.nodes(),t)}function hd(r){var t=Ux.map(r.nodes(),function(t){var e={};Ux.forEach(r.inEdges(t),function(t){e[t.v]=(e[t.v]||0)+r.edge(t).weight});return e});return Ux.zipObject(r.nodes(),t)}function pd(t,e){var r=t.x;var n=t.y;var i=e.x-r;var o=e.y-n;var a=t.width/2;var s=t.height/2;if(!i&&!o){throw new Error("Not possible to find intersection inside of the rectangle")}var l,y;if(Math.abs(o)*a>Math.abs(i)*s){if(o<0){s=-s}l=s*i/o;y=s}else{if(i<0){a=-a}l=a;y=a*o/i}return{x:r+l,y:n+y}}function xd(n){var i=Ux.map(Ux.range(wd(n)+1),function(){return[]});Ux.forEach(n.nodes(),function(t){var e=n.node(t),r=e.rank;if(!Ux.isUndefined(r)){i[r][e.order]=t}});return i}function dd(r){var n=Ux.min(Ux.map(r.nodes(),function(t){return r.node(t).rank}));Ux.forEach(r.nodes(),function(t){var e=r.node(t);if(Ux.has(e,"rank")){e.rank-=n}})}function vd(r){var n=Ux.min(Ux.map(r.nodes(),function(t){return r.node(t).rank}));var i=[];Ux.forEach(r.nodes(),function(t){var e=r.node(t).rank-n;if(!i[e]){i[e]=[]}i[e].push(t)});var o=0,a=r.graph().nodeRankFactor;Ux.forEach(i,function(t,e){if(Ux.isUndefined(t)&&e%a!==0){--o}else if(o){Ux.forEach(t,function(t){r.node(t).rank+=o})}})}function gd(t,e,r,n){var i={width:0,height:0};if(arguments.length>=4){i.rank=r;i.order=n}return yd(t,"border",i,e)}function wd(r){return Ux.max(Ux.map(r.nodes(),function(t){var e=r.node(t).rank;if(!Ux.isUndefined(e)){return e}}))}function md(t,e){var r={lhs:[],rhs:[]};Ux.forEach(t,function(t){if(e(t)){r.lhs.push(t)}else{r.rhs.push(t)}});return r}function kd(t,e){var r=Ux.now();try{return e()}finally{console.log(t+" time: "+(Ux.now()-r)+"ms")}}function bd(t,e){return e()}var Ed={run:Md,undo:Cd};function Md(e){e.graph().dummyChains=[];Ux.forEach(e.edges(),function(t){_d(e,t)})}function _d(t,e){var r=e.v,n=t.node(r).rank,i=e.w,o=t.node(i).rank,a=e.name,s=t.edge(e),l=s.labelRank;if(o===n+1)return;t.removeEdge(e);var y,f,u;for(u=0,++n;n<o;++u,++n){s.points=[];f={width:0,height:0,edgeLabel:s,edgeObj:e,rank:n};y=ld.addDummyNode(t,"edge",f,"_d");if(n===l){f.width=s.width;f.height=s.height;f.dummy="edge-label";f.labelpos=s.labelpos}t.setEdge(r,y,{weight:s.weight},a);if(u===0){t.graph().dummyChains.push(y)}r=y}t.setEdge(r,i,{weight:s.weight},a)}function Cd(i){Ux.forEach(i.graph().dummyChains,function(t){var e=i.node(t),r=e.edgeLabel,n;i.setEdge(e.edgeObj,r);while(e.dummy){n=i.successors(t)[0];i.removeNode(t);r.points.push({x:e.x,y:e.y});if(e.dummy==="edge-label"){r.x=e.x;r.y=e.y;r.width=e.width;r.height=e.height}t=n;e=i.node(t)}})}var Pd={longestPath:Ld,slack:Nd};function Ld(n){var i={};function o(t){var e=n.node(t);if(Ux.has(i,t)){return e.rank}i[t]=true;var r=Ux.min(Ux.map(n.outEdges(t),function(t){return o(t.w)-n.edge(t).minlen}));if(r===Number.POSITIVE_INFINITY||r===undefined||r===null){r=0}return e.rank=r}Ux.forEach(n.sources(),o)}function Nd(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var Sd=Dh.Graph,Id=Pd.slack;var jd=Bd;function Bd(t){var e=new Sd({directed:false});var r=t.nodes()[0],n=t.nodeCount();e.setNode(r,{});var i,o;while(Od(e,t)<n){i=Td(e,t);o=e.hasNode(i.v)?Id(t,i):-Id(t,i);Rd(e,t,o)}return e}function Od(i,o){function a(n){Ux.forEach(o.nodeEdges(n),function(t){var e=t.v,r=n===e?t.w:e;if(!i.hasNode(r)&&!Id(o,t)){i.setNode(r,{});i.setEdge(n,r,{});a(r)}})}Ux.forEach(i.nodes(),a);return i.nodeCount()}function Td(e,r){return Ux.minBy(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w)){return Id(r,t)}})}function Rd(t,e,r){Ux.forEach(t.nodes(),function(t){e.node(t).rank+=r})}var Ad=Pd.slack,zd=Pd.longestPath,Fd=Dh.alg.preorder,Dd=Dh.alg.postorder,Gd=ld.simplify;var Vd=Wd;Wd.initLowLimValues=Yd;Wd.initCutValues=Ud;Wd.calcCutValue=Xd;Wd.leaveEdge=Zd;Wd.enterEdge=$d;Wd.exchangeEdges=Qd;function Wd(t){t=Gd(t);zd(t);var e=jd(t);Yd(e);Ud(e,t);var r,n;while(r=Zd(e)){n=$d(e,t,r);Qd(e,t,r,n)}}function Ud(e,r){var t=Dd(e,e.nodes());t=t.slice(0,t.length-1);Ux.forEach(t,function(t){qd(e,r,t)})}function qd(t,e,r){var n=t.node(r),i=n.parent;t.edge(r,i).cutvalue=Xd(t,e,r)}function Xd(a,s,l){var t=a.node(l),y=t.parent,f=true,e=s.edge(l,y),u=0;if(!e){f=false;e=s.edge(y,l)}u=e.weight;Ux.forEach(s.nodeEdges(l),function(t){var e=t.v===l,r=e?t.w:t.v;if(r!==y){var n=e===f,i=s.edge(t).weight;u+=n?i:-i;if(Kd(a,l,r)){var o=a.edge(l,r).cutvalue;u+=n?-o:o}}});return u}function Yd(t,e){if(arguments.length<2){e=t.nodes()[0]}Hd(t,{},1,e)}function Hd(e,r,n,i,t){var o=n,a=e.node(i);r[i]=true;Ux.forEach(e.neighbors(i),function(t){if(!Ux.has(r,t)){n=Hd(e,r,n,t,i)}});a.low=o;a.lim=n++;if(t){a.parent=t}else{delete a.parent}return n}function Zd(e){return Ux.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function $d(e,r,t){var n=t.v,i=t.w;if(!r.hasEdge(n,i)){n=t.w;i=t.v}var o=e.node(n),a=e.node(i),s=o,l=false;if(o.lim>a.lim){s=a;l=true}var y=Ux.filter(r.edges(),function(t){return l===tv(e,e.node(t.v),s)&&l!==tv(e,e.node(t.w),s)});return Ux.minBy(y,function(t){return Ad(r,t)})}function Qd(t,e,r,n){var i=r.v,o=r.w;t.removeEdge(i,o);t.setEdge(n.v,n.w,{});Yd(t);Ud(t,e);Jd(t,e)}function Jd(i,o){var t=Ux.find(i.nodes(),function(t){return!o.node(t).parent}),e=Fd(i,t);e=e.slice(1);Ux.forEach(e,function(t){var e=i.node(t).parent,r=o.edge(t,e),n=false;if(!r){r=o.edge(e,t);n=true}o.node(t).rank=o.node(e).rank+(n?r.minlen:-r.minlen)})}function Kd(t,e,r){return t.hasEdge(e,r)}function tv(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}var ev=Pd.longestPath;var rv=nv;function nv(t){switch(t.graph().ranker){case"network-simplex":av(t);break;case"tight-tree":ov(t);break;case"longest-path":iv(t);break;default:av(t)}}var iv=ev;function ov(t){ev(t);jd(t)}function av(t){Vd(t)}var sv=lv;function lv(y){var f=fv(y);Ux.forEach(y.graph().dummyChains,function(t){var e=y.node(t),r=e.edgeObj,n=yv(y,f,r.v,r.w),i=n.path,o=n.lca,a=0,s=i[a],l=true;while(t!==r.w){e=y.node(t);if(l){while((s=i[a])!==o&&y.node(s).maxRank<e.rank){a++}if(s===o){l=false}}if(!l){while(a<i.length-1&&y.node(s=i[a+1]).minRank<=e.rank){a++}s=i[a]}y.setParent(t,s);t=y.successors(t)[0]}})}function yv(t,e,r,n){var i=[],o=[],a=Math.min(e[r].low,e[n].low),s=Math.max(e[r].lim,e[n].lim),l,y;l=r;do{l=t.parent(l);i.push(l)}while(l&&(e[l].low>a||s>e[l].lim));y=l;l=n;while((l=t.parent(l))!==y){o.push(l)}return{path:i.concat(o.reverse()),lca:y}}function fv(r){var n={},i=0;function o(t){var e=i;Ux.forEach(r.children(t),o);n[t]={low:e,lim:i++}}Ux.forEach(r.children(),o);return n}var uv={run:cv,cleanup:dv};function cv(e){var r=ld.addDummyNode(e,"root",{},"_root");var n=pv(e);var i=Ux.max(Ux.values(n))-1;var o=2*i+1;e.graph().nestingRoot=r;Ux.forEach(e.edges(),function(t){e.edge(t).minlen*=o});var a=xv(e)+1;Ux.forEach(e.children(),function(t){hv(e,r,o,a,i,n,t)});e.graph().nodeRankFactor=o}function hv(a,s,l,y,f,u,c){var t=a.children(c);if(!t.length){if(c!==s){a.setEdge(s,c,{weight:0,minlen:l})}return}var h=ld.addBorderNode(a,"_bt"),p=ld.addBorderNode(a,"_bb"),e=a.node(c);a.setParent(h,c);e.borderTop=h;a.setParent(p,c);e.borderBottom=p;Ux.forEach(t,function(t){hv(a,s,l,y,f,u,t);var e=a.node(t),r=e.borderTop?e.borderTop:t,n=e.borderBottom?e.borderBottom:t,i=e.borderTop?y:2*y,o=r!==n?1:f-u[c]+1;a.setEdge(h,r,{weight:i,minlen:o,nestingEdge:true});a.setEdge(n,p,{weight:i,minlen:o,nestingEdge:true})});if(!a.parent(c)){a.setEdge(s,h,{weight:0,minlen:f+u[c]})}}function pv(n){var i={};function o(t,e){var r=n.children(t);if(r&&r.length){Ux.forEach(r,function(t){o(t,e+1)})}i[t]=e}Ux.forEach(n.children(),function(t){o(t,1)});return i}function xv(r){return Ux.reduce(r.edges(),function(t,e){return t+r.edge(e).weight},0)}function dv(r){var t=r.graph();r.removeNode(t.nestingRoot);delete t.nestingRoot;Ux.forEach(r.edges(),function(t){var e=r.edge(t);if(e.nestingEdge){r.removeEdge(t)}})}var vv=gv;function gv(o){function a(t){var e=o.children(t),r=o.node(t);if(e.length){Ux.forEach(e,a)}if(Ux.has(r,"minRank")){r.borderLeft=[];r.borderRight=[];for(var n=r.minRank,i=r.maxRank+1;n<i;++n){wv(o,"borderLeft","_bl",t,r,n);wv(o,"borderRight","_br",t,r,n)}}}Ux.forEach(o.children(),a)}function wv(t,e,r,n,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],l=ld.addDummyNode(t,"border",a,r);i[e][o]=l;t.setParent(l,n);if(s){t.setEdge(s,l,{weight:1})}}var mv={adjust:kv,undo:bv};function kv(t){var e=t.graph().rankdir.toLowerCase();if(e==="lr"||e==="rl"){Ev(t)}}function bv(t){var e=t.graph().rankdir.toLowerCase();if(e==="bt"||e==="rl"){_v(t)}if(e==="lr"||e==="rl"){Pv(t);Ev(t)}}function Ev(e){Ux.forEach(e.nodes(),function(t){Mv(e.node(t))});Ux.forEach(e.edges(),function(t){Mv(e.edge(t))})}function Mv(t){var e=t.width;t.width=t.height;t.height=e}function _v(r){Ux.forEach(r.nodes(),function(t){Cv(r.node(t))});Ux.forEach(r.edges(),function(t){var e=r.edge(t);Ux.forEach(e.points,Cv);if(Ux.has(e,"y")){Cv(e)}})}function Cv(t){t.y=-t.y}function Pv(r){Ux.forEach(r.nodes(),function(t){Lv(r.node(t))});Ux.forEach(r.edges(),function(t){var e=r.edge(t);Ux.forEach(e.points,Lv);if(Ux.has(e,"x")){Lv(e)}})}function Lv(t){var e=t.x;t.x=t.y;t.y=e}var Nv=Sv;function Sv(r){var n={},t=Ux.filter(r.nodes(),function(t){return!r.children(t).length}),e=Ux.max(Ux.map(t,function(t){return r.node(t).rank})),i=Ux.map(Ux.range(e+1),function(){return[]});function o(t){if(Ux.has(n,t))return;n[t]=true;var e=r.node(t);i[e.rank].push(t);Ux.forEach(r.successors(t),o)}var a=Ux.sortBy(t,function(t){return r.node(t).rank});Ux.forEach(a,o);return i}var Iv=jv;function jv(t,e){var r=0;for(var n=1;n<e.length;++n){r+=Bv(t,e[n-1],e[n])}return r}function Bv(e,t,r){var n=Ux.zipObject(r,Ux.map(r,function(t,e){return e}));var i=Ux.flatten(Ux.map(t,function(t){return Ux.sortBy(Ux.map(e.outEdges(t),function(t){return{pos:n[t.w],weight:e.edge(t).weight}}),"pos")}),true);var o=1;while(o<r.length)o<<=1;var a=2*o-1;o-=1;var s=Ux.map(new Array(a),function(){return 0});var l=0;Ux.forEach(i.forEach(function(t){var e=t.pos+o;s[e]+=t.weight;var r=0;while(e>0){if(e%2){r+=s[e+1]}e=e-1>>1;s[e]+=t.weight}l+=t.weight*r}));return l}var Ov=Tv;function Tv(i,t){return Ux.map(t,function(t){var e=i.inEdges(t);if(!e.length){return{v:t}}else{var r=Ux.reduce(e,function(t,e){var r=i.edge(e),n=i.node(e.v);return{sum:t.sum+r.weight*n.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}})}var Rv=Av;function Av(t,e){var n={};Ux.forEach(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};if(!Ux.isUndefined(t.barycenter)){r.barycenter=t.barycenter;r.weight=t.weight}});Ux.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];if(!Ux.isUndefined(e)&&!Ux.isUndefined(r)){r.indegree++;e.out.push(n[t.w])}});var r=Ux.filter(n,function(t){return!t.indegree});return zv(r)}function zv(r){var t=[];function e(e){return function(t){if(t.merged){return}if(Ux.isUndefined(t.barycenter)||Ux.isUndefined(e.barycenter)||t.barycenter>=e.barycenter){Fv(e,t)}}}function n(e){return function(t){t["in"].push(e);if(--t.indegree===0){r.push(t)}}}while(r.length){var i=r.pop();t.push(i);Ux.forEach(i["in"].reverse(),e(i));Ux.forEach(i.out,n(i))}return Ux.map(Ux.filter(t,function(t){return!t.merged}),function(t){return Ux.pick(t,["vs","i","barycenter","weight"])})}function Fv(t,e){var r=0,n=0;if(t.weight){r+=t.barycenter*t.weight;n+=t.weight}if(e.weight){r+=e.barycenter*e.weight;n+=e.weight}t.vs=e.vs.concat(t.vs);t.barycenter=r/n;t.weight=n;t.i=Math.min(e.i,t.i);e.merged=true}var Dv=Gv;function Gv(t,e){var r=ld.partition(t,function(t){return Ux.has(t,"barycenter")});var n=r.lhs,i=Ux.sortBy(r.rhs,function(t){return-t.i}),o=[],a=0,s=0,l=0;n.sort(Wv(!!e));l=Vv(o,i,l);Ux.forEach(n,function(t){l+=t.vs.length;o.push(t.vs);a+=t.barycenter*t.weight;s+=t.weight;l=Vv(o,i,l)});var y={vs:Ux.flatten(o,true)};if(s){y.barycenter=a/s;y.weight=s}return y}function Vv(t,e,r){var n;while(e.length&&(n=Ux.last(e)).i<=r){e.pop();t.push(n.vs);r++}return r}function Wv(r){return function(t,e){if(t.barycenter<e.barycenter){return-1}else if(t.barycenter>e.barycenter){return 1}return!r?t.i-e.i:e.i-t.i}}var Uv=qv;function qv(r,t,n,i){var e=r.children(t),o=r.node(t),a=o?o.borderLeft:undefined,s=o?o.borderRight:undefined,l={};if(a){e=Ux.filter(e,function(t){return t!==a&&t!==s})}var y=Ov(r,e);Ux.forEach(y,function(t){if(r.children(t.v).length){var e=qv(r,t.v,n,i);l[t.v]=e;if(Ux.has(e,"barycenter")){Yv(t,e)}}});var f=Rv(y,n);Xv(f,l);var u=Dv(f,i);if(a){u.vs=Ux.flatten([a,u.vs,s],true);if(r.predecessors(a).length){var c=r.node(r.predecessors(a)[0]),h=r.node(r.predecessors(s)[0]);if(!Ux.has(u,"barycenter")){u.barycenter=0;u.weight=0}u.barycenter=(u.barycenter*u.weight+c.order+h.order)/(u.weight+2);u.weight+=2}}return u}function Xv(t,e){Ux.forEach(t,function(t){t.vs=Ux.flatten(t.vs.map(function(t){if(e[t]){return e[t].vs}return t}),true)})}function Yv(t,e){if(!Ux.isUndefined(t.barycenter)){t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight);t.weight+=e.weight}else{t.barycenter=e.barycenter;t.weight=e.weight}}var Hv=Dh.Graph;var Zv=$v;function $v(o,r,n){var a=Qv(o),s=new Hv({compound:true}).setGraph({root:a}).setDefaultNodeLabel(function(t){return o.node(t)});Ux.forEach(o.nodes(),function(i){var t=o.node(i),e=o.parent(i);if(t.rank===r||t.minRank<=r&&r<=t.maxRank){s.setNode(i);s.setParent(i,e||a);Ux.forEach(o[n](i),function(t){var e=t.v===i?t.w:t.v,r=s.edge(e,i),n=!Ux.isUndefined(r)?r.weight:0;s.setEdge(e,i,{weight:o.edge(t).weight+n})});if(Ux.has(t,"minRank")){s.setNode(i,{borderLeft:t.borderLeft[r],borderRight:t.borderRight[r]})}}});return s}function Qv(t){var e;while(t.hasNode(e=Ux.uniqueId("_root")));return e}var Jv=Kv;function Kv(i,o,t){var a={},s;Ux.forEach(t,function(t){var e=i.parent(t),r,n;while(e){r=i.parent(e);if(r){n=a[r];a[r]=e}else{n=s;s=e}if(n&&n!==e){o.setEdge(n,e);return}e=r}})}var tg=Dh.Graph;var eg=rg;function rg(t){var e=ld.maxRank(t),r=ng(t,Ux.range(1,e+1),"inEdges"),n=ng(t,Ux.range(e-1,-1,-1),"outEdges");var i=Nv(t);og(t,i);var o=Number.POSITIVE_INFINITY,a;for(var s=0,l=0;l<4;++s,++l){ig(s%2?r:n,s%4>=2);i=ld.buildLayerMatrix(t);var y=Iv(t,i);if(y<o){l=0;a=Ux.cloneDeep(i);o=y}}og(t,a)}function ng(e,t,r){return Ux.map(t,function(t){return Zv(e,t,r)})}function ig(t,n){var i=new tg;Ux.forEach(t,function(r){var t=r.graph().root;var e=Uv(r,t,i,n);Ux.forEach(e.vs,function(t,e){r.node(t).order=e});Jv(r,i,e.vs)})}function og(r,t){Ux.forEach(t,function(t){Ux.forEach(t,function(t,e){r.node(t).order=e})})}var ag=Dh.Graph;var sg={positionX:wg,findType1Conflicts:lg,findType2Conflicts:yg,addConflict:ug,hasConflict:cg,verticalAlignment:hg,horizontalCompaction:pg,alignCoordinates:vg,findSmallestWidthAlignment:dg,balance:gg};function lg(y,t){var f={};function e(t,n){var o=0,a=0,s=t.length,l=Ux.last(n);Ux.forEach(n,function(t,e){var r=fg(y,t),i=r?y.node(r).order:s;if(r||t===l){Ux.forEach(n.slice(a,e+1),function(n){Ux.forEach(y.predecessors(n),function(t){var e=y.node(t),r=e.order;if((r<o||i<r)&&!(e.dummy&&y.node(n).dummy)){ug(f,t,n)}})});a=e+1;o=i}});return n}Ux.reduce(t,e);return f}function yg(l,t){var a={};function y(e,t,r,n,i){var o;Ux.forEach(Ux.range(t,r),function(t){o=e[t];if(l.node(o).dummy){Ux.forEach(l.predecessors(o),function(t){var e=l.node(t);if(e.dummy&&(e.order<n||e.order>i)){ug(a,t,o)}})}})}function e(n,i){var o=-1,a,s=0;Ux.forEach(i,function(t,e){if(l.node(t).dummy==="border"){var r=l.predecessors(t);if(r.length){a=l.node(r[0]).order;y(i,s,e,o,a);s=e;o=a}}y(i,s,i.length,a,n.length)});return i}Ux.reduce(t,e);return a}function fg(e,t){if(e.node(t).dummy){return Ux.find(e.predecessors(t),function(t){return e.node(t).dummy})}}function ug(t,e,r){if(e>r){var n=e;e=r;r=n}var i=t[e];if(!i){t[e]=i={}}i[r]=true}function cg(t,e,r){if(e>r){var n=e;e=r;r=n}return Ux.has(t[e],r)}function hg(t,e,s,l){var y={},f={},u={};Ux.forEach(e,function(t){Ux.forEach(t,function(t,e){y[t]=t;f[t]=t;u[t]=e})});Ux.forEach(e,function(t){var a=-1;Ux.forEach(t,function(t){var e=l(t);if(e.length){e=Ux.sortBy(e,function(t){return u[t]});var r=(e.length-1)/2;for(var n=Math.floor(r),i=Math.ceil(r);n<=i;++n){var o=e[n];if(f[t]===t&&a<u[o]&&!cg(s,t,o)){f[o]=t;f[t]=y[t]=y[o];a=u[o]}}}})});return{root:y,align:f}}function pg(n,t,e,r,i){var o={},a=xg(n,t,e,i),s=i?"borderLeft":"borderRight";function l(t,e){var r=a.nodes();var n=r.pop();var i={};while(n){if(i[n]){t(n)}else{i[n]=true;r.push(n);r=r.concat(e(n))}n=r.pop()}}function y(t){o[t]=a.inEdges(t).reduce(function(t,e){return Math.max(t,o[e.v]+a.edge(e))},0)}function f(t){var e=a.outEdges(t).reduce(function(t,e){return Math.min(t,o[e.w]-a.edge(e))},Number.POSITIVE_INFINITY);var r=n.node(t);if(e!==Number.POSITIVE_INFINITY&&r.borderType!==s){o[t]=Math.max(o[t],e)}}l(y,a.predecessors.bind(a));l(f,a.successors.bind(a));Ux.forEach(r,function(t){o[t]=o[e[t]]});return o}function xg(o,t,a,e){var s=new ag,r=o.graph(),l=mg(r.nodesep,r.edgesep,e);Ux.forEach(t,function(t){var i;Ux.forEach(t,function(t){var e=a[t];s.setNode(e);if(i){var r=a[i],n=s.edge(r,e);s.setEdge(r,e,Math.max(l(o,t,i),n||0))}i=t})});return s}function dg(o,t){return Ux.minBy(Ux.values(t),function(t){var n=Number.NEGATIVE_INFINITY;var i=Number.POSITIVE_INFINITY;Ux.forIn(t,function(t,e){var r=kg(o,e)/2;n=Math.max(t+r,n);i=Math.min(t-r,i)});return n-i})}function vg(a,s){var t=Ux.values(s),l=Ux.min(t),y=Ux.max(t);Ux.forEach(["u","d"],function(o){Ux.forEach(["l","r"],function(t){var e=o+t,r=a[e],n;if(r===s)return;var i=Ux.values(r);n=t==="l"?l-Ux.min(i):y-Ux.max(i);if(n){a[e]=Ux.mapValues(r,function(t){return t+n})}})})}function gg(n,i){return Ux.mapValues(n.ul,function(t,e){if(i){return n[i.toLowerCase()][e]}else{var r=Ux.sortBy(Ux.map(n,e));return(r[1]+r[2])/2}})}function wg(o){var t=ld.buildLayerMatrix(o),a=Ux.merge(lg(o,t),yg(o,t));var s={},l;Ux.forEach(["u","d"],function(i){l=i==="u"?t:Ux.values(t).reverse();Ux.forEach(["l","r"],function(t){if(t==="r"){l=Ux.map(l,function(t){return Ux.values(t).reverse()})}var e=(i==="u"?o.predecessors:o.successors).bind(o);var r=hg(o,l,a,e);var n=pg(o,l,r.root,r.align,t==="r");if(t==="r"){n=Ux.mapValues(n,function(t){return-t})}s[i+t]=n})});var e=dg(o,s);vg(s,e);return gg(s,o.graph().align)}function mg(s,l,y){return function(t,e,r){var n=t.node(e),i=t.node(r),o=0,a;o+=n.width/2;if(Ux.has(n,"labelpos")){switch(n.labelpos.toLowerCase()){case"l":a=-n.width/2;break;case"r":a=n.width/2;break}}if(a){o+=y?a:-a}a=0;o+=(n.dummy?l:s)/2;o+=(i.dummy?l:s)/2;o+=i.width/2;if(Ux.has(i,"labelpos")){switch(i.labelpos.toLowerCase()){case"l":a=i.width/2;break;case"r":a=-i.width/2;break}}if(a){o+=y?a:-a}a=0;return o}}function kg(t,e){return t.node(e).width}var bg=sg.positionX;var Eg=Mg;function Mg(r){r=ld.asNonCompoundGraph(r);_g(r);Ux.forEach(bg(r),function(t,e){r.node(e).x=t})}function _g(r){var t=ld.buildLayerMatrix(r),n=r.graph().ranksep,i=0;Ux.forEach(t,function(t){var e=Ux.max(Ux.map(t,function(t){return r.node(t).height}));Ux.forEach(t,function(t){r.node(t).y=i+e/2});i+=e+n})}var Cg=ld.normalizeRanks,Pg=ld.removeEmptyRanks,Lg=ld,Ng=Dh.Graph;var Sg=Ig;function Ig(e,t){var r=t&&t.debugTiming?Lg.time:Lg.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){return Vg(e)});r("  runLayout",function(){jg(t,r)});r("  updateInputGraph",function(){Bg(e,t)})})}function jg(t,e){e("    makeSpaceForEdgeLabels",function(){Wg(t)});e("    removeSelfEdges",function(){Jg(t)});e("    acyclic",function(){nd.run(t)});e("    nestingGraph.run",function(){uv.run(t)});e("    rank",function(){rv(Lg.asNonCompoundGraph(t))});e("    injectEdgeLabelProxies",function(){Ug(t)});e("    removeEmptyRanks",function(){Pg(t)});e("    nestingGraph.cleanup",function(){uv.cleanup(t)});e("    normalizeRanks",function(){Cg(t)});e("    assignRankMinMax",function(){qg(t)});e("    removeEdgeLabelProxies",function(){Xg(t)});e("    normalize.run",function(){Ed.run(t)});e("    parentDummyChains",function(){sv(t)});e("    addBorderSegments",function(){vv(t)});e("    order",function(){eg(t)});e("    insertSelfEdges",function(){Kg(t)});e("    adjustCoordinateSystem",function(){mv.adjust(t)});e("    position",function(){Eg(t)});e("    positionSelfEdges",function(){tw(t)});e("    removeBorderNodes",function(){Qg(t)});e("    normalize.undo",function(){Ed.undo(t)});e("    fixupEdgeLabelCoords",function(){Zg(t)});e("    undoCoordinateSystem",function(){mv.undo(t)});e("    translateGraph",function(){Yg(t)});e("    assignNodeIntersects",function(){Hg(t)});e("    reversePoints",function(){$g(t)});e("    acyclic.undo",function(){nd.undo(t)})}function Bg(n,i){Ux.forEach(n.nodes(),function(t){var e=n.node(t),r=i.node(t);if(e){e.x=r.x;e.y=r.y;if(i.children(t).length){e.width=r.width;e.height=r.height}}});Ux.forEach(n.edges(),function(t){var e=n.edge(t),r=i.edge(t);e.points=r.points;if(Ux.has(r,"x")){e.x=r.x;e.y=r.y}});n.graph().width=i.graph().width;n.graph().height=i.graph().height}var Og=["nodesep","edgesep","ranksep","marginx","marginy"],Tg={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Rg=["acyclicer","ranker","rankdir","align"],Ag=["width","height"],zg={width:0,height:0},Fg=["minlen","weight","width","height","labeloffset"],Dg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Gg=["labelpos"];function Vg(r){var n=new Ng({multigraph:true,compound:true}),t=rw(r.graph());n.setGraph(Ux.merge({},Tg,ew(t,Og),Ux.pick(t,Rg)));Ux.forEach(r.nodes(),function(t){var e=rw(r.node(t));n.setNode(t,Ux.defaults(ew(e,Ag),zg));n.setParent(t,r.parent(t))});Ux.forEach(r.edges(),function(t){var e=rw(r.edge(t));n.setEdge(t,Ux.merge({},Dg,ew(e,Fg),Ux.pick(e,Gg)))});return n}function Wg(r){var n=r.graph();n.ranksep/=2;Ux.forEach(r.edges(),function(t){var e=r.edge(t);e.minlen*=2;if(e.labelpos.toLowerCase()!=="c"){if(n.rankdir==="TB"||n.rankdir==="BT"){e.width+=e.labeloffset}else{e.height+=e.labeloffset}}})}function Ug(o){Ux.forEach(o.edges(),function(t){var e=o.edge(t);if(e.width&&e.height){var r=o.node(t.v),n=o.node(t.w),i={rank:(n.rank-r.rank)/2+r.rank,e:t};Lg.addDummyNode(o,"edge-proxy",i,"_ep")}})}function qg(r){var n=0;Ux.forEach(r.nodes(),function(t){var e=r.node(t);if(e.borderTop){e.minRank=r.node(e.borderTop).rank;e.maxRank=r.node(e.borderBottom).rank;n=Ux.max(n,e.maxRank)}});r.graph().maxRank=n}function Xg(r){Ux.forEach(r.nodes(),function(t){var e=r.node(t);if(e.dummy==="edge-proxy"){r.edge(e.e).labelRank=e.rank;r.removeNode(t)}})}function Yg(r){var o=Number.POSITIVE_INFINITY,a=0,s=Number.POSITIVE_INFINITY,l=0,t=r.graph(),e=t.marginx||0,n=t.marginy||0;function i(t){var e=t.x,r=t.y,n=t.width,i=t.height;o=Math.min(o,e-n/2);a=Math.max(a,e+n/2);s=Math.min(s,r-i/2);l=Math.max(l,r+i/2)}Ux.forEach(r.nodes(),function(t){i(r.node(t))});Ux.forEach(r.edges(),function(t){var e=r.edge(t);if(Ux.has(e,"x")){i(e)}});o-=e;s-=n;Ux.forEach(r.nodes(),function(t){var e=r.node(t);e.x-=o;e.y-=s});Ux.forEach(r.edges(),function(t){var e=r.edge(t);Ux.forEach(e.points,function(t){t.x-=o;t.y-=s});if(Ux.has(e,"x")){e.x-=o}if(Ux.has(e,"y")){e.y-=s}});t.width=a-o+e;t.height=l-s+n}function Hg(a){Ux.forEach(a.edges(),function(t){var e=a.edge(t),r=a.node(t.v),n=a.node(t.w),i,o;if(!e.points){e.points=[];i=n;o=r}else{i=e.points[0];o=e.points[e.points.length-1]}e.points.unshift(Lg.intersectRect(r,i));e.points.push(Lg.intersectRect(n,o))})}function Zg(r){Ux.forEach(r.edges(),function(t){var e=r.edge(t);if(Ux.has(e,"x")){if(e.labelpos==="l"||e.labelpos==="r"){e.width-=e.labeloffset}switch(e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset;break}}})}function $g(r){Ux.forEach(r.edges(),function(t){var e=r.edge(t);if(e.reversed){e.points.reverse()}})}function Qg(a){Ux.forEach(a.nodes(),function(t){if(a.children(t).length){var e=a.node(t),r=a.node(e.borderTop),n=a.node(e.borderBottom),i=a.node(Ux.last(e.borderLeft)),o=a.node(Ux.last(e.borderRight));e.width=Math.abs(o.x-i.x);e.height=Math.abs(n.y-r.y);e.x=i.x+e.width/2;e.y=r.y+e.height/2}});Ux.forEach(a.nodes(),function(t){if(a.node(t).dummy==="border"){a.removeNode(t)}})}function Jg(r){Ux.forEach(r.edges(),function(t){if(t.v===t.w){var e=r.node(t.v);if(!e.selfEdges){e.selfEdges=[]}e.selfEdges.push({e:t,label:r.edge(t)});r.removeEdge(t)}})}function Kg(i){var t=Lg.buildLayerMatrix(i);Ux.forEach(t,function(t){var n=0;Ux.forEach(t,function(t,e){var r=i.node(t);r.order=e+n;Ux.forEach(r.selfEdges,function(t){Lg.addDummyNode(i,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:e+ ++n,e:t.e,label:t.label},"_se")});delete r.selfEdges})})}function tw(s){Ux.forEach(s.nodes(),function(t){var e=s.node(t);if(e.dummy==="selfedge"){var r=s.node(e.e.v),n=r.x+r.width/2,i=r.y,o=e.x-n,a=r.height/2;s.setEdge(e.e,e.label);s.removeNode(t);e.label.points=[{x:n+2*o/3,y:i-a},{x:n+5*o/6,y:i-a},{x:n+o,y:i},{x:n+5*o/6,y:i+a},{x:n+2*o/3,y:i+a}];e.label.x=e.x;e.label.y=e.y}})}function ew(t,e){return Ux.mapValues(Ux.pick(t,e),Number)}function rw(t){var r={};Ux.forEach(t,function(t,e){r[e.toLowerCase()]=t});return r}var nw=Dh.Graph;var iw={debugOrdering:ow};function ow(e){var t=ld.buildLayerMatrix(e);var n=new nw({compound:true,multigraph:true}).setGraph({});Ux.forEach(e.nodes(),function(t){n.setNode(t,{label:t});n.setParent(t,"layer"+e.node(t).rank)});Ux.forEach(e.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)});Ux.forEach(t,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"});Ux.reduce(t,function(t,e){n.setEdge(t,e,{style:"invis"});return e})});return n}var aw="0.8.4";var sw={graphlib:Dh,layout:Sg,debug:iw,util:{time:ld.time,notime:ld.notime},version:aw};var lw=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.apply=function(a){var s=new sw.graphlib.Graph({multigraph:true});s.setGraph(this.options);a.forEachNode(function(t){var e=t.getSize();s.setNode(t.id,{gn:t,width:Math.round(e.width),height:Math.round(e.height)})});a.forEachEdge(function(t){if(t.start.graph===a&&t.end.graph===a){s.setEdge(t.start.id,t.end.id,{ge:t,weight:t.attr("weight",1),label:{width:100,height:20}},t.id)}else{console.warn("GLayoutDagre: Ignoring edge %s (%s -> %s).",t.id,t.start.id,t.end.id)}});sw.layout(s);window.g=s;s.nodes().forEach(function(t){var e=s.node(t);if(!e){console.error("WTF? node is missing:",t,a.getNodeById(t));var r=a.getNodeById(t);r.setPosition(new B(0,0,a))}else{e.gn.setPosition(new B(Math.round(e.x),Math.round(e.y),a))}});s.edges().forEach(function(t){var e=s.edge(t);var r=[];for(var n=1;n<e.points.length-1;n++){var i=e.points[n];r.push(new B(Math.round(i.x),Math.round(i.y),a))}if(e.points.length>=3){var o=e.points[Math.floor(e.points.length/2)];e.ge.labelPosition=new B(o.x,o.y,a)}e.ge.points=r})};return e}(ae);var yw=function(t){f(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.apply=function(t){var e=this.options.width||500;var r=this.options.height||500;for(var n=0,i=t.nodes;n<i.length;n++){var o=i[n];o.setPosition(new B(e*Math.random(),r*Math.random(),t))}};return e}(ae);var fw=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isVertical=false;return t}return t}(fe);var uw=function(a){f(t,a);function t(t,e,r){var n=a.call(this,t,e,r)||this;n.connectedEdges=[];n.nestedGraph=null;var i=n.attr("x");var o=n.attr("y");if(i!==undefined&&o!==undefined&&i!==null&&o!==null){n.position=new B(i,o,n.graph)}return n}t.prototype.getAttributeDefaultValue=function(t){return this.graph.getNodeAttributeDefaultValue(t)};t.prototype.connectEdge=function(t){this.connectedEdges.push(t)};t.prototype.getNestedGraph=function(){if(this.nestedGraph===null){this.nestedGraph=this.graph.createNestedGraph(this)}return this.nestedGraph};t.prototype.hasNestedGraph=function(){return this.nestedGraph!==null&&this.nestedGraph.nodes.length>0};t.prototype.getShapeName=function(){return this.attr("shape",this.nestedGraph===null?"rect":"nested_graph")};t.prototype.getShape=function(){return this.shape};t.prototype.setShape=function(t){this.shape=t;this.size=undefined;this.boundingBox=undefined;return this};t.prototype.render=function(t){if(this.boundingBox){return this.shape.render(t,this)}else{throw new Error("Layout not applied to GNode.")}};t.prototype.applyLayout=function(){if(!this.shape){throw new Error("Shape not assigned to GNode.")}if(this.hasNestedGraph()){this.getNestedGraph().applyLayout()}this.size=this.shape.getMinSize(this);if(!this.size.isValid()){throw new Error("Failed to calculate node size.")}this.boundingBox=undefined};t.prototype.setPosition=function(t){this.position=t;this.boundingBox=undefined;return this};t.prototype.getPosition=function(){return this.position};t.prototype.getSize=function(){return this.size};t.prototype.getMargin=function(){return this.shape.getMargin(this)};t.prototype.getBoundingBox=function(){if(this.boundingBox!==undefined){return this.boundingBox}else if(this.position!==undefined&&this.size!==undefined){return this.boundingBox=this.size.placeAt(this.position)}else{throw new Error("Bounding box not available - position or size not known.")}};t.prototype.getConnectorVector=function(t,e){return this.shape.getConnectorVector(this,t,e)};t.prototype.getNestedGraphTransformation=function(){return this.shape.getNestedGraphTransformation(this)};return t}(r);var cw=function(){function e(t,e){this.classDefaults={};if(t){this.rootGraph=t}else{this.elementById={};this.elementCount=0;this.rootGraph=this}this.parentNode=e;this.nodes=[];this.edges=[]}e.prototype.createNestedGraph=function(t){return new e(this.rootGraph,t)};e.prototype.getEdgeById=function(t){if(t in this.rootGraph.elementById){var e=this.rootGraph.elementById[t];if(e instanceof s){return this.rootGraph.elementById[t]}else{throw new Error("Requested edge "+t+" is a node (conflicting IDs).")}}else{throw new Error("Edge not found: "+t)}};e.prototype.forEachEdge=function(t){for(var e=0,r=this.edges;e<r.length;e++){var n=r[e];if(t(n)===false){break}}};e.prototype.mapEdges=function(t){return this.edges.map(t)};e.prototype.addNode=function(t,e){if(t===undefined){t="_"+this.rootGraph.elementCount++}var r=new uw(this,t,e);this.add(r);return r};e.prototype.hasElement=function(t){return t in this.rootGraph.elementById};e.prototype.getNodeById=function(t){if(t in this.rootGraph.elementById){var e=this.rootGraph.elementById[t];if(e instanceof uw){return this.rootGraph.elementById[t]}else{throw new Error("Requested node "+t+" is an edge (conflicting IDs).")}}else{throw new Error("Node not found: "+t)}};e.prototype.forEachNode=function(t){for(var e=0,r=this.nodes;e<r.length;e++){var n=r[e];if(t(n)===false){break}}};e.prototype.mapNodes=function(t){return this.nodes.map(t)};e.prototype.addEdge=function(t,e,r,n,i){if(i===void 0){i=[]}if(t===undefined){t="_"+this.rootGraph.elementCount++}if(!(r instanceof uw)){r=this.getNodeById(r)}if(!(n instanceof uw)){n=this.getNodeById(n)}var o=new s(this,t,e,r,n,i);this.add(o);r.connectEdge(o);n.connectEdge(o);return o};e.prototype.add=function(t){if(t.id in this.rootGraph.elementById){throw new Error("Duplicate ID: "+t.id)}this.rootGraph.elementById[t.id]=t;if(t instanceof uw){this.nodes.push(t)}else if(t instanceof s){this.edges.push(t)}return this};e.prototype.getBoundingBox=function(){var t=new l(undefined,undefined,undefined,undefined,this);for(var e=0,r=this.nodes;e<r.length;e++){var n=r[e];t.expand(n.getBoundingBox())}for(var i=0,o=this.edges;i<o.length;i++){var a=o[i];t.expand(a.getBoundingBox())}return t};e.prototype.resolveShapes=function(t){for(var e=0,r=this.nodes;e<r.length;e++){var n=r[e];var i=n.getShapeName();var o=void 0;for(var a=0,s=t;a<s.length;a++){var l=s[a];o=l.getShape(i);if(o){break}}if(o){n.setShape(o);if(n.hasNestedGraph()){n.getNestedGraph().resolveShapes(t)}}else{throw new Error("Failed to resolve shape: "+i)}}};e.prototype.getNodeAttributeDefaultValue=function(t){switch(t){case"color":return"#000";case"fill":return"none";default:return undefined}};e.prototype.getEdgeAttributeDefaultValue=function(t){switch(t){case"color":return"#000";default:return undefined}};e.prototype.setLayout=function(t,e){if(t instanceof ae){return this.layout=t}switch(t){case"null":case"none":return this.layout=new ae(e);case"random":return this.layout=new yw(e);case"default":case"dagre":return this.layout=new lw(e);case"row":return this.layout=new fw(e);case"column":return this.layout=new fe(e);default:throw new Error("Unknown layout: "+t)}};e.prototype.applyLayout=function(){this.forEachNode(function(t){t.applyLayout()});if(this.layout){this.layout.apply(this)}else{for(var t=0,e=this.nodes;t<e.length;t++){var r=e[t];if(r.getPosition()===undefined){throw new Error('Layout not set and node "'+r.id+'" is not placed.')}}}this.calculateTransformations(this.absTransformation)};e.prototype.getAbsTransformation=function(){return this.absTransformation||new a};e.prototype.calculateTransformations=function(t,r){var n=this;if(r===void 0){r=0}this.absTransformation=t||new a;this.forEachNode(function(t){if(t.hasNestedGraph()){var e=t.getNestedGraphTransformation();t.getNestedGraph().calculateTransformations(n.absTransformation.append(e),r+1)}})};e.prototype.forEachNestedGraph=function(n,i){if(i===void 0){i=0}this.forEachNode(function(t){var e;if(t.hasNestedGraph()){var r=t.getNestedGraph();e=n(r,t,i);if(e!==false){r.forEachNestedGraph(n,i+1)}}return e})};e.prototype.setClassDefaults=function(t,e){if(!(t in this.classDefaults)){this.classDefaults[t]=e}else{throw new Error('Class defaults already set for class "'+t+'".')}};e.prototype.getClassDefaults=function(t){if(t in this.classDefaults){return this.classDefaults[t]}else{return undefined}};return e}();var hw=function(){function t(){}t.prototype.renderGraph=function(e,t,r){var n=this;var i;if(t.extraSvg){i=this.renderSvgJson(e,t.extraSvg)}else{i=[]}t.forEachNode(function(t){i.push(n.renderNode(e,t))});t.forEachEdge(function(t){i.push(n.renderEdge(e,t))});return e.g({class:"graph",transform:r?r.toCss():t.getBoundingBox().getCenteringTransformation().toCss()},i)};t.prototype.renderNode=function(r,t){var n=this;return t.getShape().render(r,t,function(t,e){return n.renderGraph(r,t,e)})};t.prototype.renderEdge=function(t,e){if(e.attr("hidden")){return[]}var r=1.5;var n={fill:"none",stroke:e.attr("color"),"stroke-width":r,"stroke-dasharray":e.attr("stroke_dasharray")};var i=e.attr("tooltip");var o=new Bt;var a={d:o,stroke:"rgba(0,0,0,0.3)"};var s={};var l={};var y={};var f={};var u=e.points.map(function(t){return t.toRef(e.graph)});var c=e.start.getPosition().toRef(e.graph);var h=e.end.getPosition().toRef(e.graph);var p=u.length>0?u[0]:h;var x=u.length>0?u[u.length-1]:c;var d=e.start.getConnectorVector(p).toRef(e.graph);var v=e.end.getConnectorVector(x).toRef(e.graph);var g=this.renderArrowHead(y,f,d,r,e.attr("color"),e.getArrowTail());var w=this.renderArrowHead(s,l,v,r,e.attr("color"),e.getArrowHead());if(u.length==0){n.d=new Bt(d.getPointFromEnd(g)).Lp(v.getPointFromEnd(w)).toString()}else{if(u.length%2==1){n.d=new Bt(d.getPointFromEnd(g))._v("Q",u)._p(v.getPointFromEnd(w)).toString()}else{n.d=new Bt(d.getPointFromEnd(g))._v("Q",u).Lp(v.getPointFromEnd(w)).toString()}}return t.g({class:"edge",key:e.id,opacity:e.attr("opacity")},[t.path(n),t.path(s),t.path(l),t.path(y),t.path(f),this.renderEdgeLabel(t,e),i!=""?t.title([],[i]):null,t.path(a)])};t.prototype.renderArrowHead=function(t,e,r,n,i,o){var a=1+n/2;var s=2*a;var l=6*a;var y=l/2;var f=0;var u=new Bt;var c=new Bt;var h=/(o?)([lr]?)(box|crow|curve|icurve|diamond|dot|empty|inv|none|normal|tee|vee|-)/g;var p;while((p=h.exec(o))!==null){var x=p[1]=="o";var d=p[2]!="r";var v=p[2]!="l";var g=p[3];if(g=="empty"){x=true;g="normal"}var w=x?u:c;switch(g){default:f+=l;break;case"none":break;case"box":if(d){w.M(f,y);w.L(f+l,y)}else{w.M(f,0);w.L(f+l,0)}if(v){w.L(f+l,-y);w.L(f,-y)}else{w.L(f+l,0);w.L(f,0)}w.z();f+=l;break;case"crow":w.M(f+l,0);if(d){w.L(f,s);w.L(f+.5*l,0)}w.L(f,0);if(v){w.L(f+.5*l,0);w.L(f,-s)}w.z();f+=l;break;case"curve":if(d&&v){u.M(f+y,y);u.A(y,y,0,false,true,f+y,-y)}else if(d){u.M(f,0);u.A(y,y,0,false,false,f+y,y)}else if(v){u.M(f,0);u.A(y,y,0,false,true,f+y,-y)}u.M(f,0);u.L(f+l,0);f+=l;break;case"icurve":if(d&&v){u.M(f+y,y);u.A(y,y,0,false,false,f+y,-y)}else if(d){u.M(f+2*y,0);u.A(y,y,0,false,true,f+y,y)}else if(v){u.M(f+2*y,0);u.A(y,y,0,false,false,f+y,-y)}u.M(f,0);u.L(f+l,0);f+=l;break;case"diamond":w.M(f,0);if(d){w.L(f+l/2,s)}w.L(f+l,0);if(v){w.L(f+l/2,-s)}w.z();f+=l;break;case"dot":w.M(f,0);if(d){w.A(y,y,0,false,false,f+l,0)}else{w.L(f+l,0)}if(v){w.A(y,y,0,false,false,f,0)}w.z();f+=l;break;case"inv":w.M(f+l,0);if(d){w.L(f,s)}else{w.L(f,0)}if(v){w.L(f,-s)}else{w.L(f,0)}w.z();f+=l;break;case"normal":w.M(f,0);if(d){w.L(f+l,s)}else{w.L(f+l,0)}if(v){w.L(f+l,-s)}else{w.L(f+l,0)}w.z();f+=l;break;case"tee":w.M(f,0);w.L(f+l/4,0);w.M(f+l/2,0);w.L(f+l,0);if(d){w.M(f+l/4,y);w.L(f+l/2,y)}else{w.M(f+l/4,0);w.L(f+l/2,0)}if(v){w.L(f+l/2,-y);w.L(f+l/4,-y)}else{w.L(f+l/2,0);w.L(f+l/4,0)}w.z();f+=l;break;case"vee":w.M(f,0);if(d){w.L(f+l,s);w.L(f+.5*l,0)}w.L(f+l,0);if(v){w.L(f+.5*l,0);w.L(f+l,-s)}w.z();f+=l;break;case"-":w.M(f,0);w.L(f+l,0);f+=l;break}}e.d=u;e["stroke-width"]=n;e.stroke=i;e.fill="none";e.transform="translate("+r.end.toCss()+")"+" rotate("+(180+r.angleDeg())+")";t.d=c;t["stroke-width"]=n;t.stroke=i;t.fill=i;t.transform="translate("+r.end.toCss()+")"+" rotate("+(180+r.angleDeg())+")";return f};t.prototype.renderEdgeLabel=function(t,e){var r=e.attr("label");if(r===undefined||r===null){return null}var n;if(e.labelPosition){n=e.labelPosition.toRef(e.graph)}else if(e.points.length>0){n=e.points[Math.floor(e.points.length/2)].toRef(e.graph)}else{var i=e.start.getPosition().toRef(e.graph);var o=e.end.getPosition().toRef(e.graph);n=new B((i.x+o.x)/2,(i.y+o.y)/2,e.graph)}return t.text({"text-anchor":"left","font-size":"11pt","font-family":"sans-serif",fill:e.attr("color"),x:n.x,y:n.y},[r])};t.prototype.renderBoundingBox=function(t,e,r){if(r===void 0){r="#f00"}return t.rect({x:e.tlx,y:e.tly,width:e.getWidth(),height:e.getHeight(),stroke:r,"stroke-width":1,"stroke-dasharray":5,opacity:.66,fill:"transparent"})};t.prototype.renderSvgJson=function(e,t){var r=this;return t.map(function(t){return e.el(t[0],t[1]||{},t[2]?r.renderSvgJson(e,t[2]):[])})};return t}();var pw=function(){function t(t){this.h=t}t.prototype.el=function(t,e,r){if(r===void 0){r=[]}return this.h(t,{namespace:"http://www.w3.org/2000/svg",attributes:e},r)};t.prototype.circle=function(t,e){if(e===void 0){e=[]}return this.el("circle",t,e)};t.prototype.ellipse=function(t,e){if(e===void 0){e=[]}return this.el("ellipse",t,e)};t.prototype.line=function(t,e){if(e===void 0){e=[]}return this.el("line",t,e)};t.prototype.mesh=function(t,e){if(e===void 0){e=[]}return this.el("mesh",t,e)};t.prototype.path=function(t,e){if(e===void 0){e=[]}return this.el("path",t,e)};t.prototype.polygon=function(t,e){if(e===void 0){e=[]}return this.el("polygon",t,e)};t.prototype.polyline=function(t,e){if(e===void 0){e=[]}return this.el("polyline",t,e)};t.prototype.rect=function(t,e){if(e===void 0){e=[]}return this.el("rect",t,e)};t.prototype.g=function(t,e){if(e===void 0){e=[]}return this.el("g",t,e)};t.prototype.svg=function(t,e){if(e===void 0){e=[]}return this.el("svg",t,e)};t.prototype.text=function(t,e){if(e===void 0){e=[]}return this.el("text",t,e)};t.prototype.tspan=function(t,e){if(e===void 0){e=[]}return this.el("tspan",t,e)};t.prototype.title=function(t,e){if(e===void 0){e=[]}return this.el("title",t,e)};t.prototype.image=function(t,e){if(e===void 0){e=[]}return this.el("image",t,e)};return t}();var xw={};var dw=typeof u!=="undefined"?u:typeof window!=="undefined"?window:{};var vw;if(typeof document!=="undefined"){vw=document}else{vw=dw["__GLOBAL_DOCUMENT_CACHE@4"];if(!vw){vw=dw["__GLOBAL_DOCUMENT_CACHE@4"]=xw}}var gw=vw;var ww=function t(e){return typeof e==="object"&&e!==null};var mw=kw;function kw(t){return t&&(typeof t.hook==="function"&&!t.hasOwnProperty("hook")||typeof t.unhook==="function"&&!t.hasOwnProperty("unhook"))}var bw=Ew;function Ew(t,e,r){for(var n in e){var i=e[n];if(i===undefined){Mw(t,n,i,r)}else if(mw(i)){Mw(t,n,i,r);if(i.hook){i.hook(t,n,r?r[n]:undefined)}}else{if(ww(i)){_w(t,e,r,n,i)}else{t[n]=i}}}}function Mw(t,e,r,n){if(n){var i=n[e];if(!mw(i)){if(e==="attributes"){for(var o in i){t.removeAttribute(o)}}else if(e==="style"){for(var a in i){t.style[a]=""}}else if(typeof i==="string"){t[e]=""}else{t[e]=null}}else if(i.unhook){i.unhook(t,e,r)}}}function _w(t,e,r,n,i){var o=r?r[n]:undefined;if(n==="attributes"){for(var a in i){var s=i[a];if(s===undefined){t.removeAttribute(a)}else{t.setAttribute(a,s)}}return}if(o&&ww(o)&&Cw(o)!==Cw(i)){t[n]=i;return}if(!ww(t[n])){t[n]={}}var l=n==="style"?"":undefined;for(var y in i){var f=i[y];t[n][y]=f===undefined?l:f}}function Cw(t){if(Object.getPrototypeOf){return Object.getPrototypeOf(t)}else if(t.__proto__){return t.__proto__}else if(t.constructor){return t.constructor.prototype}}var Pw="2";var Lw=Nw;function Nw(t){return t&&t.type==="VirtualNode"&&t.version===Pw}var Sw=Iw;function Iw(t){return t&&t.type==="VirtualText"&&t.version===Pw}var jw=Bw;function Bw(t){return t&&t.type==="Widget"}var Ow=Tw;function Tw(t){return t&&t.type==="Thunk"}var Rw=Aw;function Aw(t,e){var r=t;var n=e;if(Ow(e)){n=zw(e,t)}if(Ow(t)){r=zw(t,null)}return{a:r,b:n}}function zw(t,e){var r=t.vnode;if(!r){r=t.vnode=t.render(e)}if(!(Lw(r)||Sw(r)||jw(r))){throw new Error("thunk did not return a valid node")}return r}var Fw=Dw;function Dw(t,e){var r=e?e.document||gw:gw;var n=e?e.warn:null;t=Rw(t).a;if(jw(t)){return t.init()}else if(Sw(t)){return r.createTextNode(t.text)}else if(!Lw(t)){if(n){n("Item is not a valid virtual dom node",t)}return null}var i=t.namespace===null?r.createElement(t.tagName):r.createElementNS(t.namespace,t.tagName);var o=t.properties;bw(i,o);var a=t.children;for(var s=0;s<a.length;s++){var l=Dw(a[s],e);if(l){i.appendChild(l)}}return i}var Gw=Fw;var Vw=Array.isArray;var Ww=Object.prototype.toString;var Uw=Vw||qw;function qw(t){return Ww.call(t)==="[object Array]"}Yw.NONE=0;Yw.VTEXT=1;Yw.VNODE=2;Yw.WIDGET=3;Yw.PROPS=4;Yw.ORDER=5;Yw.INSERT=6;Yw.REMOVE=7;Yw.THUNK=8;var Xw=Yw;function Yw(t,e,r){this.type=Number(t);this.vNode=e;this.patch=r}Yw.prototype.version=Pw;Yw.prototype.type="VirtualPatch";var Hw=Zw;function Zw(t,e){var r;for(var n in t){if(!(n in e)){r=r||{};r[n]=undefined}var i=t[n];var o=e[n];if(i===o){continue}else if(ww(i)&&ww(o)){if($w(o)!==$w(i)){r=r||{};r[n]=o}else if(mw(o)){r=r||{};r[n]=o}else{var a=Zw(i,o);if(a){r=r||{};r[n]=a}}}else{r=r||{};r[n]=o}}for(var s in e){if(!(s in t)){r=r||{};r[s]=e[s]}}return r}function $w(t){if(Object.getPrototypeOf){return Object.getPrototypeOf(t)}else if(t.__proto__){return t.__proto__}else if(t.constructor){return t.constructor.prototype}}var Qw=Jw;function Jw(t,e){var r={a:t};Kw(t,e,r,0);return r}function Kw(t,e,r,n){if(t===e){return}var i=r[n];var o=false;if(Ow(t)||Ow(e)){nm(t,e,r,n)}else if(e==null){if(!jw(t)){em(t,r,n);i=r[n]}i=fm(i,new Xw(Xw.REMOVE,t,e))}else if(Lw(e)){if(Lw(t)){if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var a=Hw(t.properties,e.properties);if(a){i=fm(i,new Xw(Xw.PROPS,t,a))}i=tm(t,e,r,i,n)}else{i=fm(i,new Xw(Xw.VNODE,t,e));o=true}}else{i=fm(i,new Xw(Xw.VNODE,t,e));o=true}}else if(Sw(e)){if(!Sw(t)){i=fm(i,new Xw(Xw.VTEXT,t,e));o=true}else if(t.text!==e.text){i=fm(i,new Xw(Xw.VTEXT,t,e))}}else if(jw(e)){if(!jw(t)){o=true}i=fm(i,new Xw(Xw.WIDGET,t,e))}if(i){r[n]=i}if(o){em(t,r,n)}}function tm(t,e,r,n,i){var o=t.children;var a=sm(o,e.children);var s=a.children;var l=o.length;var y=s.length;var f=l>y?l:y;for(var u=0;u<f;u++){var c=o[u];var h=s[u];i+=1;if(!c){if(h){n=fm(n,new Xw(Xw.INSERT,null,h))}}else{Kw(c,h,r,i)}if(Lw(c)&&c.count){i+=c.count}}if(a.moves){n=fm(n,new Xw(Xw.ORDER,t,a.moves))}return n}function em(t,e,r){om(t,e,r);rm(t,e,r)}function rm(t,e,r){if(jw(t)){if(typeof t.destroy==="function"){e[r]=fm(e[r],new Xw(Xw.REMOVE,t,null))}}else if(Lw(t)&&(t.hasWidgets||t.hasThunks)){var n=t.children;var i=n.length;for(var o=0;o<i;o++){var a=n[o];r+=1;rm(a,e,r);if(Lw(a)&&a.count){r+=a.count}}}else if(Ow(t)){nm(t,null,e,r)}}function nm(t,e,r,n){var i=Rw(t,e);var o=Jw(i.a,i.b);if(im(o)){r[n]=new Xw(Xw.THUNK,null,o)}}function im(t){for(var e in t){if(e!=="a"){return true}}return false}function om(t,e,r){if(Lw(t)){if(t.hooks){e[r]=fm(e[r],new Xw(Xw.PROPS,t,am(t.hooks)))}if(t.descendantHooks||t.hasThunks){var n=t.children;var i=n.length;for(var o=0;o<i;o++){var a=n[o];r+=1;om(a,e,r);if(Lw(a)&&a.count){r+=a.count}}}}else if(Ow(t)){nm(t,null,e,r)}}function am(t){var e={};for(var r in t){e[r]=undefined}return e}function sm(t,e){var r=ym(e);var n=r.keys;var i=r.free;if(i.length===e.length){return{children:e,moves:null}}var o=ym(t);var a=o.keys;var s=o.free;if(s.length===t.length){return{children:e,moves:null}}var l=[];var y=0;var f=i.length;var u=0;for(var c=0;c<t.length;c++){var h=t[c];var p;if(h.key){if(n.hasOwnProperty(h.key)){p=n[h.key];l.push(e[p])}else{p=c-u++;l.push(null)}}else{if(y<f){p=i[y++];l.push(e[p])}else{p=c-u++;l.push(null)}}}var x=y>=i.length?e.length:i[y];for(var d=0;d<e.length;d++){var v=e[d];if(v.key){if(!a.hasOwnProperty(v.key)){l.push(v)}}else if(d>=x){l.push(v)}}var g=l.slice();var w=0;var m=[];var k=[];var b;for(var E=0;E<e.length;){var M=e[E];b=g[w];while(b===null&&g.length){m.push(lm(g,w,null));b=g[w]}if(!b||b.key!==M.key){if(M.key){if(b&&b.key){if(n[b.key]!==E+1){m.push(lm(g,w,b.key));b=g[w];if(!b||b.key!==M.key){k.push({key:M.key,to:E})}else{w++}}else{k.push({key:M.key,to:E})}}else{k.push({key:M.key,to:E})}E++}else if(b&&b.key){m.push(lm(g,w,b.key))}}else{w++;E++}}while(w<g.length){b=g[w];m.push(lm(g,w,b&&b.key))}if(m.length===u&&!k.length){return{children:l,moves:null}}return{children:l,moves:{removes:m,inserts:k}}}function lm(t,e,r){t.splice(e,1);return{from:e,key:r}}function ym(t){var e={};var r=[];var n=t.length;for(var i=0;i<n;i++){var o=t[i];if(o.key){e[o.key]=i}else{r.push(i)}}return{keys:e,free:r}}function fm(t,e){if(t){if(Uw(t)){t.push(e)}else{t=[t,e]}return t}else{return e}}var um=Qw;var cm=xm;var hm={};var pm=[];function xm(t,e,r,n,i){this.tagName=t;this.properties=e||hm;this.children=r||pm;this.key=n!=null?String(n):undefined;this.namespace=typeof i==="string"?i:null;var o=r&&r.length||0;var a=0;var s=false;var l=false;var y=false;var f;for(var u in e){if(e.hasOwnProperty(u)){var c=e[u];if(mw(c)&&c.unhook){if(!f){f={}}f[u]=c}}}for(var h=0;h<o;h++){var p=r[h];if(Lw(p)){a+=p.count||0;if(!s&&p.hasWidgets){s=true}if(!l&&p.hasThunks){l=true}if(!y&&(p.hooks||p.descendantHooks)){y=true}}else if(!s&&jw(p)){if(typeof p.destroy==="function"){s=true}}else if(!l&&Ow(p)){l=true}}this.count=o+a;this.hasWidgets=s;this.hasThunks=l;this.hooks=f;this.descendantHooks=y}xm.prototype.version=Pw;xm.prototype.type="VirtualNode";var dm=vm;function vm(t){this.text=String(t)}vm.prototype.version=Pw;vm.prototype.type="VirtualText";var gm=function t(f){var u=String.prototype.split,c=/()??/.exec("")[1]===f,e;e=function(t,e,r){if(Object.prototype.toString.call(e)!=="[object RegExp]"){return u.call(t,e,r)}var n=[],i=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),o=0,e=new RegExp(e.source,i+"g"),a,s,l,y;t+="";if(!c){a=new RegExp("^"+e.source+"$(?!\\s)",i)}r=r===f?-1>>>0:r>>>0;while(s=e.exec(t)){l=s.index+s[0].length;if(l>o){n.push(t.slice(o,s.index));if(!c&&s.length>1){s[0].replace(a,function(){for(var t=1;t<arguments.length-2;t++){if(arguments[t]===f){s[t]=f}}})}if(s.length>1&&s.index<t.length){Array.prototype.push.apply(n,s.slice(1))}y=s[0].length;o=l;if(n.length>=r){break}}if(e.lastIndex===s.index){e.lastIndex++}}if(o===t.length){if(y||!e.test("")){n.push("")}}else{n.push(t.slice(o))}return n.length>r?n.slice(0,r):n};return e}();var wm=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/;var mm=/^\.|#/;var km=bm;function bm(t,e){if(!t){return"DIV"}var r=!e.hasOwnProperty("id");var n=gm(t,wm);var i=null;if(mm.test(n[1])){i="DIV"}var o,a,s,l;for(l=0;l<n.length;l++){a=n[l];if(!a){continue}s=a.charAt(0);if(!i){i=a}else if(s==="."){o=o||[];o.push(a.substring(1,a.length))}else if(s==="#"&&r){e.id=a.substring(1,a.length)}}if(o){if(e.className){o.push(e.className)}e.className=o.join(" ")}return e.namespace?i:i.toUpperCase()}var Em=Mm;function Mm(t){if(!(this instanceof Mm)){return new Mm(t)}this.value=t}Mm.prototype.hook=function(t,e){if(t[e]!==this.value){t[e]=this.value}};var _m=typeof window!=="undefined"?window:typeof u!=="undefined"?u:{};var Cm=Pm;function Pm(t,e){if(t in _m){return _m[t]}_m[t]=e;return e}var Lm=Nm;function Nm(t,e,r){var n="__INDIVIDUAL_ONE_VERSION_"+t;var i=n+"_ENFORCE_SINGLETON";var o=Cm(i,e);if(o!==e){throw new Error("Can only have one copy of "+t+".\n"+"You already have version "+o+" installed.\n"+"This means you cannot install version "+e)}return Cm(n,r)}var Sm="7";Lm("ev-store",Sm);var Im="__EV_STORE_KEY@"+Sm;var jm=Bm;function Bm(t){var e=t[Im];if(!e){e=t[Im]={}}return e}var Om=Tm;function Tm(t){if(!(this instanceof Tm)){return new Tm(t)}this.value=t}Tm.prototype.hook=function(t,e){var r=jm(t);var n=e.substr(3);r[n]=this.value};Tm.prototype.unhook=function(t,e){var r=jm(t);var n=e.substr(3);r[n]=undefined};var Rm=Am;function Am(t,e,r){var n=[];var i,o,a,s;if(!r&&Gm(e)){r=e;o={}}o=o||e||{};i=km(t,o);if(o.hasOwnProperty("key")){a=o.key;o.key=undefined}if(o.hasOwnProperty("namespace")){s=o.namespace;o.namespace=undefined}if(i==="INPUT"&&!s&&o.hasOwnProperty("value")&&o.value!==undefined&&!mw(o.value)){o.value=Em(o.value)}Fm(o);if(r!==undefined&&r!==null){zm(r,n,i,o)}return new cm(i,o,n,a,s)}function zm(t,e,r,n){if(typeof t==="string"){e.push(new dm(t))}else if(typeof t==="number"){e.push(new dm(String(t)))}else if(Dm(t)){e.push(t)}else if(Uw(t)){for(var i=0;i<t.length;i++){zm(t[i],e,r,n)}}else if(t===null||t===undefined){return}else{throw Vm({foreignObject:t,parentVnode:{tagName:r,properties:n}})}}function Fm(t){for(var e in t){if(t.hasOwnProperty(e)){var r=t[e];if(mw(r)){continue}if(e.substr(0,3)==="ev-"){t[e]=Om(r)}}}}function Dm(t){return Lw(t)||Sw(t)||jw(t)||Ow(t)}function Gm(t){return typeof t==="string"||Uw(t)||Dm(t)}function Vm(t){var e=new Error;e.type="virtual-hyperscript.unexpected.virtual-element";e.message="Unexpected virtual child passed to h().\n"+"Expected a VNode / Vthunk / VWidget / string but:\n"+"got:\n"+Wm(t.foreignObject)+".\n"+"The parent vnode is:\n"+Wm(t.parentVnode);e.foreignObject=t.foreignObject;e.parentVnode=t.parentVnode;return e}function Wm(e){try{return JSON.stringify(e,null,"    ")}catch(t){return String(e)}}var Um=Rm;var qm={};var Xm=Ym;function Ym(t,e,r,n){if(!r||r.length===0){return{}}else{r.sort($m);return Hm(t,e,r,n,0)}}function Hm(t,e,r,n,i){n=n||{};if(t){if(Zm(r,i,i)){n[i]=t}var o=e.children;if(o){var a=t.childNodes;for(var s=0;s<e.children.length;s++){i+=1;var l=o[s]||qm;var y=i+(l.count||0);if(Zm(r,i,y)){Hm(a[s],l,r,n,i)}i=y}}}return n}function Zm(t,e,r){if(t.length===0){return false}var n=0;var i=t.length-1;var o;var a;while(n<=i){o=(i+n)/2>>0;a=t[o];if(n===i){return a>=e&&a<=r}else if(a<e){n=o+1}else if(a>r){i=o-1}else{return true}}return false}function $m(t,e){return t>e?1:-1}var Qm=Jm;function Jm(t,e){if(jw(t)&&jw(e)){if("name"in t&&"name"in e){return t.id===e.id}else{return t.init===e.init}}return false}var Km=tk;function tk(t,e,r){var n=t.type;var i=t.vNode;var o=t.patch;switch(n){case Xw.REMOVE:return ek(e,i);case Xw.INSERT:return rk(e,o,r);case Xw.VTEXT:return nk(e,i,o,r);case Xw.WIDGET:return ik(e,i,o,r);case Xw.VNODE:return ok(e,i,o,r);case Xw.ORDER:sk(e,o);return e;case Xw.PROPS:bw(e,o,i.properties);return e;case Xw.THUNK:return lk(e,r.patch(e,o,r));default:return e}}function ek(t,e){var r=t.parentNode;if(r){r.removeChild(t)}ak(t,e);return null}function rk(t,e,r){var n=r.render(e,r);if(t){t.appendChild(n)}return t}function nk(t,e,r,n){var i;if(t.nodeType===3){t.replaceData(0,t.length,r.text);i=t}else{var o=t.parentNode;i=n.render(r,n);if(o&&i!==t){o.replaceChild(i,t)}}return i}function ik(t,e,r,n){var i=Qm(e,r);var o;if(i){o=r.update(e,t)||t}else{o=n.render(r,n)}var a=t.parentNode;if(a&&o!==t){a.replaceChild(o,t)}if(!i){ak(t,e)}return o}function ok(t,e,r,n){var i=t.parentNode;var o=n.render(r,n);if(i&&o!==t){i.replaceChild(o,t)}return o}function ak(t,e){if(typeof e.destroy==="function"&&jw(e)){e.destroy(t)}}function sk(t,e){var r=t.childNodes;var n={};var i;var o;var a;for(var s=0;s<e.removes.length;s++){o=e.removes[s];i=r[o.from];if(o.key){n[o.key]=i}t.removeChild(i)}var l=r.length;for(var y=0;y<e.inserts.length;y++){a=e.inserts[y];i=n[a.key];t.insertBefore(i,a.to>=l++?null:r[a.to])}}function lk(t,e){if(t&&e&&t!==e&&t.parentNode){t.parentNode.replaceChild(e,t)}return e}var yk=fk;function fk(t,e,r){r=r||{};r.patch=r.patch&&r.patch!==fk?r.patch:uk;r.render=r.render||Fw;return r.patch(t,e,r)}function uk(t,e,r){var n=hk(e);if(n.length===0){return t}var i=Xm(t,e.a,n);var o=t.ownerDocument;if(!r.document&&o!==gw){r.document=o}for(var a=0;a<n.length;a++){var s=n[a];t=ck(t,i[s],e[s],r)}return t}function ck(t,e,r,n){if(!e){return t}var i;if(Uw(r)){for(var o=0;o<r.length;o++){i=Km(r[o],e,n);if(e===t){t=i}}}else{i=Km(r,e,n);if(e===t){t=i}}return t}function hk(t){var e=[];for(var r in t){if(r!=="a"){e.push(Number(r))}}return e}var pk=yk;var xk=function(){function t(t,e){var r=this;this.vTree=null;this.vElement=null;this.isRendered=false;if(t instanceof Element){this.svgElement=t}else{this.svgElement=document.querySelector(t);if(!this.svgElement){throw new Error("SVG element not found: "+t)}}if(e instanceof cw){this.graph=e}else if(e&&e.nodes&&e.edges){this.graph=this.createGraphFromObject(e)}else{var n=this.svgElement.getAttribute("data-graph");if(n){this.graph=this.createGraphFromObject(JSON.parse(n))}else{this.graph=new cw}}this.svg=new pw(Um);this.shapeLibraries=[new ie,new oe];this.renderer=new hw;window.setTimeout(function(){r.update()},0)}t.prototype.update=function(){if(this.vTree!==null){var t=this.render();var e=um(this.vTree,t);this.vElement=pk(this.vElement,e);this.vTree=t}else{this.vTree=this.render();this.vElement=Gw(this.vTree);this.svgElement.appendChild(this.vElement)}};t.prototype.render=function(){this.graph.resolveShapes(this.shapeLibraries);this.graph.applyLayout();var t=this.graph.getBoundingBox();if(!t.isValid()){throw new Error("Failed to calculate graph bounding box.")}var e=Math.ceil(t.getWidth()+2).toString();var r=Math.ceil(t.getHeight()+2).toString();this.svgElement.setAttribute("width",e);this.svgElement.setAttribute("height",r);this.svgElement.setAttribute("viewBox","0 0 "+e+" "+r);return this.renderer.renderGraph(this.svg,this.graph,new a(-t.tlx,-t.tly))};t.prototype.createGraphFromObject=function(t,e){var r=e||new cw;if(t.extraSvg){r.extraSvg=t.extraSvg}if(t.layout){r.setLayout(t.layout,t.layoutOptions||{})}if(t.nodes){var n=t.nodes.length;for(var i=0;i<n;i++){var o=t.nodes[i];var a=r.addNode(o.id,o.attrs||o);if(o.graph){this.createGraphFromObject(o.graph,a.getNestedGraph())}}}if(t.edges){var s=t.edges.length;for(var i=0;i<s;i++){var l=t.edges[i];var y=l.points?l.points.map(function(t){return t instanceof B?t:new B(t[0],t[1],r)}):[];r.addEdge(l.id,l.attrs||l,l.start,l.end,y)}}return r};return t}();var dk=function(r){f(t,r);function t(t){var e=r.call(this)||this;e.jsonShapeData=t;return e}t.prototype.renderElements=function(e,r){var n=this;return this.jsonShapeData.svg.map(function(t){return n.renderJsonToHyperscript(e,r,t)})};t.prototype.renderJsonToHyperscript=function(e,r,t){var n=this;var i=t;return e.el(i[0],i[1],i[2]&&i[2].length>0?i[2].map(function(t){return n.renderJsonToHyperscript(e,r,t)}):[])};return t}(It);var vk=function(e){f(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.jsonShapeData={};return t}t.prototype.createShape=function(t){if(t in this.jsonShapeData){return new dk(this.jsonShapeData[t])}else{return undefined}};t.prototype.listShapes=function(){return Object.keys(this.jsonShapeData)};return t}(ie);var gk="v1.4";t.BoundingBox=l;t.DiaShapeLibrary=e;t.Edge=s;t.Element=r;t.FallbackShapeLibrary=oe;t.Graph=cw;t.GraphView=xk;t.JsonShape=dk;t.JsonShapeLibrary=vk;t.Layout=ae;t.LayoutColumn=fe;t.LayoutDagre=lw;t.LayoutRandom=yw;t.LayoutRow=fw;t.Node=uw;t.Point=B;t.Renderer=hw;t.Shape=It;t.ShapeBpmnEvent=Ot;t.ShapeBpmnGateway=At;t.ShapeBpmnTask=Ft;t.ShapeCircle=jt;t.ShapeDiamond=Rt;t.ShapeEllipse=Dt;t.ShapeHexagon=Vt;t.ShapeLabel=Ut;t.ShapeLibrary=ie;t.ShapeNestedGraph=qt;t.ShapeNone=Xt;t.ShapeNote=Yt;t.ShapeOctagon=Ht;t.ShapePath=zt;t.ShapePentagon=Zt;t.ShapePoint=$t;t.ShapePolygon=Tt;t.ShapeRect=Wt;t.ShapeRegularPolygon=Gt;t.ShapeRound=Qt;t.ShapeSeptagon=Jt;t.ShapeSquare=Kt;t.ShapeSvg=te;t.ShapeUmlState=ee;t.ShapeUmlStateFinal=re;t.ShapeUmlStateInitial=ne;t.Size=o;t.SortAttribute=ye;t.SortSwimLane=se;t.SortTopological=le;t.Svg=pw;t.SvgPath=Bt;t.Transformation=a;t.Vector=St;t.version=gk;Object.defineProperty(t,"__esModule",{value:true})});